<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<link rel="shortcut icon" href="http://static.moinmo.in/favicon.ico">
<meta http-equiv="Content-Type" content="text/html;charset=utf-8">
<meta name="robots" content="noindex,nofollow">

<title>MoinMoin/InstallDocs - 1.8 Master Wiki</title>
<script type="text/javascript" src="http://static.moinmo.in/moin_static180/common/js/common.js"></script>


<link rel="stylesheet" type="text/css" charset="utf-8" media="all" href="http://static.moinmo.in/moin_static180/modernized/css/common.css">
<link rel="stylesheet" type="text/css" charset="utf-8" media="all" href="http://static.moinmo.in/moin_static180/modernized/css/print.css">

<!-- css only for MSIE browsers -->
<!--[if IE]>
   <link rel="stylesheet" type="text/css" charset="utf-8" media="all" href="http://static.moinmo.in/moin_static180/modernized/css/msie.css">
<![endif]-->





<link rel="Start" href="http://master18.moinmo.in/FrontPage">
<link rel="Alternate" title="Wiki Markup" href="http://master18.moinmo.in/MoinMoin/InstallDocs?action=raw">
<link rel="Alternate" media="print" title="Print View" href="http://master18.moinmo.in/MoinMoin/InstallDocs?action=print">
<link rel="Up" href="http://master18.moinmo.in/MoinMoin">
<link rel="Search" href="http://master18.moinmo.in/FindPage">
<link rel="Index" href="http://master18.moinmo.in/TitleIndex">
<link rel="Glossary" href="http://master18.moinmo.in/WordIndex">
<link rel="Help" href="http://master18.moinmo.in/HelpOnFormatting">
</head>

<body  lang="en" dir="ltr">
<div id="page" lang="en" dir="ltr">
<span id="interwiki"><a href="http://master18.moinmo.in/FrontPage" rel="nofollow">MoinMaster</a><span class="sep">: </span></span><span id="pagelocation"><a href="http://master18.moinmo.in/MoinMoin">MoinMoin</a><span class="sep">/</span><a class="backlink" href="http://master18.moinmo.in/4ct10n/fullsearch/MoinMoin/InstallDocs?action=fullsearch&amp;context=180&amp;value=linkto%3A%22MoinMoin/InstallDocs%22" rel="nofollow" title="Click to do a full-text search for this title">InstallDocs</a></span><div dir="ltr" id="content" lang="en"><span class="anchor" id="top"></span>
<span class="anchor" id="line-9"></span><span class="anchor" id="line-10"></span><p class="line862">This HTML page contains the basic install docs that can be found on <a class="http" href="http://master.moinmo.in/MoinMoin/InstallDocs">http://master.moinmo.in/MoinMoin/InstallDocs</a>. It contains all necessary information to get your wiki up and running, even without being online. If you have a permanent internet connection, you might want to browse the docs on the Help<tt class="backtick"></tt>On<tt class="backtick"></tt>Installing page, which might contain more up-to-date information. <span class="anchor" id="line-11"></span><span class="anchor" id="line-12"></span><p class="line874">After following the procedures on this page, you should have a working wiki and can browse the rest of the online docs there. <span class="anchor" id="line-13"></span><span class="anchor" id="line-14"></span><p class="line867">
<h1 id="HowtoinstallyourownMoinMoinWiki">How to install your own MoinMoin Wiki</h1>
<span class="anchor" id="line-15"></span><p class="line862">This page describes the installation procedure of <a href="http://master18.moinmo.in/MoinMoin">MoinMoin</a>. In the next section, there is a list of real-world <a href="http://master18.moinmo.in/MoinMoin/InstallDocs#installscenarios">Installation Scenarios</a> that help you to understand how to apply the instructions in different environments. If you already have a wiki running and want to upgrade, see <a class="interwiki" href="http://master18.moinmo.in/HelpOnUpdating" title="MoinMaster">HelpOnUpdating</a>. <span class="anchor" id="line-16"></span><span class="anchor" id="line-17"></span><p class="line862">A Moin<tt class="backtick"></tt>Moin installation is done by some elementary steps: <span class="anchor" id="line-18"></span><ul><li><p class="line891"><a href="http://master18.moinmo.in/MoinMoin/InstallDocs#basic-install">Basic Installation</a> explains the "<tt class="backtick">setup.py</tt>" step of the installation in more detail. This is used to get the Moin<tt class="backtick"></tt>Moin code and wiki template installed onto your system. This applies equally to all scenarios, and you should read it before trying a live installation. <span class="anchor" id="line-19"></span></li><li><p class="line891"><a href="http://master18.moinmo.in/MoinMoin/InstallDocs#wikiinstance-creation">Wiki Instance Creation</a> explains how you make a new wiki instance (data and configuration), this is also common to all scenarios. <span class="anchor" id="line-20"></span></li><li><p class="line862">Getting the web server to serve static stuff under the <tt class="backtick">url_prefix_static</tt> URL - used for theme CSS and images, etc. - this is slightly different for the various web servers that can be used - see below. <span class="anchor" id="line-21"></span></li><li>Getting the web server to execute the moin code when you access wiki pages. This is done either by CGI, FastCGI, mod_python or Twisted or the built-in stand alone server - this is slightly different for the various web servers that can be used - see below. <span class="anchor" id="line-22"></span></li><li><p class="line862">After a successful installation, you might want to read more about configuration and other options that you, as the wiki administrator, can set up. <a class="interwiki" href="http://master18.moinmo.in/HelpOnAdministration" title="MoinMaster">HelpOnAdministration</a> contains links to pages that cover these topics. Especially, the <a class="interwiki" href="http://master18.moinmo.in/HelpOnConfiguration" title="MoinMaster">HelpOnConfiguration</a> and <a class="interwiki" href="http://master18.moinmo.in/HelpOnUpdating" title="MoinMaster">HelpOnUpdating</a> pages provide additional information regarding wiki setup and maintenance. <span class="anchor" id="line-23"></span></li><li><p class="line891"><a href="http://master18.moinmo.in/MoinMoin/InstallDocs#trouble-shooting">Trouble-shooting</a> helps with fixing any general problems you might encounter, which apply to any installation platform.  <span class="anchor" id="line-24"></span><span class="anchor" id="line-25"></span></li></ul><p class="line867"><span class="anchor" id="installscenarios"></span> <span class="anchor" id="line-26"></span>
<h1 id="Installationstepsspecificforsomewebserversandoperatingsystems">Installation steps specific for some web servers and operating systems</h1>
<span class="anchor" id="line-27"></span><span class="anchor" id="line-28"></span><p class="line862">The following links will show you concrete examples of installation sessions, showing the commands used and explaining what they do. You <em>must first read the general information on installing above</em> before doing the installation steps described on the pages linked from below: <span class="anchor" id="line-29"></span><span class="anchor" id="line-30"></span><p class="line874">Linux: <span class="anchor" id="line-31"></span><ul><li><p class="line891"><a href="http://master18.moinmo.in/MoinMoin/InstallDocs#linuxapache-install">Linux Installation using Apache</a> <span class="anchor" id="line-32"></span></li><li><p class="line891"><a href="http://master18.moinmo.in/MoinMoin/InstallDocs#linuxstandalone-install">Linux Installation using standalone server</a> <span class="anchor" id="line-33"></span><span class="anchor" id="line-34"></span></li></ul><p class="line874">Long-Running-Process Setup: <span class="anchor" id="line-35"></span><ul><li><p class="line891"><a href="http://master18.moinmo.in/MoinMoin/InstallDocs#fastcgi-install">FastCGI Setup using Apache or Lighttpd</a> <span class="anchor" id="line-36"></span></li><li><p class="line891"><a href="http://master18.moinmo.in/MoinMoin/InstallDocs#modpy-install">mod_python Setup using Apache</a> <span class="anchor" id="line-37"></span></li><li><p class="line891"><a href="http://master18.moinmo.in/MoinMoin/InstallDocs#twisted-install">Setup using twisted</a> <span class="anchor" id="line-38"></span><span class="anchor" id="line-39"></span></li></ul><p class="line874">Mac OS X: <span class="anchor" id="line-40"></span><ul><li><p class="line891"><a href="http://master18.moinmo.in/MoinMoin/InstallDocs#macosx-install">Mac OS X Installation using Apache</a> <span class="anchor" id="line-41"></span><span class="anchor" id="line-42"></span></li></ul><p class="line874">Windows: <span class="anchor" id="line-43"></span><ul><li><p class="line891"><a href="http://master18.moinmo.in/MoinMoin/InstallDocs#win32apache-install">Windows Installation using Apache</a> <span class="anchor" id="line-44"></span></li><li><p class="line891"><a href="http://master18.moinmo.in/MoinMoin/InstallDocs#win32iis-install">Windows Installation using IIS</a> <span class="anchor" id="line-45"></span><span class="anchor" id="line-46"></span></li></ul><p class="line867"><span class="anchor" id="basic-install"></span> <span class="anchor" id="line-47"></span><div dir="ltr" id="HelpOnInstalling.2BAC8-BasicInstallation.content" lang="en"><span class="anchor" id="HelpOnInstalling.2BAC8-BasicInstallation.top"></span>
<span class="anchor" id="HelpOnInstalling.2BAC8-BasicInstallation.line-8"></span><span class="anchor" id="HelpOnInstalling.2BAC8-BasicInstallation.line-9"></span><p class="line867"><span class="anchor" id="HelpOnInstalling.2BAC8-BasicInstallation.line-10"></span><p class="line867"><strong>How to do a basic installation of <a href="http://master18.moinmo.in/MoinMoin">MoinMoin</a> on your system.</strong> <span class="anchor" id="HelpOnInstalling.2BAC8-BasicInstallation.line-11"></span><span class="anchor" id="HelpOnInstalling.2BAC8-BasicInstallation.line-12"></span><p class="line867"><strong>Contents</strong> <span class="anchor" id="HelpOnInstalling.2BAC8-BasicInstallation.line-13"></span><div class="table-of-contents"><p class="table-of-contents-heading">Contents<ol><li>
<a href="#HelpOnInstalling.2BAC8-BasicInstallation.CheckifPythonisworking">Check if Python is working</a></li><li>
<a href="#HelpOnInstalling.2BAC8-BasicInstallation.DownloadMoinMoin">Download MoinMoin</a></li><li>
<a href="#HelpOnInstalling.2BAC8-BasicInstallation.InstallMoinMoin">Install MoinMoin</a><ol><li>
<a href="#HelpOnInstalling.2BAC8-BasicInstallation.RecommendedinstallationcommandforLinux.28andMacOsX.29">Recommended installation command for Linux (and MacOs X)</a></li><li>
<a href="#HelpOnInstalling.2BAC8-BasicInstallation.Debuggingsetupprocess">Debugging setup process</a></li><li>
<a href="#HelpOnInstalling.2BAC8-BasicInstallation.Installingtothedefaultsystemlocation">Installing to the default system location</a></li><li>
<a href="#HelpOnInstalling.2BAC8-BasicInstallation.Installinginthehomedirectoryoranotherspecificlocation">Installing in the home directory or another specific location</a></li></ol></li><li>
<a href="#HelpOnInstalling.2BAC8-BasicInstallation.Testinstallation">Test installation</a></li><li>
<a href="#HelpOnInstalling.2BAC8-BasicInstallation.Whathasbeeninstalled">What has been installed</a></li></ol></div><p class="line874"> <span class="anchor" id="HelpOnInstalling.2BAC8-BasicInstallation.line-14"></span><span class="anchor" id="HelpOnInstalling.2BAC8-BasicInstallation.line-15"></span><p class="line862">Before you can integrate Moin<tt class="backtick"></tt>Moin into your web environment, you have to install the <a href="http://master18.moinmo.in/MoinMoin">MoinMoin</a> source code and data files using the standard Python <em>distutils</em> mechanism (<tt class="backtick">setup.py</tt>). This page explains the steps you usually need to take to do this. For more details on the <em>distutils</em> installation process, consult the <a class="http" href="http://www.python.org/doc/current/inst/inst.html">Installing Python Modules</a> document in your Python documentation set. <span class="anchor" id="HelpOnInstalling.2BAC8-BasicInstallation.line-16"></span><span class="anchor" id="HelpOnInstalling.2BAC8-BasicInstallation.line-17"></span><p class="line874">The installation is similar on Windows and Linux (and other POSIX-type systems; for simplicity, we just say "Linux" in the docs). <span class="anchor" id="HelpOnInstalling.2BAC8-BasicInstallation.line-18"></span><span class="anchor" id="HelpOnInstalling.2BAC8-BasicInstallation.line-19"></span><ul><li style="list-style-type:none"><p class="line891"><img alt="(!)" height="16" src="http://static.moinmo.in/moin_static180/modernized/img/idea.png" title="(!)" width="16" /> We use text such as <strong><tt class="backtick">&gt;&nbsp;command&nbsp;arguments</tt></strong> to show what you have to type at the command prompt (also known as shell, terminal, etc.). In our examples "<tt class="backtick">&gt;&nbsp;</tt>" is the prompt, you don't have to type it in, you have to type what comes after it. Lines that do not begin with "<tt class="backtick">&gt;&nbsp;</tt>" are the answers to the commands you have typed. Read them carefully. <span class="anchor" id="HelpOnInstalling.2BAC8-BasicInstallation.line-20"></span><span class="anchor" id="HelpOnInstalling.2BAC8-BasicInstallation.line-21"></span></li></ul><p class="line867">
<h1 id="HelpOnInstalling.2BAC8-BasicInstallation.CheckifPythonisworking">Check if Python is working</h1>
<span class="anchor" id="HelpOnInstalling.2BAC8-BasicInstallation.line-22"></span><span class="anchor" id="HelpOnInstalling.2BAC8-BasicInstallation.line-23"></span><p class="line862">Moin<tt class="backtick"></tt>Moin needs Python to run, so the first step is to check if an usable version of Python is installed and correctly set-up. If this is not the case, you will have to fix that before you can proceed. <span class="anchor" id="HelpOnInstalling.2BAC8-BasicInstallation.line-24"></span><span class="anchor" id="HelpOnInstalling.2BAC8-BasicInstallation.line-25"></span><p class="line862">The <tt class="backtick">CHANGES</tt> file in the Moin<tt class="backtick"></tt>Moin archive mentions what versions are supported. Python 2.3 is the minimum requirement for Moin<tt class="backtick"></tt>Moin 1.7, but we suggest you use the latest Python release version. <span class="anchor" id="HelpOnInstalling.2BAC8-BasicInstallation.line-26"></span><span class="anchor" id="HelpOnInstalling.2BAC8-BasicInstallation.line-27"></span><p class="line862">You can download Python at <a class="http" href="http://www.python.org/download/">http://www.python.org/download/</a>. <span class="anchor" id="HelpOnInstalling.2BAC8-BasicInstallation.line-28"></span><span class="anchor" id="HelpOnInstalling.2BAC8-BasicInstallation.line-29"></span><p class="line862">If you are pretty sure an acceptable version of Python is installed but the commands below do not work, this may be because your Python files are not in the <em>search path</em>. Correctly setting the search path is outside the scope of this document; please ask for help on your favorite Python, Linux, or Windows discussion board. <span class="anchor" id="HelpOnInstalling.2BAC8-BasicInstallation.line-30"></span><span class="anchor" id="HelpOnInstalling.2BAC8-BasicInstallation.line-31"></span><p class="line874">If you have shell access, checking if Python is working is very simple. Just type the following command, and look at the result: <span class="anchor" id="HelpOnInstalling.2BAC8-BasicInstallation.line-32"></span><span class="anchor" id="HelpOnInstalling.2BAC8-BasicInstallation.line-33"></span><span class="anchor" id="HelpOnInstalling.2BAC8-BasicInstallation.line-34"></span><span class="anchor" id="HelpOnInstalling.2BAC8-BasicInstallation.line-35"></span><pre>&gt; python -V
Python 2.4.4</pre><span class="anchor" id="HelpOnInstalling.2BAC8-BasicInstallation.line-36"></span><span class="anchor" id="HelpOnInstalling.2BAC8-BasicInstallation.line-37"></span><p class="line862">If you don't have shell access, you can try using this <tt class="backtick">pythontest.cgi</tt> script (it assumes that you are using a Linux kind of webserver). Upload the script to your <tt class="backtick">cgi-bin</tt> directory, use <tt class="backtick">chmod&nbsp;a+rx&nbsp;pythontest.cgi</tt> (or a similar command in your FTP program) to make it executable, and invoke it using your web browser. <span class="anchor" id="HelpOnInstalling.2BAC8-BasicInstallation.line-38"></span><span class="anchor" id="HelpOnInstalling.2BAC8-BasicInstallation.line-39"></span><p class="line867"><object data="/HelpOnInstalling/BasicInstallation?action=AttachFile&amp;do=get&amp;target=pythontest.cgi" title="" type="application/octet-stream">pythontest.cgi</object> <span class="anchor" id="HelpOnInstalling.2BAC8-BasicInstallation.line-40"></span><span class="anchor" id="HelpOnInstalling.2BAC8-BasicInstallation.line-41"></span><p class="line874">If it doesn't display "CGI scripts work", well, then CGI scripts don't work. If it doesn't show one or more Python version numbers, then Python is not correctly installed. In both cases, before you can proceed, you will have to get in touch with the administrator of the server so that the problems get corrected. <span class="anchor" id="HelpOnInstalling.2BAC8-BasicInstallation.line-42"></span><span class="anchor" id="HelpOnInstalling.2BAC8-BasicInstallation.line-43"></span><p class="line862">Also be sure to read <a href="http://master18.moinmo.in/HelpOnInstalling/ApacheOnLinuxFtp">../ApacheOnLinuxFtp</a> after you've completed the ../BasicInstallation illustrated here. <span class="anchor" id="HelpOnInstalling.2BAC8-BasicInstallation.line-44"></span><span class="anchor" id="HelpOnInstalling.2BAC8-BasicInstallation.line-45"></span><p class="line867">
<h1 id="HelpOnInstalling.2BAC8-BasicInstallation.DownloadMoinMoin">Download MoinMoin</h1>
<span class="anchor" id="HelpOnInstalling.2BAC8-BasicInstallation.line-46"></span><span class="anchor" id="HelpOnInstalling.2BAC8-BasicInstallation.line-47"></span><p class="line862">To download the distribution archive, go to the <a class="http" href="http://moinmo.in/MoinMoinDownload">download page</a> and fetch the latest archive. <span class="anchor" id="HelpOnInstalling.2BAC8-BasicInstallation.line-48"></span><span class="anchor" id="HelpOnInstalling.2BAC8-BasicInstallation.line-49"></span><p class="line862">The next step is to unpack the distribution archive (which you have done already if you are reading this text from your hard drive). If you read this on the web, the distribution comes in a versioned <tt class="backtick">.tar.gz</tt> archive, which you can unpack as shown below. <span class="anchor" id="HelpOnInstalling.2BAC8-BasicInstallation.line-50"></span><span class="anchor" id="HelpOnInstalling.2BAC8-BasicInstallation.line-51"></span><ul><li>On Windows <span class="anchor" id="HelpOnInstalling.2BAC8-BasicInstallation.line-52"></span><ul><li><p class="line862">You can use recent versions of programs like <a class="http" href="http://www.7-zip.org/">7-Zip</a>, Win<tt class="backtick"></tt>Zip, Win<tt class="backtick"></tt>Rar, and Win<tt class="backtick"></tt>Ace, which handle .tar.gz kind of archives. <span class="anchor" id="HelpOnInstalling.2BAC8-BasicInstallation.line-53"></span></li><li><p class="line862">At the command prompt, you can use <a class="http" href="http://gnuwin32.sourceforge.net/packages/gzip.htm">GNU gzip</a> and <a class="http" href="http://gnuwin32.sourceforge.net/packages/tar.htm">GNU tar</a> for Windows. <span class="anchor" id="HelpOnInstalling.2BAC8-BasicInstallation.line-54"></span></li></ul></li><li>On Linux <span class="anchor" id="HelpOnInstalling.2BAC8-BasicInstallation.line-55"></span><ul><li>You can use your favorite file manager -- it should be able to unpack them. <span class="anchor" id="HelpOnInstalling.2BAC8-BasicInstallation.line-56"></span></li><li><p class="line862">At any shell prompt, you can use the <tt class="backtick">tar</tt> command. <span class="anchor" id="HelpOnInstalling.2BAC8-BasicInstallation.line-57"></span><span class="anchor" id="HelpOnInstalling.2BAC8-BasicInstallation.line-58"></span></li></ul></li></ul><p class="line862">The distribution archive will always unpack into a directory named <tt class="backtick">moin-&lt;version&gt;</tt>, for example <tt class="backtick">moin-1.7.0</tt>. <span class="anchor" id="HelpOnInstalling.2BAC8-BasicInstallation.line-59"></span><span class="anchor" id="HelpOnInstalling.2BAC8-BasicInstallation.line-60"></span><p class="line862">Here is how you would unpack the archive (using GNU tar) and enter the directory with the Moin<tt class="backtick"></tt>Moin files: <span class="anchor" id="HelpOnInstalling.2BAC8-BasicInstallation.line-61"></span><span class="anchor" id="HelpOnInstalling.2BAC8-BasicInstallation.line-62"></span><span class="anchor" id="HelpOnInstalling.2BAC8-BasicInstallation.line-63"></span><span class="anchor" id="HelpOnInstalling.2BAC8-BasicInstallation.line-64"></span><pre>&gt; tar xzf moin-1.7.0.tar.gz
&gt; cd moin-1.7.0</pre><span class="anchor" id="HelpOnInstalling.2BAC8-BasicInstallation.line-65"></span><span class="anchor" id="HelpOnInstalling.2BAC8-BasicInstallation.line-66"></span><p class="line867">
<h1 id="HelpOnInstalling.2BAC8-BasicInstallation.InstallMoinMoin">Install MoinMoin</h1>
<span class="anchor" id="HelpOnInstalling.2BAC8-BasicInstallation.line-67"></span><span class="anchor" id="HelpOnInstalling.2BAC8-BasicInstallation.line-68"></span><p class="line862">You can install Moin<tt class="backtick"></tt>Moin to either: <span class="anchor" id="HelpOnInstalling.2BAC8-BasicInstallation.line-69"></span><ul><li>a system location (if you have the necessary rights to do that -- on Linux you need to be root) <span class="anchor" id="HelpOnInstalling.2BAC8-BasicInstallation.line-70"></span></li><li><p class="line862">some specific location, like your home directory (Linux) or <tt class="backtick">C:\moin</tt> (Windows). <span class="anchor" id="HelpOnInstalling.2BAC8-BasicInstallation.line-71"></span><span class="anchor" id="HelpOnInstalling.2BAC8-BasicInstallation.line-72"></span></li></ul><p class="line874">The installation to a system location is easier, so choose that if possible. <span class="anchor" id="HelpOnInstalling.2BAC8-BasicInstallation.line-73"></span><span class="anchor" id="HelpOnInstalling.2BAC8-BasicInstallation.line-74"></span><p class="line867"><img alt="/!\" height="16" src="http://static.moinmo.in/moin_static180/modernized/img/alert.png" title="/!\" width="16" /> If you have several versions of Python installed, please use the same version for setup and for running the wiki. Usually, the latest Python version will get the best results. <span class="anchor" id="HelpOnInstalling.2BAC8-BasicInstallation.line-75"></span><span class="anchor" id="HelpOnInstalling.2BAC8-BasicInstallation.line-76"></span><p class="line867">
<h2 id="HelpOnInstalling.2BAC8-BasicInstallation.RecommendedinstallationcommandforLinux.28andMacOsX.29">Recommended installation command for Linux (and MacOs X)</h2>
<span class="anchor" id="HelpOnInstalling.2BAC8-BasicInstallation.line-77"></span><p class="line862">As you have chosen to not use a preconfigured package for your system this time it is highly recommended that you do not install <a href="http://master18.moinmo.in/MoinMoin">MoinMoin</a> into the default location. This is because otherwise, if you later want to install a moin package of your distribution this will overwrite your existing installation. The most common path for your own installations is below <tt>/usr/local</tt> (this is called the PREFIX). A command that should be ok for most Linux distributions and also MacOS X is <span class="anchor" id="HelpOnInstalling.2BAC8-BasicInstallation.line-78"></span><span class="anchor" id="HelpOnInstalling.2BAC8-BasicInstallation.line-79"></span><p class="line867"><span class="anchor" id="HelpOnInstalling.2BAC8-BasicInstallation.line-80"></span><span class="anchor" id="HelpOnInstalling.2BAC8-BasicInstallation.line-81"></span><pre>&gt; python setup.py install --prefix='/usr/local' --record=install.log</pre><span class="anchor" id="HelpOnInstalling.2BAC8-BasicInstallation.line-82"></span><span class="anchor" id="HelpOnInstalling.2BAC8-BasicInstallation.line-83"></span><p class="line862">This will install the shared files to '/usr/local/share/moin' and the moin code to <tt class="backtick">/usr/local/lib/python2.x/site-packages/MoinMoin/</tt>. <span class="anchor" id="HelpOnInstalling.2BAC8-BasicInstallation.line-84"></span><span class="anchor" id="HelpOnInstalling.2BAC8-BasicInstallation.line-85"></span><p class="line867">
<h2 id="HelpOnInstalling.2BAC8-BasicInstallation.Debuggingsetupprocess">Debugging setup process</h2>
<span class="anchor" id="HelpOnInstalling.2BAC8-BasicInstallation.line-86"></span><span class="anchor" id="HelpOnInstalling.2BAC8-BasicInstallation.line-87"></span><p class="line862">If you have problems with the <tt class="backtick">setup.py</tt> install step, try using the command: <span class="anchor" id="HelpOnInstalling.2BAC8-BasicInstallation.line-88"></span><span class="anchor" id="HelpOnInstalling.2BAC8-BasicInstallation.line-89"></span><span class="anchor" id="HelpOnInstalling.2BAC8-BasicInstallation.line-90"></span><pre>&gt; python -v setup.py --quiet install --record=install.log</pre><span class="anchor" id="HelpOnInstalling.2BAC8-BasicInstallation.line-91"></span><span class="anchor" id="HelpOnInstalling.2BAC8-BasicInstallation.line-92"></span><p class="line862">The additional <tt class="backtick">-v</tt> flag should provide you detailed verbose messages every step of the way. <span class="anchor" id="HelpOnInstalling.2BAC8-BasicInstallation.line-93"></span><span class="anchor" id="HelpOnInstalling.2BAC8-BasicInstallation.line-94"></span><p class="line867"><img alt="/!\" height="16" src="http://static.moinmo.in/moin_static180/modernized/img/alert.png" title="/!\" width="16" /> On Linux, if you get an error like <tt class="backtick">Invalid&nbsp;Python&nbsp;installation:&nbsp;cannot&nbsp;find&nbsp;/usr/lib/Python2.x/config/Makefile</tt>, you may not have the python module <strong><tt class="backtick">distutils</tt></strong> installed, it's usually a part of the <strong>Python development libarary (<tt class="backtick">python-dev</tt>)</strong>. Some Linux distributions may not have installed it by default. For example, on Mandrake you need to install the <strong><tt class="backtick">python-devel</tt></strong> package, on Debian it's called <strong><tt class="backtick">python-dev</tt></strong>. <span class="anchor" id="HelpOnInstalling.2BAC8-BasicInstallation.line-95"></span><span class="anchor" id="HelpOnInstalling.2BAC8-BasicInstallation.line-96"></span><p class="line867">
<h2 id="HelpOnInstalling.2BAC8-BasicInstallation.Installingtothedefaultsystemlocation">Installing to the default system location</h2>
<span class="anchor" id="HelpOnInstalling.2BAC8-BasicInstallation.line-97"></span><span class="anchor" id="HelpOnInstalling.2BAC8-BasicInstallation.line-98"></span><p class="line867"><span class="anchor" id="HelpOnInstalling.2BAC8-BasicInstallation.line-99"></span><span class="anchor" id="HelpOnInstalling.2BAC8-BasicInstallation.line-100"></span><pre>&gt; python setup.py --quiet install --record=install.log</pre><span class="anchor" id="HelpOnInstalling.2BAC8-BasicInstallation.line-101"></span><span class="anchor" id="HelpOnInstalling.2BAC8-BasicInstallation.line-102"></span><p class="line862">This installs Moin<tt class="backtick"></tt>Moin to the default system location (typically the Python directory, for example on Linux, inside <tt class="backtick">/usr/lib/python2.x/site-packages/MoinMoin</tt> and <tt class="backtick">/usr/share/moin</tt>). Look at the <tt class="backtick">install.log</tt> file to see what was installed, and where. <span class="anchor" id="HelpOnInstalling.2BAC8-BasicInstallation.line-103"></span><span class="anchor" id="HelpOnInstalling.2BAC8-BasicInstallation.line-104"></span><span class="anchor" id="HelpOnInstalling.2BAC8-BasicInstallation.line-105"></span><span class="anchor" id="HelpOnInstalling.2BAC8-BasicInstallation.line-106"></span><p class="line867">
<h2 id="HelpOnInstalling.2BAC8-BasicInstallation.Installinginthehomedirectoryoranotherspecificlocation">Installing in the home directory or another specific location</h2>
<span class="anchor" id="HelpOnInstalling.2BAC8-BasicInstallation.line-107"></span><span class="anchor" id="HelpOnInstalling.2BAC8-BasicInstallation.line-108"></span><p class="line874">Linux example, installing in the home directory: <span class="anchor" id="HelpOnInstalling.2BAC8-BasicInstallation.line-109"></span><span class="anchor" id="HelpOnInstalling.2BAC8-BasicInstallation.line-110"></span><span class="anchor" id="HelpOnInstalling.2BAC8-BasicInstallation.line-111"></span><pre>&gt; python setup.py --quiet install --prefix=$HOME --record=install.log</pre><span class="anchor" id="HelpOnInstalling.2BAC8-BasicInstallation.line-112"></span><span class="anchor" id="HelpOnInstalling.2BAC8-BasicInstallation.line-113"></span><p class="line862">Windows example, installing in the <tt class="backtick">C:\moin</tt> directory: <span class="anchor" id="HelpOnInstalling.2BAC8-BasicInstallation.line-114"></span><span class="anchor" id="HelpOnInstalling.2BAC8-BasicInstallation.line-115"></span><span class="anchor" id="HelpOnInstalling.2BAC8-BasicInstallation.line-116"></span><pre>&gt; python setup.py --quiet install --prefix="C:\moin" --record=install.log</pre><span class="anchor" id="HelpOnInstalling.2BAC8-BasicInstallation.line-117"></span><span class="anchor" id="HelpOnInstalling.2BAC8-BasicInstallation.line-118"></span><p class="line862">All Moin<tt class="backtick"></tt>Moin files will then be installed inside those directories, see <tt class="backtick">install.log</tt> to know which files were installed, and where. <span class="anchor" id="HelpOnInstalling.2BAC8-BasicInstallation.line-119"></span><span class="anchor" id="HelpOnInstalling.2BAC8-BasicInstallation.line-120"></span><p class="line867"><strong>Note:</strong> You will likely see the following warning: <span class="anchor" id="HelpOnInstalling.2BAC8-BasicInstallation.line-121"></span><span class="anchor" id="HelpOnInstalling.2BAC8-BasicInstallation.line-122"></span><ul><li style="list-style-type:none"><p class="line891"><tt class="backtick">warning:&nbsp;install:&nbsp;modules&nbsp;installed&nbsp;to&nbsp;'C:\moin\',&nbsp;which</tt><br>
 <span class="anchor" id="HelpOnInstalling.2BAC8-BasicInstallation.line-123"></span><tt class="backtick">is&nbsp;not&nbsp;in&nbsp;Python's&nbsp;module&nbsp;search&nbsp;path&nbsp;(sys.path)&nbsp;--&nbsp;you'll</tt><br>
 <span class="anchor" id="HelpOnInstalling.2BAC8-BasicInstallation.line-124"></span><tt class="backtick">have&nbsp;to&nbsp;change&nbsp;the&nbsp;search&nbsp;path&nbsp;yourself</tt> <span class="anchor" id="HelpOnInstalling.2BAC8-BasicInstallation.line-125"></span><span class="anchor" id="HelpOnInstalling.2BAC8-BasicInstallation.line-126"></span></li></ul><p class="line862">This means exactly what it says, you need to add your install directory to the search path of Python, or it won't find the Moin<tt class="backtick"></tt>Moin code. <span class="anchor" id="HelpOnInstalling.2BAC8-BasicInstallation.line-127"></span><span class="anchor" id="HelpOnInstalling.2BAC8-BasicInstallation.line-128"></span><p class="line862">For example, if you are running using a webserver and standard CGI, edit <tt class="backtick">moin.cgi</tt> and add your installation directory to the Python path, like this: <span class="anchor" id="HelpOnInstalling.2BAC8-BasicInstallation.line-129"></span><span class="anchor" id="HelpOnInstalling.2BAC8-BasicInstallation.line-130"></span><span class="anchor" id="HelpOnInstalling.2BAC8-BasicInstallation.line-131"></span><span class="anchor" id="HelpOnInstalling.2BAC8-BasicInstallation.line-132"></span><pre>import sys
sys.path.insert(0, 'C:/moin')</pre><span class="anchor" id="HelpOnInstalling.2BAC8-BasicInstallation.line-133"></span><span class="anchor" id="HelpOnInstalling.2BAC8-BasicInstallation.line-134"></span><p class="line867">
<h1 id="HelpOnInstalling.2BAC8-BasicInstallation.Testinstallation">Test installation</h1>
<span class="anchor" id="HelpOnInstalling.2BAC8-BasicInstallation.line-135"></span><span class="anchor" id="HelpOnInstalling.2BAC8-BasicInstallation.line-136"></span><p class="line862">As a final step, if you have access to the shell or the command prompt, you can check that everything is correctly installed and ready to run. Start Python and type <tt class="backtick">import&nbsp;MoinMoin</tt>. Nothing should be displayed in response to this command. Example: <span class="anchor" id="HelpOnInstalling.2BAC8-BasicInstallation.line-137"></span><span class="anchor" id="HelpOnInstalling.2BAC8-BasicInstallation.line-138"></span><p class="line867"><span class="anchor" id="HelpOnInstalling.2BAC8-BasicInstallation.line-139"></span><span class="anchor" id="HelpOnInstalling.2BAC8-BasicInstallation.line-140"></span><span class="anchor" id="HelpOnInstalling.2BAC8-BasicInstallation.line-141"></span><span class="anchor" id="HelpOnInstalling.2BAC8-BasicInstallation.line-142"></span><span class="anchor" id="HelpOnInstalling.2BAC8-BasicInstallation.line-143"></span><span class="anchor" id="HelpOnInstalling.2BAC8-BasicInstallation.line-144"></span><pre>&gt; python
Python 2.4.4 (...)
Type "help", "copyright", "credits" or "license" for more information.
&gt;&gt;&gt; import MoinMoin
&gt;&gt;&gt;</pre><span class="anchor" id="HelpOnInstalling.2BAC8-BasicInstallation.line-145"></span><span class="anchor" id="HelpOnInstalling.2BAC8-BasicInstallation.line-146"></span><p class="line874">If you get this instead: <span class="anchor" id="HelpOnInstalling.2BAC8-BasicInstallation.line-147"></span><span class="anchor" id="HelpOnInstalling.2BAC8-BasicInstallation.line-148"></span><p class="line867"><span class="anchor" id="HelpOnInstalling.2BAC8-BasicInstallation.line-149"></span><span class="anchor" id="HelpOnInstalling.2BAC8-BasicInstallation.line-150"></span><span class="anchor" id="HelpOnInstalling.2BAC8-BasicInstallation.line-151"></span><span class="anchor" id="HelpOnInstalling.2BAC8-BasicInstallation.line-152"></span><span class="anchor" id="HelpOnInstalling.2BAC8-BasicInstallation.line-153"></span><span class="anchor" id="HelpOnInstalling.2BAC8-BasicInstallation.line-154"></span><pre>&gt;&gt;&gt; import MoinMoin
Traceback (most recent call last):
  File "&lt;stdin&gt;", line 1, in ?
ImportError: No module named MoinMoin
&gt;&gt;&gt;</pre><span class="anchor" id="HelpOnInstalling.2BAC8-BasicInstallation.line-155"></span><span class="anchor" id="HelpOnInstalling.2BAC8-BasicInstallation.line-156"></span><p class="line862">then you have to tune your installation. Try modifying <tt class="backtick">sys.path</tt>, as described above. <span class="anchor" id="HelpOnInstalling.2BAC8-BasicInstallation.line-157"></span><span class="anchor" id="HelpOnInstalling.2BAC8-BasicInstallation.line-158"></span><p class="line867">
<h1 id="HelpOnInstalling.2BAC8-BasicInstallation.Whathasbeeninstalled">What has been installed</h1>
<span class="anchor" id="HelpOnInstalling.2BAC8-BasicInstallation.line-159"></span><span class="anchor" id="HelpOnInstalling.2BAC8-BasicInstallation.line-160"></span><p class="line862">So, you have a ready-to-work Moin<tt class="backtick"></tt>Moin installation now. Congratulations! Before you go on to configuring it, take a look at the various files and directories that have been installed. <span class="anchor" id="HelpOnInstalling.2BAC8-BasicInstallation.line-161"></span><span class="anchor" id="HelpOnInstalling.2BAC8-BasicInstallation.line-162"></span><p class="line867"><img alt="/!\" height="16" src="http://static.moinmo.in/moin_static180/modernized/img/alert.png" title="/!\" width="16" /> It is important that you understand the different locations used in a Moin<tt class="backtick"></tt>Moin setup, so read this carefully. <span class="anchor" id="HelpOnInstalling.2BAC8-BasicInstallation.line-163"></span><span class="anchor" id="HelpOnInstalling.2BAC8-BasicInstallation.line-164"></span><p class="line862">In the following descriptions, <tt class="backtick">PREFIX</tt> is what you used with the <tt class="backtick">setup.py</tt> command, or a default location if you didn't use the <tt class="backtick">--prefix</tt> option. (Typical default values on Linux are <tt class="backtick">/usr</tt> and <tt class="backtick">/usr/local</tt>.) <tt class="backtick">X.Y</tt> is the version of Python. Typically, this is <tt class="backtick">2.3</tt>, <tt class="backtick">2.4</tt> or <tt class="backtick">2.5</tt>. <span class="anchor" id="HelpOnInstalling.2BAC8-BasicInstallation.line-165"></span><span class="anchor" id="HelpOnInstalling.2BAC8-BasicInstallation.line-166"></span><p class="line862">Look into <tt class="backtick">install.log</tt> to find out about following important locations: <span class="anchor" id="HelpOnInstalling.2BAC8-BasicInstallation.line-167"></span><span class="anchor" id="HelpOnInstalling.2BAC8-BasicInstallation.line-168"></span><ul><li><p class="line891"><strong><tt class="backtick">MoinMoin</tt> directory</strong>, usually <tt class="backtick">PREFIX/lib/pythonX.Y/site-packages/MoinMoin</tt> -- this is where the Moin<tt class="backtick"></tt>Moin <strong>source code</strong> is located <span class="anchor" id="HelpOnInstalling.2BAC8-BasicInstallation.line-169"></span></li><li><p class="line891"><strong><tt class="backtick">share</tt> directory</strong>, usually <tt class="backtick">PREFIX/share/moin</tt> - this is where the <em>templates</em> are located <span class="anchor" id="HelpOnInstalling.2BAC8-BasicInstallation.line-170"></span><ul><li><p class="line891"><strong><tt class="backtick">data</tt></strong> directory (wiki pages, users, etc.) - only Moin<tt class="backtick"></tt>Moin should access this <span class="anchor" id="HelpOnInstalling.2BAC8-BasicInstallation.line-171"></span></li><li><p class="line891"><strong><tt class="backtick">underlay</tt></strong> directory (wiki pages) - only Moin<tt class="backtick"></tt>Moin should access this <span class="anchor" id="HelpOnInstalling.2BAC8-BasicInstallation.line-172"></span></li><li><p class="line891"><strong><tt class="backtick">htdocs</tt></strong> directory with html support files (images for the various themes, etc.) - the web server will need to access this <span class="anchor" id="HelpOnInstalling.2BAC8-BasicInstallation.line-173"></span></li><li><p class="line891"><strong><tt class="backtick">server</tt></strong> - Moin<tt class="backtick"></tt>Moin example startup files (like <tt class="backtick">moin.cgi</tt> for CGI, and other files for other startup methods) <span class="anchor" id="HelpOnInstalling.2BAC8-BasicInstallation.line-174"></span></li><li><p class="line891"><strong><tt class="backtick">config</tt></strong> - Moin<tt class="backtick"></tt>Moin example configuration files (like <tt class="backtick">wikiconfig.py</tt>) <span class="anchor" id="HelpOnInstalling.2BAC8-BasicInstallation.line-175"></span></li></ul></li><li><p class="line891"><strong><tt class="backtick">bin</tt></strong> directory with some scripts that help you use the Moin<tt class="backtick"></tt>Moin shell commands <span class="anchor" id="HelpOnInstalling.2BAC8-BasicInstallation.line-176"></span><span class="anchor" id="HelpOnInstalling.2BAC8-BasicInstallation.line-177"></span></li></ul><p class="line862">We talk of <em>templates</em> in the <tt class="backtick">share</tt> directory because you usually will not use those files at that location, but copy them elsewhere when you need them. This way, you can set-up several wikis without problems, and easily upgrade to new Moin<tt class="backtick"></tt>Moin versions. <span class="anchor" id="HelpOnInstalling.2BAC8-BasicInstallation.line-178"></span><span class="anchor" id="HelpOnInstalling.2BAC8-BasicInstallation.bottom"></span></div> <span class="anchor" id="line-48"></span><hr class="hr2" /><p class="line874"> <span class="anchor" id="line-49"></span><span class="anchor" id="wikiinstance-creation"></span> <span class="anchor" id="line-50"></span><div dir="ltr" id="HelpOnInstalling.2BAC8-WikiInstanceCreation.content" lang="en"><span class="anchor" id="HelpOnInstalling.2BAC8-WikiInstanceCreation.top"></span>
<span class="anchor" id="HelpOnInstalling.2BAC8-WikiInstanceCreation.line-8"></span><span class="anchor" id="HelpOnInstalling.2BAC8-WikiInstanceCreation.line-9"></span><p class="line862">After you have downloaded and installed Moin<tt class="backtick"></tt>Moin, you will want to "have a wiki". As explained at the bottom of <a href="http://master18.moinmo.in/HelpOnInstalling/BasicInstallation">../BasicInstallation</a>, you have to copy several directories and files. This way, you can have as many wikis as you want, and you can easily upgrade Moin<tt class="backtick"></tt>Moin: only the original files will be overwritten, not your copies. <span class="anchor" id="HelpOnInstalling.2BAC8-WikiInstanceCreation.line-10"></span><span class="anchor" id="HelpOnInstalling.2BAC8-WikiInstanceCreation.line-11"></span><p class="line862">Every time you copy those files (and modify the configuration of your server accordingly), you create what is called a <em>wiki instance</em>. Each wiki instance is independent from the others, with a different configuration, different pages, different users, etc. <span class="anchor" id="HelpOnInstalling.2BAC8-WikiInstanceCreation.line-12"></span><span class="anchor" id="HelpOnInstalling.2BAC8-WikiInstanceCreation.line-13"></span><p class="line874">Some of the steps you need to take depend on which web server and which operating system you use. They are described on dedicated pages, which you should read (at least the beginning) before reading this one. Some other steps are common to every webserver and operating system (copying files around, setting permissions), and this is what is described here. <span class="anchor" id="HelpOnInstalling.2BAC8-WikiInstanceCreation.line-14"></span><span class="anchor" id="HelpOnInstalling.2BAC8-WikiInstanceCreation.line-15"></span><p class="line862">Linux users can use <a class="attachment" href="http://master18.moinmo.in/HelpOnInstalling/WikiInstanceCreation?action=AttachFile&amp;do=view&amp;target=createinstance.sh" title="attachment:createinstance.sh">createinstance.sh</a> (a bash script that creates the instance) instead of doing all steps manually: <span class="anchor" id="HelpOnInstalling.2BAC8-WikiInstanceCreation.line-16"></span><ol type="1"><li>If anything is unclear, just read the sections below for more hints. <span class="anchor" id="HelpOnInstalling.2BAC8-WikiInstanceCreation.line-17"></span></li><li>Have a look into the script before running it, if all settings are correct for your setup: <span class="anchor" id="HelpOnInstalling.2BAC8-WikiInstanceCreation.line-18"></span><ul><li>USER and GROUP should be the user and group used by your web-server for running moin. <span class="anchor" id="HelpOnInstalling.2BAC8-WikiInstanceCreation.line-19"></span></li><li><p class="line862">SHARE is where the shared files were copied to, see install.log from the <tt class="backtick">setup.py&nbsp;install</tt> step <span class="anchor" id="HelpOnInstalling.2BAC8-WikiInstanceCreation.line-20"></span></li></ul></li><li>The script takes a single parameter: the location of your wiki instance (see "Choose a location" section below): <span class="anchor" id="HelpOnInstalling.2BAC8-WikiInstanceCreation.line-21"></span><span class="anchor" id="HelpOnInstalling.2BAC8-WikiInstanceCreation.line-22"></span><span class="anchor" id="HelpOnInstalling.2BAC8-WikiInstanceCreation.line-23"></span><pre># ./createinstance.sh /path/to/mywiki</pre><span class="anchor" id="HelpOnInstalling.2BAC8-WikiInstanceCreation.line-24"></span></li><li>Now continue in section "Tune configuration" <span class="anchor" id="HelpOnInstalling.2BAC8-WikiInstanceCreation.line-25"></span><span class="anchor" id="HelpOnInstalling.2BAC8-WikiInstanceCreation.line-26"></span></li></ol><p class="line867">
<h1 id="HelpOnInstalling.2BAC8-WikiInstanceCreation.Readthisfirst">Read this first</h1>
<span class="anchor" id="HelpOnInstalling.2BAC8-WikiInstanceCreation.line-27"></span><span class="anchor" id="HelpOnInstalling.2BAC8-WikiInstanceCreation.line-28"></span><p class="line867">
<h2 id="HelpOnInstalling.2BAC8-WikiInstanceCreation.Securitywarnings">Security warnings</h2>
<span class="anchor" id="HelpOnInstalling.2BAC8-WikiInstanceCreation.line-29"></span><span class="anchor" id="HelpOnInstalling.2BAC8-WikiInstanceCreation.line-30"></span><div><table style="color: red"><tbody><tr>  <td><p class="line862"> <img alt="/!\" height="16" src="http://static.moinmo.in/moin_static180/modernized/img/alert.png" title="/!\" width="16" /> <strong>Warning: make sure that your <tt class="backtick">data</tt> directory and your configuration files are not accessible through your web server. Do not put your wiki directory in <tt class="backtick">public_html</tt>, <tt class="backtick">Sites</tt> or any other directory your web server can access. The web server only needs to access the file in the <tt class="backtick">htdocs</tt> directory and the <tt class="backtick">moin.cgi</tt> script! (Or whatever script your server uses to start Moin<tt class="backtick"></tt>Moin.)</strong> </td>
</tr>
</tbody></table></div><span class="anchor" id="HelpOnInstalling.2BAC8-WikiInstanceCreation.line-31"></span><span class="anchor" id="HelpOnInstalling.2BAC8-WikiInstanceCreation.line-32"></span><div><table style="color: red"><tbody><tr>  <td><p class="line862"> <img alt="/!\" height="16" src="http://static.moinmo.in/moin_static180/modernized/img/alert.png" title="/!\" width="16" /> <strong>Warning: make sure that the <tt class="backtick">data</tt> directory and its subdirectories are not readable and not writeable by users other than the web server user. If you need to give worldwide read-write permissions to get it working, be aware that you are doing a very unsecure setup, that can be compromised by any other user or program on your computer.</strong> </td>
</tr>
</tbody></table></div><span class="anchor" id="HelpOnInstalling.2BAC8-WikiInstanceCreation.line-33"></span><span class="anchor" id="HelpOnInstalling.2BAC8-WikiInstanceCreation.line-34"></span><p class="line867">
<h2 id="HelpOnInstalling.2BAC8-WikiInstanceCreation.NotetoWindowsusers">Note to Windows users</h2>
<span class="anchor" id="HelpOnInstalling.2BAC8-WikiInstanceCreation.line-35"></span><span class="anchor" id="HelpOnInstalling.2BAC8-WikiInstanceCreation.line-36"></span><p class="line874">All the commands below are Linux commands. The text descriptions that introduce them should be enough to help you understand what you need to do. Use the Windows Explorer, or the appropriate text-mode commands. <span class="anchor" id="HelpOnInstalling.2BAC8-WikiInstanceCreation.line-37"></span><span class="anchor" id="HelpOnInstalling.2BAC8-WikiInstanceCreation.line-38"></span><p class="line867">
<h1 id="HelpOnInstalling.2BAC8-WikiInstanceCreation.Chooseawikiname">Choose a wiki name</h1>
<span class="anchor" id="HelpOnInstalling.2BAC8-WikiInstanceCreation.line-39"></span><span class="anchor" id="HelpOnInstalling.2BAC8-WikiInstanceCreation.line-40"></span><p class="line874">Choose a unique name for the new wiki instance you want to create. It should be a short word, something that reflects what you intend to use the wiki for, like the name of your organization, of your team, of the project you are working on, etc. <span class="anchor" id="HelpOnInstalling.2BAC8-WikiInstanceCreation.line-41"></span><span class="anchor" id="HelpOnInstalling.2BAC8-WikiInstanceCreation.line-42"></span><p class="line862">The name "<tt class="backtick">mywiki</tt>" is used as an example in the various commands below. <span class="anchor" id="HelpOnInstalling.2BAC8-WikiInstanceCreation.line-43"></span><span class="anchor" id="HelpOnInstalling.2BAC8-WikiInstanceCreation.line-44"></span><p class="line867">
<h1 id="HelpOnInstalling.2BAC8-WikiInstanceCreation.Choosealocation">Choose a location</h1>
<span class="anchor" id="HelpOnInstalling.2BAC8-WikiInstanceCreation.line-45"></span><span class="anchor" id="HelpOnInstalling.2BAC8-WikiInstanceCreation.line-46"></span><p class="line874">Choose a directory on your disk, it will contain all the files needed for your wiki instance. At the beginning, your wiki instance will use approximately 10 MB of disk space. Then of course, it will grow depending on the way your wiki is used. A personal wiki, even with many pages, might only use 30 MB or 40 MB of disk space. A popular wiki, or a wiki with many files attached to the pages, might use much more, of course. <span class="anchor" id="HelpOnInstalling.2BAC8-WikiInstanceCreation.line-47"></span><span class="anchor" id="HelpOnInstalling.2BAC8-WikiInstanceCreation.line-48"></span><p class="line862">If you are the administrator (or root) of the server, you can use anything you like or that makes sense to you, for example <tt class="backtick">/usr/local/var/moin</tt>, <tt class="backtick">/mnt/wikis</tt>, etc. <span class="anchor" id="HelpOnInstalling.2BAC8-WikiInstanceCreation.line-49"></span><span class="anchor" id="HelpOnInstalling.2BAC8-WikiInstanceCreation.line-50"></span><p class="line862">If you are a simple user, you will probably only be allowed to write in your personal, "home" directory. Choose a subdirectory that makes sense to you, for example the <tt class="backtick">share/moin</tt> subdirectory. <span class="anchor" id="HelpOnInstalling.2BAC8-WikiInstanceCreation.line-51"></span><span class="anchor" id="HelpOnInstalling.2BAC8-WikiInstanceCreation.line-52"></span><p class="line867">
<h1 id="HelpOnInstalling.2BAC8-WikiInstanceCreation.Collectsomeimportantinformation">Collect some important information</h1>
<span class="anchor" id="HelpOnInstalling.2BAC8-WikiInstanceCreation.line-53"></span><span class="anchor" id="HelpOnInstalling.2BAC8-WikiInstanceCreation.line-54"></span><p class="line874">This is where the instructions differ according to the web server and operating system you use, and whether you are the administrator or a simple user. See the appropriate pages for your web server and operating system combination. <span class="anchor" id="HelpOnInstalling.2BAC8-WikiInstanceCreation.line-55"></span><span class="anchor" id="HelpOnInstalling.2BAC8-WikiInstanceCreation.line-56"></span><p class="line862">On Linux, the <tt class="backtick">export</tt> command will be used to remember the collected information. Windows users should write it down carefully (maybe cutting-and-pasting in a Notepad window), or store it in environment variables if they use the command prompt. <span class="anchor" id="HelpOnInstalling.2BAC8-WikiInstanceCreation.line-57"></span><span class="anchor" id="HelpOnInstalling.2BAC8-WikiInstanceCreation.line-58"></span><ul><li><p class="line891"><tt class="backtick">PREFIX</tt> is the prefix you used during the <a href="http://master18.moinmo.in/HelpOnInstalling/BasicInstallation">../BasicInstallation</a> <span class="anchor" id="HelpOnInstalling.2BAC8-WikiInstanceCreation.line-59"></span></li><li><p class="line891"><tt class="backtick">SHARE</tt> is the name of the <tt class="backtick">share</tt> directory, as discussed at the bottom of <a href="http://master18.moinmo.in/HelpOnInstalling/BasicInstallation">../BasicInstallation</a> <span class="anchor" id="HelpOnInstalling.2BAC8-WikiInstanceCreation.line-60"></span></li><li><p class="line891"><tt class="backtick">WIKILOCATION</tt> is the name of the directory that will contain your wiki instance <span class="anchor" id="HelpOnInstalling.2BAC8-WikiInstanceCreation.line-61"></span></li><li><p class="line891"><tt class="backtick">INSTANCE</tt> is the directory containing the wiki instance. It cannot be an existing directory readable through Apache, otherwise it will fail. <span class="anchor" id="HelpOnInstalling.2BAC8-WikiInstanceCreation.line-62"></span><span class="anchor" id="HelpOnInstalling.2BAC8-WikiInstanceCreation.line-63"></span></li></ul><p class="line874">If you are an administrator, you also need to collect the following: <span class="anchor" id="HelpOnInstalling.2BAC8-WikiInstanceCreation.line-64"></span><span class="anchor" id="HelpOnInstalling.2BAC8-WikiInstanceCreation.line-65"></span><ul><li><p class="line891"><tt class="backtick">USER</tt> is the user name of the web server <span class="anchor" id="HelpOnInstalling.2BAC8-WikiInstanceCreation.line-66"></span></li><li><p class="line891"><tt class="backtick">GROUP</tt> is the name of the group to which the web server belongs <span class="anchor" id="HelpOnInstalling.2BAC8-WikiInstanceCreation.line-67"></span><span class="anchor" id="HelpOnInstalling.2BAC8-WikiInstanceCreation.line-68"></span></li></ul><p class="line874">Now, Linux folks, let's store these settings in memory: <span class="anchor" id="HelpOnInstalling.2BAC8-WikiInstanceCreation.line-69"></span><span class="anchor" id="HelpOnInstalling.2BAC8-WikiInstanceCreation.line-70"></span><span class="anchor" id="HelpOnInstalling.2BAC8-WikiInstanceCreation.line-71"></span><span class="anchor" id="HelpOnInstalling.2BAC8-WikiInstanceCreation.line-72"></span><span class="anchor" id="HelpOnInstalling.2BAC8-WikiInstanceCreation.line-73"></span><span class="anchor" id="HelpOnInstalling.2BAC8-WikiInstanceCreation.line-74"></span><pre>&gt; export PREFIX=/usr                # this might be something else
&gt; export SHARE=$PREFIX/share/moin   # this should be correct for most people
&gt; export WIKILOCATION=$SHARE        # this is just an example
&gt; export INSTANCE=mywiki            # this is just an example</pre><span class="anchor" id="HelpOnInstalling.2BAC8-WikiInstanceCreation.line-75"></span><span class="anchor" id="HelpOnInstalling.2BAC8-WikiInstanceCreation.line-76"></span><p class="line874">Administrators also need the following two lines: <span class="anchor" id="HelpOnInstalling.2BAC8-WikiInstanceCreation.line-77"></span><span class="anchor" id="HelpOnInstalling.2BAC8-WikiInstanceCreation.line-78"></span><p class="line867"><span class="anchor" id="HelpOnInstalling.2BAC8-WikiInstanceCreation.line-79"></span><span class="anchor" id="HelpOnInstalling.2BAC8-WikiInstanceCreation.line-80"></span><span class="anchor" id="HelpOnInstalling.2BAC8-WikiInstanceCreation.line-81"></span><pre>&gt; export USER=www-data              # this is just an example
&gt; export GROUP=www-data             # this is just an example</pre><span class="anchor" id="HelpOnInstalling.2BAC8-WikiInstanceCreation.line-82"></span><span class="anchor" id="HelpOnInstalling.2BAC8-WikiInstanceCreation.line-83"></span><p class="line867">
<h1 id="HelpOnInstalling.2BAC8-WikiInstanceCreation.Copythefiles">Copy the files</h1>
<span class="anchor" id="HelpOnInstalling.2BAC8-WikiInstanceCreation.line-84"></span><span class="anchor" id="HelpOnInstalling.2BAC8-WikiInstanceCreation.line-85"></span><p class="line862">To create your new instance, you first need to create a directory named like your instance, inside the <tt class="backtick">WIKILOCATION</tt>. Then you need to copy the <tt class="backtick">data</tt> and <tt class="backtick">underlay</tt> directories from your <tt class="backtick">SHARE</tt> directory into your instance directory. Finally, you need to copy the <tt class="backtick">wikiconfig.py</tt> file from the <tt class="backtick">config</tt> directory into the instance directory. <span class="anchor" id="HelpOnInstalling.2BAC8-WikiInstanceCreation.line-86"></span><span class="anchor" id="HelpOnInstalling.2BAC8-WikiInstanceCreation.line-87"></span><p class="line874">Linux folks need to just type these commands: <span class="anchor" id="HelpOnInstalling.2BAC8-WikiInstanceCreation.line-88"></span><span class="anchor" id="HelpOnInstalling.2BAC8-WikiInstanceCreation.line-89"></span><span class="anchor" id="HelpOnInstalling.2BAC8-WikiInstanceCreation.line-90"></span><span class="anchor" id="HelpOnInstalling.2BAC8-WikiInstanceCreation.line-91"></span><span class="anchor" id="HelpOnInstalling.2BAC8-WikiInstanceCreation.line-92"></span><span class="anchor" id="HelpOnInstalling.2BAC8-WikiInstanceCreation.line-93"></span><span class="anchor" id="HelpOnInstalling.2BAC8-WikiInstanceCreation.line-94"></span><pre>&gt; cd $WIKILOCATION
&gt; mkdir $INSTANCE                   # make a directory for this instance
&gt; cp -R $SHARE/data $INSTANCE       # copy template data directory
&gt; cp -R $SHARE/underlay $INSTANCE   # copy underlay data directory
&gt; cp $SHARE/config/wikiconfig.py $INSTANCE   # copy wiki configuration sample file</pre><span class="anchor" id="HelpOnInstalling.2BAC8-WikiInstanceCreation.line-95"></span><span class="anchor" id="HelpOnInstalling.2BAC8-WikiInstanceCreation.line-96"></span><ul><li style="list-style-type:none"><p class="line891"><img alt="/!\" height="16" src="http://static.moinmo.in/moin_static180/modernized/img/alert.png" title="/!\" width="16" /> Note that you just need to keep one underlay directory on your system if you are running multiple wikis (e.g. in a farm.) <span class="anchor" id="HelpOnInstalling.2BAC8-WikiInstanceCreation.line-97"></span><span class="anchor" id="HelpOnInstalling.2BAC8-WikiInstanceCreation.line-98"></span></li></ul><p class="line867">
<h1 id="HelpOnInstalling.2BAC8-WikiInstanceCreation.Setpermissions">Set permissions</h1>
<span class="anchor" id="HelpOnInstalling.2BAC8-WikiInstanceCreation.line-99"></span><span class="anchor" id="HelpOnInstalling.2BAC8-WikiInstanceCreation.line-100"></span><p class="line867">
<h2 id="HelpOnInstalling.2BAC8-WikiInstanceCreation.Administrators">Administrators</h2>
<span class="anchor" id="HelpOnInstalling.2BAC8-WikiInstanceCreation.line-101"></span><span class="anchor" id="HelpOnInstalling.2BAC8-WikiInstanceCreation.line-102"></span><p class="line874">Administrators need to restrict the permissions of the files, so that only the web server (and the administrator of course) can read and write them. For maximum security, no other user on the machine should be able to read or write anything in the wiki instance directory. Don't forget that this directory contains sensitive information, notably the (encrypted) passwords of the wiki users. <span class="anchor" id="HelpOnInstalling.2BAC8-WikiInstanceCreation.line-103"></span><span class="anchor" id="HelpOnInstalling.2BAC8-WikiInstanceCreation.line-104"></span><p class="line874">On Linux, the following commands should be enough: <span class="anchor" id="HelpOnInstalling.2BAC8-WikiInstanceCreation.line-105"></span><span class="anchor" id="HelpOnInstalling.2BAC8-WikiInstanceCreation.line-106"></span><span class="anchor" id="HelpOnInstalling.2BAC8-WikiInstanceCreation.line-107"></span><span class="anchor" id="HelpOnInstalling.2BAC8-WikiInstanceCreation.line-108"></span><span class="anchor" id="HelpOnInstalling.2BAC8-WikiInstanceCreation.line-109"></span><pre>&gt; chown -R $USER.$GROUP $INSTANCE   # check that USER and GROUP are correct
&gt; chmod -R ug+rwX $INSTANCE         # USER.GROUP may read and write
&gt; chmod -R o-rwx $INSTANCE          # everybody else is rejected</pre><span class="anchor" id="HelpOnInstalling.2BAC8-WikiInstanceCreation.line-110"></span><span class="anchor" id="HelpOnInstalling.2BAC8-WikiInstanceCreation.line-111"></span><p class="line867">
<h2 id="HelpOnInstalling.2BAC8-WikiInstanceCreation.Normalusers">Normal users</h2>
<span class="anchor" id="HelpOnInstalling.2BAC8-WikiInstanceCreation.line-112"></span><span class="anchor" id="HelpOnInstalling.2BAC8-WikiInstanceCreation.line-113"></span><p class="line862">Normal users, on the contrary, need to broaden the permissions of the files, so that the web server can read and write them. On recent Windows versions, and on some versions of Linux and other systems, <em>access control lists</em> can be used to that effect. They are, however, powerful and complicated, much beyond the scope of this document. Ask a knowledgeable person about them. <span class="anchor" id="HelpOnInstalling.2BAC8-WikiInstanceCreation.line-114"></span><span class="anchor" id="HelpOnInstalling.2BAC8-WikiInstanceCreation.line-115"></span><p class="line862">Without them, normal users have to allow <em>everybody</em> to access the instance directory. This is the only way the web server can enter it and do its work. This is, of course, <strong>VERY INSECURE</strong>, since any other user and program on the server can read the directory. You should <strong>not</strong> use such a setup for a wiki open to the public. <span class="anchor" id="HelpOnInstalling.2BAC8-WikiInstanceCreation.line-116"></span><span class="anchor" id="HelpOnInstalling.2BAC8-WikiInstanceCreation.line-117"></span><p class="line874">On Linux, the following commands will open the instance directory to the whole world: <span class="anchor" id="HelpOnInstalling.2BAC8-WikiInstanceCreation.line-118"></span><span class="anchor" id="HelpOnInstalling.2BAC8-WikiInstanceCreation.line-119"></span><span class="anchor" id="HelpOnInstalling.2BAC8-WikiInstanceCreation.line-120"></span><pre>&gt; chmod -R a+rwX $INSTANCE</pre><span class="anchor" id="HelpOnInstalling.2BAC8-WikiInstanceCreation.line-121"></span><span class="anchor" id="HelpOnInstalling.2BAC8-WikiInstanceCreation.line-122"></span><p class="line867"><strong>Note:</strong> <span class="anchor" id="HelpOnInstalling.2BAC8-WikiInstanceCreation.line-123"></span><ul><li><p class="line862">it is also possible to put the web server and the normal user in the same <em>group</em>, and then only open the instance directory to the members of that group. This is a bit more secure (depending on who else is in the group), but you need the cooperation of the server administrator; he is the one setting up groups. <span class="anchor" id="HelpOnInstalling.2BAC8-WikiInstanceCreation.line-124"></span></li><li><p class="line862">the best other possibility is that the server administrator sets up <tt class="backtick">suexec</tt> to execute CGI scripts in user directories under the user id of that user. You don't need to give world permissions that way, so it is a quite secure setup, but you also need cooperation of the administrator. <span class="anchor" id="HelpOnInstalling.2BAC8-WikiInstanceCreation.line-125"></span><span class="anchor" id="HelpOnInstalling.2BAC8-WikiInstanceCreation.line-126"></span><span class="anchor" id="HelpOnInstalling.2BAC8-WikiInstanceCreation.line-127"></span></li></ul><p class="line867">
<h1 id="HelpOnInstalling.2BAC8-WikiInstanceCreation.Tuneconfiguration">Tune configuration</h1>
<span class="anchor" id="HelpOnInstalling.2BAC8-WikiInstanceCreation.line-128"></span><span class="anchor" id="HelpOnInstalling.2BAC8-WikiInstanceCreation.line-129"></span><p class="line874">Now, you need to tune the configuration of your web server and of your wiki instance. Look at the appropriate help page for your web server, then come back here to tune the settings of your wiki instance. <span class="anchor" id="HelpOnInstalling.2BAC8-WikiInstanceCreation.line-130"></span><span class="anchor" id="HelpOnInstalling.2BAC8-WikiInstanceCreation.line-131"></span><p class="line862">Edit <tt class="backtick">wikiconfig.py</tt>. The default settings should work fine in most cases, but there are some things that you will probably want to change, like the name and logo of your wiki! <img alt=":)" height="16" src="http://static.moinmo.in/moin_static180/modernized/img/smile.png" title=":)" width="16" /> Read the comments inside <tt class="backtick">wikiconfig.py</tt>, they will guide you through this process. <span class="anchor" id="HelpOnInstalling.2BAC8-WikiInstanceCreation.line-132"></span><span class="anchor" id="HelpOnInstalling.2BAC8-WikiInstanceCreation.line-133"></span><div><table style="color: red"><tbody><tr>  <td><p class="line862"> <img alt="/!\" height="16" src="http://static.moinmo.in/moin_static180/modernized/img/alert.png" title="/!\" width="16" /> <strong>Warning: don't forget to restart your web server in order to apply changes in <tt class="backtick">wikiconfig.py</tt></strong> </td>
</tr>
</tbody></table></div><span class="anchor" id="HelpOnInstalling.2BAC8-WikiInstanceCreation.line-134"></span><span class="anchor" id="HelpOnInstalling.2BAC8-WikiInstanceCreation.line-135"></span><p class="line867"><a href="http://master18.moinmo.in/HelpOnConfiguration">HelpOnConfiguration</a> contains all the details about all the options, in case the comments in <tt class="backtick">wikiconfig.py</tt> are not enough. <span class="anchor" id="HelpOnInstalling.2BAC8-WikiInstanceCreation.line-136"></span><span class="anchor" id="HelpOnInstalling.2BAC8-WikiInstanceCreation.bottom"></span></div> <span class="anchor" id="line-51"></span><hr class="hr1" /><p class="line874"> <span class="anchor" id="line-52"></span><span class="anchor" id="linuxapache-install"></span> <span class="anchor" id="line-53"></span>
<h1>Linux Installation using Apache</h1>
<div dir="ltr" id="HelpOnInstalling.2BAC8-ApacheOnLinux.content" lang="en"><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.top"></span>
<span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-9"></span><p class="line862">This page describes the particular steps that need to be taken to create a wiki instance using <a href="http://master18.moinmo.in/MoinMoin">MoinMoin</a> on Linux with the Apache web server. <strong>You should have already performed the <a href="http://master18.moinmo.in/HelpOnInstalling/BasicInstallation">../BasicInstallation</a>. </strong>Installations on other Unices like FreeBSD are very similar. <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-10"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-11"></span><p class="line874">On this page two installation scenarios are discussed: <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-12"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-13"></span><ol type="1"><li><p class="line862">You have <strong>Administrator Rights </strong>(you are user 'root' or may use sudo)  for a server and are able to install and modify files almost anywhere on the machine, and notably able to modifiy the Apache configuration. <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-14"></span></li><li><p class="line862">You are a <strong>Simple User,</strong> only able to write files into your home directory, and unable to alter the master Apache configuration file. <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-15"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-16"></span></li></ol><p class="line874">The following options are not mentioned here: <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-17"></span><ul><li><p class="line862">using <strong>suEXEC</strong> <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-18"></span></li><li><p class="line862">using <strong>FastCGI </strong> (see <a href="http://master18.moinmo.in/HelpOnInstalling/FastCgi">../FastCgi</a>) <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-19"></span></li><li><p class="line862">using <strong>mod_python</strong> (see <a href="http://master18.moinmo.in/HelpOnInstalling/ApacheWithModPython">../ApacheWithModPython</a>) <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-20"></span></li><li><p class="line862">setting up a <strong>Root Wiki</strong> (see <a href="http://master18.moinmo.in/HelpOnConfiguration/ApacheVoodoo">HelpOnConfiguration/ApacheVoodoo</a>) <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-21"></span></li><li><p class="line862">For more advanced configurations and some tricks see also <a href="http://master18.moinmo.in/HelpMiscellaneous">HelpMiscellaneous</a>. <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-22"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-23"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-24"></span></li></ul><p class="line867"><strong>Table of contents</strong> <div class="table-of-contents"><p class="table-of-contents-heading">Contents<ol><li>
<a href="#HelpOnInstalling.2BAC8-ApacheOnLinux.AdministratorScenario">Administrator Scenario</a><ol><li>
<a href="#HelpOnInstalling.2BAC8-ApacheOnLinux.Createawikiinstance">Create a wiki instance</a></li><li>
<a href="#HelpOnInstalling.2BAC8-ApacheOnLinux.Installmoin.cgi">Install moin.cgi</a></li><li>
<a href="#HelpOnInstalling.2BAC8-ApacheOnLinux.Configuremoin.cgi">Configure moin.cgi</a></li><li>
<a href="#HelpOnInstalling.2BAC8-ApacheOnLinux.ConfigureApache">Configure Apache</a></li><li>
<a href="#HelpOnInstalling.2BAC8-ApacheOnLinux.ConfigureMoinMoin">Configure MoinMoin</a></li><li>
<a href="#HelpOnInstalling.2BAC8-ApacheOnLinux.Testthewiki">Test the wiki</a></li></ol></li><li>
<a href="#HelpOnInstalling.2BAC8-ApacheOnLinux.SimpleUserScenario">Simple User Scenario</a><ol><li>
<a href="#HelpOnInstalling.2BAC8-ApacheOnLinux.Makesure.2BAC8Afg-usernameworks">Make sure /~username works</a></li><li>
<a href="#HelpOnInstalling.2BAC8-ApacheOnLinux.Createawikiinstance-1">Create a wiki instance</a></li><li>
<a href="#HelpOnInstalling.2BAC8-ApacheOnLinux.Installthehtdocsfiles">Install the htdocs files</a></li><li>
<a href="#HelpOnInstalling.2BAC8-ApacheOnLinux.Installmoin.cgi-1">Install moin.cgi</a></li><li>
<a href="#HelpOnInstalling.2BAC8-ApacheOnLinux.Configuremoin.cgi-1">Configure moin.cgi</a></li><li>
<a href="#HelpOnInstalling.2BAC8-ApacheOnLinux.ConfigureMoinMoin-1">Configure MoinMoin</a></li><li>
<a href="#HelpOnInstalling.2BAC8-ApacheOnLinux.Testthewiki-1">Test the wiki</a></li></ol></li><li>
<a href="#HelpOnInstalling.2BAC8-ApacheOnLinux.Troubleshooting">Troubleshooting</a><ol><li>
<a href="#HelpOnInstalling.2BAC8-ApacheOnLinux.Addingpermissiontoservethehtdocsdirectory">Adding permission to serve the htdocs directory</a></li></ol></li></ol></li></ol></div><p class="line874"> <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-25"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-26"></span><p class="line867">
<h2 id="HelpOnInstalling.2BAC8-ApacheOnLinux.AdministratorScenario">Administrator Scenario</h2>
<span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-27"></span><p class="line862">The exact location of the various Apache configs varies - often used locations are: <tt>/etc/httpd/,&nbsp;/etc/apache/&nbsp;or&nbsp;/etc/apache2/</tt>. You should have at least <em>some</em> know-how of how to set up and deal with Apache, especially when it comes to virtual host setup. If you do not know what we are talking about, please read about <em>Configuration Files</em> and <em>Apache Virtual Host documentation </em>in the <a class="http" href="http://httpd.apache.org/docs/">Apache documentation</a>. <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-28"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-29"></span><p class="line862">On Apache2 it is quite usual to have a directory (like /etc/httpd/conf.d) for virtual hosts. So every file ending with <em>.conf</em> will be included into the main Apache configuration file. To look if this is true for your configuration, search for the word "Include". <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-30"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-31"></span><p class="line867">
<h3 id="HelpOnInstalling.2BAC8-ApacheOnLinux.Createawikiinstance">Create a wiki instance</h3>
<span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-32"></span><p class="line874">Creating a wiki instance involves copying files around and setting appropriate permissions. Before you can proceed, you need to know what user and group your Apache server runs as. The easiest way to know this is to issue this command: <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-33"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-34"></span><p class="line867"><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-35"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-36"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-37"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-38"></span><pre>&gt; egrep "^User|^Group" /etc/httpd/httpd.conf
User wwwrun
Group nogroup</pre><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-39"></span><p class="line862">This shows a typical result: "<tt class="backtick">wwwrun.nogroup</tt>". Other common results are "<tt class="backtick">nobody.nogroup</tt>", "<tt class="backtick">apache.apache</tt>" and "<tt class="backtick">www-data.www-data</tt>". You can of course use your own. What matters is that you know which ones are in use, because you will need them to set file permissions. <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-40"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-41"></span><p class="line862">Once you have gathered this information, read <a href="http://master18.moinmo.in/HelpOnInstalling/WikiInstanceCreation">../WikiInstanceCreation</a> and follow the steps described there. <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-42"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-43"></span><p class="line867">
<h3 id="HelpOnInstalling.2BAC8-ApacheOnLinux.Installmoin.cgi">Install moin.cgi</h3>
<span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-44"></span><p class="line862">There is one last file you need to copy, the bridge between Apache and Moin<tt class="backtick"></tt>Moin: the CGI script that Apache will call every time a wiki page is requested, and that will in turn invoke all the Moin<tt class="backtick"></tt>Moin components to handle the request. You can actually put this script anywhere you like (all the paths to the files Moin<tt class="backtick"></tt>Moin needs can be configured to match your filesystem layout), but for the sake of simplicity and security, we suggest you follow the instructions below, unless you think you know better. <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-45"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-46"></span><p class="line862">We will create a <tt class="backtick">cgi-bin</tt> subdirectory in the instance directory. Using the environment variables defined in <a href="http://master18.moinmo.in/HelpOnInstalling/WikiInstanceCreation">../WikiInstanceCreation</a>, run the following commands: <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-47"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-48"></span><p class="line867"><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-49"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-50"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-51"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-52"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-53"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-54"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-55"></span><pre>&gt; cd $WIKILOCATION/$INSTANCE
&gt; mkdir cgi-bin
&gt; cp $SHARE/server/moin.cgi cgi-bin
&gt; chown -R $USER.$GROUP cgi-bin
&gt; chmod -R ug+rx cgi-bin
&gt; chmod -R o-rwx cgi-bin</pre><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-56"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-57"></span><p class="line867">
<h3 id="HelpOnInstalling.2BAC8-ApacheOnLinux.Configuremoin.cgi">Configure moin.cgi</h3>
<span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-58"></span><p class="line862">When <tt class="backtick">moin.cgi</tt> is launched, it imports a Moin<tt class="backtick"></tt>Moin module that in turn imports other modules and the configuration file. While the Moin<tt class="backtick"></tt>Moin modules should always be found in a properly configured system (as described in <a href="http://master18.moinmo.in/HelpOnInstalling/BasicInstallation">../BasicInstallation</a>), it is likely that the configuration file will not be found. Edit the <tt class="backtick">moin.cgi</tt> script to correct that. Add these lines near the top of the file: <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-59"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-60"></span><p class="line867"><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-61"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-62"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-63"></span><pre>import sys
sys.path.insert(0, '..')</pre><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-64"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-65"></span><p class="line862">An even better way is to use the absolute path name of the directory that contains the <tt class="backtick">wikiconfig.py</tt> file instead of <tt class="backtick">'..'</tt>. <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-66"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-67"></span><p class="line867">
<h3 id="HelpOnInstalling.2BAC8-ApacheOnLinux.ConfigureApache">Configure Apache</h3>
<span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-68"></span><p class="line874">Now that every file is in place and properly locked down (as far as the filesystem is concerned), we need to configure Apache so that it offers access to the right files, and no others. However, since the default Apache configuration varies a lot depending on the distribution you use, and since administrators often make important additions and changes to it, we cannot give exact instructions that cover all cases. Instead, we will first describe roughly what needs to be done, and then give a few specific lines that you should add at the appropriate place in your Apache config. <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-69"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-70"></span><p class="line874">Your Apache should be set up so that: <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-71"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-72"></span><ul><li>Access to your instance directory is denied (sane Apache installations should actually deny access to the whole server, and then only allow a few specific directories). <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-73"></span></li><li><p class="line862">An <strong>Alias</strong> is set up to redirect requests from <tt class="backtick">/moin_static160/</tt> (in the URL - see also <tt class="backtick">url_prefix_static</tt> configuration variable) to the <tt class="backtick">htdocs</tt> directory (in the <tt class="backtick">share</tt> directory, as discussed at the bottom of <a href="http://master18.moinmo.in/HelpOnInstalling/BasicInstallation">../BasicInstallation</a>). Please note that <tt class="backtick">url_prefix_static</tt> will change with every moin release! <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-74"></span></li><li><p class="line862">A <strong>ScriptAlias</strong> is set up to redirect requests from whatever you want (we suggest you use your instance name, for example <tt class="backtick">/mywiki</tt>) to the CGI script you just copied. <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-75"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-76"></span></li></ul><p class="line874">The following commands will add two lines at the bottom of your Apache config file. These lines only cover the last two items listed above. You have to check the first one by yourself (there is too much variation in Linux distributions). Note that you may have to move the two lines to the appropriate place in your config file -- maybe near other similar lines. <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-77"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-78"></span><p class="line867"><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-79"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-80"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-81"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-82"></span><pre>&gt; echo "" &gt;&gt;/etc/httpd/httpd.conf
&gt; echo "Alias /moin_static170/ \"$SHARE/htdocs/\"" &gt;&gt;/etc/httpd/httpd.conf
&gt; echo "ScriptAlias /mywiki \"$WIKILOCATION/$INSTANCE/cgi-bin/moin.cgi\"" &gt;&gt;/etc/httpd/httpd.conf</pre><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-83"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-84"></span><p class="line874">So this would add two lines like the both below to a config file (possibly you use one for each virtual server): <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-85"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-86"></span><p class="line867"><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-87"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-88"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-89"></span><pre>Alias /moin_static170/ /usr/local/share/htdocs/
ScriptAlias /mywiki /usr/local/share/moin/mywiki/cgi-bin/moin.cgi</pre><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-90"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-91"></span><p class="line862">You only need to define the Alias for <tt class="backtick">htdocs</tt> once, no matter how many wikis you run with the 1.6.0 version of moin. You need to define a different script alias for each wiki instance you intend to run. So you could also define the Alias in a central Apache configuration file and only define the <a class="nonexistent" href="http://master18.moinmo.in/ScriptAlias">ScriptAlias</a> in virtual host configurations. <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-92"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-93"></span><p class="line867">
<h3 id="HelpOnInstalling.2BAC8-ApacheOnLinux.ConfigureMoinMoin">Configure MoinMoin</h3>
<span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-94"></span><p class="line862">Finally, check that the <tt class="backtick">wikiconfig.py</tt> file in the instance directory contains correct paths for: <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-95"></span><ul><li><p class="line891"><tt class="backtick">url_prefix_static</tt> (static stuff like css/img/js) <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-96"></span></li><li><p class="line891"><tt class="backtick">data_dir</tt> (the instance data directory) and <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-97"></span></li><li><p class="line891"><tt class="backtick">data_underlay_dir</tt> (the instance underlay directory). <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-98"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-99"></span></li></ul><p class="line862">You can use relative paths for the directories, but note that they are relative to the CGI script, not the configuration file! Better <strong>use absolute paths</strong>, and save yourself some headaches. <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-100"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-101"></span><p class="line874">Here are the settings you should have in the config file if you followed all our suggestions: <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-102"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-103"></span><p class="line867"><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-104"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-105"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-106"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-107"></span><pre>    data_dir = '../data/'  # better use absolute path
    data_underlay_dir = '../underlay/'  # better use absolute path
    url_prefix_static = '/moin_static160' # depends on moin version</pre><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-108"></span><p class="line862">There are other settings you will likely want to alter, look at the bottom of <a href="http://master18.moinmo.in/HelpOnInstalling/WikiInstanceCreation">../WikiInstanceCreation</a> for more details about them. <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-109"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-110"></span><p class="line867">
<h3 id="HelpOnInstalling.2BAC8-ApacheOnLinux.Testthewiki">Test the wiki</h3>
<span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-111"></span><p class="line862">Everything should work fine now. It is time to <strong>restart the Apache server</strong> (usually with "<tt class="backtick">/etc/init.d/apache&nbsp;restart</tt>", sometimes with "<tt class="backtick">apachectl&nbsp;restart</tt>") and perform the following steps: <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-112"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-113"></span><ul><li><p class="line862">Access your new wiki with the URL "<tt class="backtick">http://127.0.0.1/mywiki/</tt>" (or the name and port you have defined in the Apache configuration file). You should see some wiki page - read it. <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-114"></span></li><li><p class="line862">Then go to the <a href="http://master18.moinmo.in/WikiSandBox">WikiSandBox</a> page. <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-115"></span></li><li>Try to edit it and save your changes. <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-116"></span></li><li><p class="line862">If that works, see if your edit is reflected on the Recent<tt class="backtick"></tt>Changes page. <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-117"></span></li><li><p class="line862">If you see them, congratulations, your new wiki works! <img alt=":)" height="16" src="http://static.moinmo.in/moin_static180/modernized/img/smile.png" title=":)" width="16" /> <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-118"></span></li></ul><p class="line874">If something goes wrong, have a look at Troubleshooting, at the bottom of this page. <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-119"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-120"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-121"></span><p class="line867">
<h2 id="HelpOnInstalling.2BAC8-ApacheOnLinux.SimpleUserScenario">Simple User Scenario</h2>
<span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-122"></span><p class="line862">On machines shared by many people, simple users typically have no access to the root account, cannot modify the <tt class="backtick">httpd.conf</tt> file, and cannot copy files into the system-wide <tt class="backtick">cgi-bin</tt> and <tt class="backtick">htdocs</tt> directories. In that case, Apache can be set up so that each user can host a web site in the home directory of his or her shell account, using the <tt class="backtick">UserDir</tt> directive. If the machine administrator decides to use it, all URLs that start with "<tt class="backtick">/~username</tt>" will be redirected to a directory in the users' home directories, where they have write permission and can install Moin<tt class="backtick"></tt>Moin. <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-123"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-124"></span><p class="line862">As an example, we will consider the case of a user named "<tt class="backtick">mm</tt>". Of course, wherever you see "<tt class="backtick">mm</tt>" below, you will replace it with your own username. <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-125"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-126"></span><p class="line867">
<h3 id="HelpOnInstalling.2BAC8-ApacheOnLinux.Makesure.2BAC8Afg-usernameworks">Make sure /~username works</h3>
<span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-127"></span><p class="line862">The home directory installation can only work if the administrator (root) has allowed it. So, the first step is of course to check that it works. Typically, Apache is set up so that the <tt class="backtick">public_html</tt> subdirectory in the home directory is used as the web site root. So, the first first step is to check if that directory exists. <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-128"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-129"></span><p class="line867"><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-130"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-131"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-132"></span><pre>&gt; ls -ld ~/public_html
drwxr-xr-x   2 mm       users        4096 Nov 30 00:29 public_html</pre><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-133"></span><p class="line874">If the directory does not exist, create it, and be sure it can be read and entered by the web server. <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-134"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-135"></span><p class="line867"><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-136"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-137"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-138"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-139"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-140"></span><pre>&gt; mkdir public_html
&gt; chmod a+rx public_html
&gt; ls -ld ~/public_html
drwxr-xr-x   2 mm       users        4096 Nov 30 00:35 public_html</pre><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-141"></span><p class="line862">Now, check if the "<tt class="backtick">/~mm</tt>" URL works: <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-142"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-143"></span><p class="line867"><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-144"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-145"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-146"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-147"></span><pre>&gt; lynx -error_file=/dev/stderr -dump http://localhost/~mm/ &gt;/dev/null
URL=http://localhost/~mm/ (GET)
STATUS=HTTP/1.1 200 OK</pre><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-148"></span><p class="line862">If you get a "<tt class="backtick">200&nbsp;OK</tt>" response code, then it works, and you can go on to the next check. If you get a "<tt class="backtick">403&nbsp;Forbidden</tt>" or a "<tt class="backtick">404&nbsp;Not&nbsp;Found</tt>" response, then maybe something is wrong with your directory, or maybe the whole thing has not been enabled by your administrator. <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-149"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-150"></span><ul><li><p class="line862">Check the permissions for your home directory (<tt class="backtick">~</tt>) and your <tt class="backtick">public_html</tt> directory. The first one should at least end with "<tt class="backtick">--x</tt>", and the second one, as we saw above, with "<tt class="backtick">r-x</tt>". <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-151"></span></li><li><p class="line862">It also possible that the administrator has set up another name for the personal web site directory. "<tt class="backtick">public_html</tt>" is just the usual default, but anything can actually be used. There is no way to know, you have to ask the administrator (root). <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-152"></span></li><li>Finally, if the personal web site feature is disabled, maybe you can ask the administrator to enable it? <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-153"></span></li></ul><p class="line874">Once you have checked you can read the files in the directory, you need to check that you are also able to execute CGI scripts in that directory. Use the following commands to create a simple CGI script in the appropriate location: <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-154"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-155"></span><p class="line867"><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-156"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-157"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-158"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-159"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-160"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-161"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-162"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-163"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-164"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-165"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-166"></span><pre>&gt; mkdir -p ~/public_html/cgi-bin
&gt; cat &gt; ~/public_html/cgi-bin/test.cgi
#!/bin/sh
echo Content-Type: text/plain
echo
echo "CGI scripts work"
&lt;CTRL-D&gt;
&gt; chmod a+rx ~/public_html/cgi-bin/test.cgi
&gt; lynx -dump http://localhost/~jh/cgi-bin/test.cgi
CGI scripts work</pre><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-167"></span><p class="line862">If you get anything else than "<tt class="backtick">CGI&nbsp;scripts&nbsp;work</tt>", then something went wrong. Check the directory permissions as above, try other names (or ask about them). The sad truth might be that you are not allowed to execute CGI scripts. You would then have to ask the administrator (root) for that permission. <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-168"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-169"></span><p class="line862">Once you get it, you can set up your wiki instance in the <tt class="backtick">public_html</tt> directory. <img alt=":)" height="16" src="http://static.moinmo.in/moin_static180/modernized/img/smile.png" title=":)" width="16" /> <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-170"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-171"></span><p class="line867">
<h3 id="HelpOnInstalling.2BAC8-ApacheOnLinux.Createawikiinstance-1">Create a wiki instance</h3>
<span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-172"></span><p class="line862">Creating a wiki instance involves copying files around and setting appropriate permissions. Read <a href="http://master18.moinmo.in/HelpOnInstalling/WikiInstanceCreation">../WikiInstanceCreation</a> and follow the steps described there. <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-173"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-174"></span><p class="line867">
<h3 id="HelpOnInstalling.2BAC8-ApacheOnLinux.Installthehtdocsfiles">Install the htdocs files</h3>
<span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-175"></span><p class="line862">The web server needs to access these files, so we need to copy them into the "<tt class="backtick">public_html</tt>" directory. Just use this: <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-176"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-177"></span><p class="line867"><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-178"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-179"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-180"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-181"></span><pre>&gt; cd ~/public_html
&gt; cp -R ~/share/moin/htdocs moin_static170
&gt; chmod -R a+rX moin_static170</pre><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-182"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-183"></span><p class="line867">
<h3 id="HelpOnInstalling.2BAC8-ApacheOnLinux.Installmoin.cgi-1">Install moin.cgi</h3>
<span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-184"></span><p class="line862">There is one last file you need to copy, the bridge between Apache and Moin<tt class="backtick"></tt>Moin: the CGI script that Apache will call every time a wiki page is requested, and that will in turn invoke all the Moin<tt class="backtick"></tt>Moin components to handle the request. You need to put this file in a directory for which CGI scripts execution is enabled. By default, this should work: <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-185"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-186"></span><p class="line867"><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-187"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-188"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-189"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-190"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-191"></span><pre>&gt; cd ~/public_html
&gt; mkdir cgi-bin
&gt; cp $SHARE/server/moin.cgi cgi-bin
&gt; chmod -R a+rx cgi-bin</pre><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-192"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-193"></span><p class="line867">
<h3 id="HelpOnInstalling.2BAC8-ApacheOnLinux.Configuremoin.cgi-1">Configure moin.cgi</h3>
<span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-194"></span><p class="line862">When <tt class="backtick">moin.cgi</tt> is launched, it imports a Moin<tt class="backtick"></tt>Moin module (that in turn imports other modules and the configuration file). Since everything has been installed in your home directory, it is likely none of these will be found. Edit the <tt class="backtick">moin.cgi</tt> script to correct that. Add these lines near the top of the file: <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-195"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-196"></span><p class="line867"><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-197"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-198"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-199"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-200"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-201"></span><pre>import sys
sys.path.insert(0, '/home/mm/lib/python2.4')
sys.path.insert(0, '/home/mm/lib/python2.4/site-packages')
sys.path.insert(0, '/home/mm/share/moin/mywiki')</pre><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-202"></span><p class="line862">Of course, you need to adapt the paths to your situation. The first two lines should help locate the Moin<tt class="backtick"></tt>Moin modules, the last one should help locate the <tt class="backtick">wikiconfig.py</tt> file. <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-203"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-204"></span><p class="line867"><strong>Note:</strong> You might also need to edit the first line of the file, to point to the correct version of Python. The default should be fine, but a line like "<tt class="backtick">#!&nbsp;/usr/bin/python2.4</tt>" might help you if the default does not work. <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-205"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-206"></span><p class="line867"><strong>Note 2:</strong> In this file there is a line reading <tt>request&nbsp;=&nbsp;RequestCGI()</tt>. If you have a complex mod_rewrite case, you might want to add <tt>properties&nbsp;=&nbsp;{'script_name':&nbsp;'/mywiki'}&nbsp;</tt> in the parentheses. This will let <a href="http://master18.moinmo.in/MoinMoin">MoinMoin</a> generate URLs that start with <tt>/mywiki</tt> and not the path that the webserver passed to <a href="http://master18.moinmo.in/MoinMoin">MoinMoin</a>: <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-207"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-208"></span><p class="line867"><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-209"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-210"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-211"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-212"></span><pre>def handle_request(req, env, form):
    request = RequestCGI(req, env, form, properties = {'script_name': '/mywiki'})
    request.run()</pre><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-213"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-214"></span><p class="line867">
<h3 id="HelpOnInstalling.2BAC8-ApacheOnLinux.ConfigureMoinMoin-1">Configure MoinMoin</h3>
<span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-215"></span><p class="line862">Finally, check that the <tt class="backtick">wikiconfig.py</tt> file in the instance directory contains correct paths for <tt class="backtick">url_prefix_static</tt> (the htdocs directory), <tt class="backtick">data_dir</tt> (the instance data directory) and <tt class="backtick">data_underlay_dir</tt> (the instance underlay directory). You can use relative paths for the directories, but note that they are relative to the CGI script, not the configuration file! It is better to use <strong>absolute paths</strong>, and save yourself some headaches. <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-216"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-217"></span><p class="line867"><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-218"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-219"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-220"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-221"></span><pre>    data_dir = '/home/mm/share/moin/mywiki/data/'
    data_underlay_dir = '/home/mm/share/moin/mywiki/underlay/'
    url_prefix = '/~mm/moin_static170'</pre><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-222"></span><p class="line867">
<h3 id="HelpOnInstalling.2BAC8-ApacheOnLinux.Testthewiki-1">Test the wiki</h3>
<span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-223"></span><p class="line874">Everything should work fine, now. It is time to perform the following steps: <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-224"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-225"></span><ul><li><p class="line862">If it worked, try to access your new-born wiki with the URL "<tt class="backtick">http://127.0.0.1/~mm/cgi-bin/moin.cgi</tt>". You should see some wiki page - read it. <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-226"></span></li><li><p class="line862">Now go to the <a href="http://master18.moinmo.in/WikiSandBox">WikiSandBox</a> page. <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-227"></span></li><li>Try to edit it and save your changes. <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-228"></span></li><li><p class="line862">If that works, see if your edit is reflected on the Recent<tt class="backtick"></tt>Changes page. <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-229"></span></li><li><p class="line862">If you see them, congratulations, you have a new wiki! <img alt=":)" height="16" src="http://static.moinmo.in/moin_static180/modernized/img/smile.png" title=":)" width="16" /> <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-230"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-231"></span></li></ul><p class="line874">If something goes wrong, have a look at Troubleshooting, below. <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-232"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-233"></span><p class="line867">
<h2 id="HelpOnInstalling.2BAC8-ApacheOnLinux.Troubleshooting">Troubleshooting</h2>
<span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-234"></span><p class="line862">See also <a href="http://master18.moinmo.in/HelpOnInstalling/TroubleShooting">../TroubleShooting</a> for generic stuff. <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-235"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-236"></span><p class="line862">The first thing to do when your wiki does not work as expected is to issue the command "<tt class="backtick">tail&nbsp;/var/log/httpd/error_log</tt>" to display the most recent errors. Usually, you will get a hint on what went wrong, like missing file system permissions. <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-237"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-238"></span><p class="line867">
<h3 id="HelpOnInstalling.2BAC8-ApacheOnLinux.Addingpermissiontoservethehtdocsdirectory">Adding permission to serve the htdocs directory</h3>
<span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-239"></span><p class="line862">In some (sane) Linux distributions (like SuSE 9.0) serving directories other than the document-root "<tt class="backtick">/srv/www/htdocs</tt>" with Apache is switched off by default for security reasons in "<tt class="backtick">/etc/httpd/httpd.conf</tt>" (or for Apache2 "<tt class="backtick">/etc/apache2/httpd.conf</tt>"): <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-240"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-241"></span><p class="line867"><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-242"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-243"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-244"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-245"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-246"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-247"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-248"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-249"></span><pre># forbid access to the entire filesystem by default
&lt;Directory /&gt;
  Options None
  AllowOverride None
  Order deny,allow
  Deny from all
&lt;/Directory&gt;</pre><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-250"></span><p class="line862">To allow Apache to serve directories outside of the document root you have to add these lines to "<tt class="backtick">/etc/httpd/httpd.conf</tt>" (in SuSE it is recommended to create a new "<tt class="backtick">http.conf.local</tt>" and include this file in "<tt class="backtick">/etc/sysconfig/apache2</tt>"): <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-251"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-252"></span><p class="line867"><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-253"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-254"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-255"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-256"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-257"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-258"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-259"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-260"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-261"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-262"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-263"></span><pre>Alias /wiki/ "/usr/share/moin/htdocs/"
&lt;Directory "/usr/share/moin/htdocs/"&gt;
   Order deny,allow
   Allow from all
&lt;/Directory&gt;
ScriptAlias /mywiki "/usr/share/moin/mywiki/cgi-bin/moin.cgi"
&lt;Directory "/usr/share/moin/mywiki/cgi-bin"&gt;
   Order deny,allow
   Allow from all
&lt;/Directory&gt;</pre><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-264"></span><p class="line874">Of course, you need to adapt the paths to your particular situation. <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.line-265"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnLinux.bottom"></span></div> <span class="anchor" id="line-54"></span><hr class="hr2" /><p class="line874"> <span class="anchor" id="line-55"></span><span class="anchor" id="fastcgi-install"></span> <span class="anchor" id="line-56"></span>
<h1>FastCGI Setup using Apache or Lighttpd</h1>
<div dir="ltr" id="HelpOnInstalling.2BAC8-FastCgi.content" lang="en"><span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.top"></span>
<span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-9"></span><span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-10"></span><p class="line874">FastCGI is a method which enables a web server to communicate with long-running scripts. This has the advantage that the script is only <span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-11"></span>started and initialized one time, and that data could be cached in memory from request to request, enhancing the performance of the CGI application. <span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-12"></span><span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-13"></span><ul><li style="list-style-type:none"><p class="line891"><img alt="/!\" height="16" src="http://static.moinmo.in/moin_static180/modernized/img/alert.png" title="/!\" width="16" /> Follow the basic installation for your operating system as described in other parts of the <a href="http://master18.moinmo.in/MoinMoin">MoinMoin</a> installation documentation. This is <a href="http://master18.moinmo.in/HelpOnInstalling/BasicInstallation">HelpOnInstalling/BasicInstallation</a> and <a href="http://master18.moinmo.in/HelpOnInstalling/WikiInstanceCreation">HelpOnInstalling/WikiInstanceCreation</a>, or <a href="http://master18.moinmo.in/HelpOnInstalling/ApacheOnLinux">HelpOnInstalling/ApacheOnLinux</a> in most cases.  <span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-14"></span><span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-15"></span></li></ul><p class="line867"><div class="table-of-contents"><p class="table-of-contents-heading">Contents<ol><li>
<a href="#HelpOnInstalling.2BAC8-FastCgi.UsingMoinMoinwithFastCgi">Using MoinMoin with FastCgi</a></li><li>
<a href="#HelpOnInstalling.2BAC8-FastCgi.DeployingonApache">Deploying on Apache</a><ol><li>
<a href="#HelpOnInstalling.2BAC8-FastCgi.Scriptoptions">Script options</a></li><li>
<a href="#HelpOnInstalling.2BAC8-FastCgi.FastCgiExternalServer">FastCgiExternalServer</a></li><li>
<a href="#HelpOnInstalling.2BAC8-FastCgi.FastCgiServer">FastCgiServer</a></li><li>
<a href="#HelpOnInstalling.2BAC8-FastCgi.ExampleforApache2onDebian">Example for Apache2 on Debian</a></li><li>
<a href="#HelpOnInstalling.2BAC8-FastCgi.Runningasanexternalapplicationand.2BAC8-oronWindows">Running as an external application and/or on Windows</a></li><li>
<a href="#HelpOnInstalling.2BAC8-FastCgi.FallbacktoCGIifFastCGIisnotavailable">Fallback to CGI if FastCGI is not available</a></li></ol></li><li>
<a href="#HelpOnInstalling.2BAC8-FastCgi.Deployingonlighttpd">Deploying on lighttpd</a><ol><li>
<a href="#HelpOnInstalling.2BAC8-FastCgi.UsingHTTPAuthentication">Using HTTP Authentication</a></li><li>
<a href="#HelpOnInstalling.2BAC8-FastCgi.MoinMoinStartupscript">MoinMoin Startup script</a></li><li>
<a href="#HelpOnInstalling.2BAC8-FastCgi.MacOSX.3AAddingMoinMoinstartupscript">Mac OS X: Adding MoinMoin startup script</a></li></ol></li></ol></li></ol></div><p class="line874"> <span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-16"></span><span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-17"></span><span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-18"></span><p class="line867">
<h2 id="HelpOnInstalling.2BAC8-FastCgi.UsingMoinMoinwithFastCgi">Using MoinMoin with FastCgi</h2>
<span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-19"></span><span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-20"></span><p class="line874">For more general information: <span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-21"></span><span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-22"></span><ul><li><p class="line891"><a class="http" href="http://fastcgi.com">http://fastcgi.com</a> - FastCGI Homepage <span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-23"></span></li><li><p class="line891"><a class="http" href="http://cryp.to/publications/fastcgi/">FastCGI — The Forgotten Treasure</a> (introduction) <span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-24"></span><span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-25"></span></li></ul><p class="line867">
<h2 id="HelpOnInstalling.2BAC8-FastCgi.DeployingonApache">Deploying on Apache</h2>
<span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-26"></span><span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-27"></span><p class="line862">To deploy <a href="http://master18.moinmo.in/MoinMoin">MoinMoin</a> using FastCGI you need an apache with mod_fastcgi. Please refer to the documentation of mod_fastcgi ( <a class="http" href="http://www.fastcgi.com/mod_fastcgi/docs/mod_fastcgi.html">mod_fastcgi homepage</a> ). <span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-28"></span><span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-29"></span><p class="line862">Don't forget to install the fastcgi Apache module (e.g. libapache2-mod-fastcgi). Then in places where the documentation refers to <tt class="backtick">moin.cgi</tt> you use <tt class="backtick">moin.fcg</tt> instead. Be sure that <strong>.fcg</strong> is handled by the FastCGI module (<tt class="backtick">AddHandler&nbsp;fastcgi-script&nbsp;.fcg</tt> in your apache config). <span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-30"></span><span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-31"></span><p class="line862">Normally Apache will start CGI scripts with its own user and group, or with the user and group of the VirtualHost if you are using the suexec wrapper. To enable this with FastCGI you need to use <tt class="backtick">FastCgiWrapper&nbsp;On</tt> in your Apache config (check your distributions and/or FastCGI Documentation). <span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-32"></span><span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-33"></span><p class="line874">Be sure to restart your Apache after you changed py files (i.e. the config) for a running FastCGI server, or you won't see any changes! <span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-34"></span><span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-35"></span><p class="line867">
<h3 id="HelpOnInstalling.2BAC8-FastCgi.Scriptoptions">Script options</h3>
<span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-36"></span><p class="line874">No matter how and where you install or how you configure, you can add some options (in Apache config or as self-running process). Here is a list of some options. <span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-37"></span><span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-38"></span><span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-39"></span><p class="line867">
<h3 id="HelpOnInstalling.2BAC8-FastCgi.FastCgiExternalServer">FastCgiExternalServer</h3>
<span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-40"></span><span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-41"></span><p class="line867"><span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-42"></span><span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-43"></span><span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-44"></span><pre>-host [hostname:port]     - The port and on what host name to respond.
-idle-timeout [seconds]   - The number of seconds of inactivity allowed before request is aborted.</pre><p class="line874"> <span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-45"></span><span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-46"></span><p class="line867">
<h3 id="HelpOnInstalling.2BAC8-FastCgi.FastCgiServer">FastCgiServer</h3>
<span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-47"></span><span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-48"></span><p class="line867"><span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-49"></span><span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-50"></span><span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-51"></span><pre>-port [port]              - The port the application will use for communication with the web server.
-idle-timeout [seconds]   - The number of seconds of inactivity allowed before request is aborted.</pre><span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-52"></span><span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-53"></span><span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-54"></span><p class="line867">
<h3 id="HelpOnInstalling.2BAC8-FastCgi.ExampleforApache2onDebian">Example for Apache2 on Debian</h3>
<span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-55"></span><p class="line874">Edit the /etc/apache2/conf.d/your_wiki: <span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-56"></span><span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-57"></span><span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-58"></span><span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-59"></span><span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-60"></span><span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-61"></span><span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-62"></span><pre>&lt;IfModule mod_fastcgi.c&gt;
   AddHandler fastcgi-script .fcgi .fcg
   FastCgiServer /your/path/to/moin.fcg -idle-timeout 60 -processes 1
   ScriptAlias /your_wiki "/your/path/to/moin.fcg"
&lt;/IfModule&gt;</pre><span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-63"></span><ul><li>number of processes depends on your hardware.. <span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-64"></span></li></ul><p class="line874">Expand the Apache installation: <span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-65"></span><span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-66"></span><span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-67"></span><span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-68"></span><span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-69"></span><pre>apt-get install libapache2-mod-fastcgi
a2enmod fastcgi
apache2ctl graceful</pre><span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-70"></span><p class="line874">Now, your wiki should respond a little faster. <span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-71"></span><span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-72"></span><p class="line867">
<h3 id="HelpOnInstalling.2BAC8-FastCgi.Runningasanexternalapplicationand.2BAC8-oronWindows">Running as an external application and/or on Windows</h3>
<span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-73"></span><span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-74"></span><p class="line867"><em>(see also <a href="http://master18.moinmo.in/HelpOnInstalling/ApacheOnWin32withFastCgi">../ApacheOnWin32withFastCgi</a> for a Windows-specific how-to)</em> <span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-75"></span><span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-76"></span><span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-77"></span><p class="line867">MoinMoin can be run as an external application that answers FastCGI request via a local TCP/IP socket. This works on Windows as well. All you need to do (after having installed <tt class="backtick">mod_fastcgi</tt> and a working MoinMoin instance) is this: <span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-78"></span><span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-79"></span><ol type="1"><li>Select a port number for the internal communication. It should be larger than 1023. For this example, we chose 8888 (just for fun). <span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-80"></span><span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-81"></span></li><li class="gap"><p class="line862">Add the following lines to your httpd.conf:<span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-82"></span><span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-83"></span><span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-84"></span><pre>Alias /moin.fcg "/your/path/to/moin.fcg"
FastCgiExternalServer "/your/path/to/moin.fcg" -host localhost:8888</pre><span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-85"></span><span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-86"></span></li><li class="gap"><p class="line862">Edit <tt class="backtick">moin.fcg</tt>. Replace<span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-87"></span><span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-88"></span><pre>fcg = thfcgi.FCGI(handle_request, max_requests=max_requests, backlog=backlog, max_threads=max_threads)</pre><p class="line862"> with <span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-89"></span><span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-90"></span><pre>fcg = thfcgi.FCGI(handle_request, 0, 8888, max_requests=max_requests, backlog=backlog, max_threads=max_threads)</pre><span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-91"></span><span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-92"></span></li><li class="gap"><p class="line862">Start the file <tt class="backtick">moin.fcg</tt> manually like a Python script:<span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-93"></span><span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-94"></span><pre>python moin.fcg</pre><span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-95"></span><span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-96"></span></li><li class="gap">Start Apache. <span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-97"></span><span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-98"></span></li></ol><p class="line867">
<h3 id="HelpOnInstalling.2BAC8-FastCgi.FallbacktoCGIifFastCGIisnotavailable">Fallback to CGI if FastCGI is not available</h3>
<span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-99"></span><span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-100"></span><p class="line862">Install and test <a href="http://master18.moinmo.in/MoinMoin">MoinMoin</a> according to <a href="http://master18.moinmo.in/HelpOnInstalling/ApacheOnLinux">HelpOnInstalling/ApacheOnLinux</a>. Then make and test the changes to run mod_fastcgi. If you are satisfied, you can add the following block to your apache config: <span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-101"></span><span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-102"></span><span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-103"></span><span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-104"></span><span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-105"></span><span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-106"></span><span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-107"></span><span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-108"></span><span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-109"></span><pre>&lt;IfModule !mod_fastcgi.c&gt;
    ScriptAlias /mywiki "/your/path/to/moin.cgi"
&lt;/IfModule&gt;
&lt;IfModule mod_fastcgi.c&gt;
    AddHandler fastcgi-script .fcg
    ScriptAlias /mywiki "/your/path/to/moin.fcg"
&lt;/IfModule&gt;</pre><span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-110"></span><p class="line874">Now Apache will use mod_fastcgi if available and otherwise use the slow cgi script. <span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-111"></span><span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-112"></span><p class="line867">
<h2 id="HelpOnInstalling.2BAC8-FastCgi.Deployingonlighttpd">Deploying on lighttpd</h2>
<span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-113"></span><p class="line874">This is about running a wiki under "/" URL with lighttpd. <span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-114"></span><span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-115"></span><p class="line874">The moin.fcg processes will get spawned by lighttpd automatically (thus, if you want to restart moin, just restart lighttpd). <span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-116"></span><span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-117"></span><p class="line874">It will also take care about handling robots.txt and favicon.ico correctly. <span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-118"></span><span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-119"></span><p class="line874">First add fastcgi and rewriting support to your lighttpd.conf (if you don't already have it): <span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-120"></span><span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-121"></span><span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-122"></span><span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-123"></span><span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-124"></span><span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-125"></span><span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-126"></span><span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-127"></span><span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-128"></span><span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-129"></span><span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-130"></span><span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-131"></span><pre>server.modules              = (
                                "mod_access",
                                "mod_rewrite",      # &lt;--- IMPORTANT!
                                "mod_status",
                                "mod_fastcgi",      # &lt;--- IMPORTANT!
                                "mod_accesslog",
                                "mod_redirect",
                                "mod_auth",
                                "mod_expire",
)</pre><span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-132"></span><span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-133"></span><p class="line874">Then configure it to run moin.fcg for your wiki site and also serve the static stuff: <span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-134"></span><span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-135"></span><span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-136"></span><span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-137"></span><span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-138"></span><span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-139"></span><span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-140"></span><span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-141"></span><span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-142"></span><span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-143"></span><span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-144"></span><span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-145"></span><span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-146"></span><span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-147"></span><span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-148"></span><span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-149"></span><span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-150"></span><span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-151"></span><span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-152"></span><span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-153"></span><span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-154"></span><span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-155"></span><span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-156"></span><span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-157"></span><span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-158"></span><pre>$HTTP["host"] =~ "^(www\.)?example\.org" {
    url.rewrite-once = (
        "^/robots.txt" =&gt; "/robots.txt",
        "^/favicon.ico" =&gt; "/favicon.ico",
        "^/moin_static161/(.*)" =&gt; "/moin_static161/$1",
        "^/(.*)" =&gt; "/wiki-engine/$1"
    )
    server.document-root        = "/srv/org.example/htdocs/"
    $HTTP["url"] =~ "^/wiki-engine/" {
      fastcgi.server = ( "/wiki-engine" =&gt;
        (( "docroot"   =&gt; "/",
           "min-procs" =&gt; 10,
           "max-procs" =&gt; 10,
           "max-load-per-proc" =&gt; 2,
           # allocate successive port numbers for each process, starting with "port"
           "bin-path"  =&gt; "/srv/org.example/bin/moin.fcg",
           "host"      =&gt; "127.0.0.1",
           "port"      =&gt; 3060,
           "check-local" =&gt; "disable",
        ))
      )
    }
}</pre><span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-159"></span><span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-160"></span><p class="line874">Finally adapt moin.fcg: <span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-161"></span><span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-162"></span><span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-163"></span><span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-164"></span><span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-165"></span><span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-166"></span><span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-167"></span><pre>class Config(FastCgiConfig):
    loglevel_file = logging.INFO
    logPath = '/srv/org.example/logs/moin.log'
    max_requests = 1000
    properties = {'script_name': '/'}  # &lt;--- IMPORTANT!</pre><span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-168"></span><span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-169"></span><p class="line867">
<h3 id="HelpOnInstalling.2BAC8-FastCgi.UsingHTTPAuthentication">Using HTTP Authentication</h3>
<span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-170"></span><span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-171"></span><p class="line874">lighttpd mod_fastcgi does not add the AUTH_TYPE variable to the cgi environment, which will cause http auth in moin to fail.   <span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-172"></span>See <a class="http" href="http://trac.lighttpd.net/trac/ticket/889">http://trac.lighttpd.net/trac/ticket/889</a> for more information, and an attached diff file to correct to issue. <span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-173"></span><span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-174"></span><p class="line867">
<h3 id="HelpOnInstalling.2BAC8-FastCgi.MoinMoinStartupscript">MoinMoin Startup script</h3>
<span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-175"></span><span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-176"></span><p class="line862">Here is a startup script for Mac OS X, using <a class="nonexistent" href="http://master18.moinmo.in/DarwinPortsStartup">DarwinPortsStartup</a> system. It is probably useful for other unix like platforms. <span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-177"></span><span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-178"></span><p class="line867"><span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-179"></span><span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-180"></span><span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-181"></span><span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-182"></span><span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-183"></span><span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-184"></span><span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-185"></span><span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-186"></span><span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-187"></span><span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-188"></span><span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-189"></span><span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-190"></span><span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-191"></span><span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-192"></span><span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-193"></span><span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-194"></span><span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-195"></span><span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-196"></span><span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-197"></span><span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-198"></span><span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-199"></span><span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-200"></span><span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-201"></span><span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-202"></span><span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-203"></span><span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-204"></span><span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-205"></span><span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-206"></span><span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-207"></span><span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-208"></span><span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-209"></span><span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-210"></span><span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-211"></span><span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-212"></span><span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-213"></span><span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-214"></span><span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-215"></span><span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-216"></span><span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-217"></span><span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-218"></span><span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-219"></span><span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-220"></span><span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-221"></span><span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-222"></span><span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-223"></span><span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-224"></span><span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-225"></span><span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-226"></span><span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-227"></span><span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-228"></span><span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-229"></span><span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-230"></span><span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-231"></span><span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-232"></span><span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-233"></span><span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-234"></span><span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-235"></span><pre># Start and stop multiple moin fast cgi instances runnings on PORTS

NAME="moin"
DIR="/www/org.mywiki/bin"
FCGIAPP="./moin.fcg"
PREFIX="/usr/local"

# List of ports to start moin instances on, separated with whitesapce
# Keep in sync with fastcgi.server in lighttpd.conf
PORTS="1080 1081"

start_on_port () {
    # Start moin instance on port, leaving pid file
    port=$1
    
    cd "${DIR}" &amp;&amp; sudo -u www "${PREFIX}/bin/spawn-fcgi" \
        -f "${FCGIAPP}" \
        -p $port \
        -P "${NAME}-${port}.pid" \
        &gt; /dev/null
}

kill_on_port () {
    # Try to kill process using pid in pid file, then remove the pid file
    pidFile="${DIR}/${NAME}-$1.pid"
    kill `cat "$pidFile"` &amp;&amp; rm -f "$pidFile" &gt; /dev/null 
}

start () {
    for port in $PORTS; do start_on_port $port; done 
}

stop () {
    for port in $PORTS; do kill_on_port $port; done
}

case "$1" in
start)
    # XXX starting twice will break pid files (bug in spawn-fcgi)
    start &amp;&amp; echo -n " $NAME"
        ;;
stop)
        stop &amp;&amp; echo -n " $NAME"
        ;;
restart)
    stop
    start &amp;&amp; echo -n " $NAME"
        ;;
*)
        echo "Usage: `basename $0` {start|stop|restart}" &gt;&amp;2
        ;;
esac

exit 0</pre><span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-236"></span><span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-237"></span><p class="line867">
<h3 id="HelpOnInstalling.2BAC8-FastCgi.MacOSX.3AAddingMoinMoinstartupscript">Mac OS X: Adding MoinMoin startup script</h3>
<span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-238"></span><span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-239"></span><p class="line874">With this script, moin instances will be started automatically on startup. <span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-240"></span><span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-241"></span><ol type="1"><li><p class="line862">Install <a class="http" href="http://darwinports.opendarwin.org/getdp/">darwinports</a> <span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-242"></span></li><li><p class="line862">Install DarwinPortsStartup package: <span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-243"></span><span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-244"></span><pre>sudo port install DarwinPortsStartup</pre><span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-245"></span></li><li><p class="line862">Copy moin.sh into <tt class="backtick">/opt/local/etc/rc.d</tt>: <span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-246"></span><span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-247"></span><pre>sudo cp moin.sh /opt/local/etc/rc.d</pre><span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.line-248"></span></li></ol><span class="anchor" id="HelpOnInstalling.2BAC8-FastCgi.bottom"></span></div> <span class="anchor" id="line-57"></span><hr class="hr2" /><p class="line874"> <span class="anchor" id="line-58"></span><span class="anchor" id="modpy-install"></span> <span class="anchor" id="line-59"></span>
<h1>mod_python Setup using Apache</h1>
<div dir="ltr" id="HelpOnInstalling.2BAC8-ApacheWithModPython.content" lang="en"><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheWithModPython.top"></span>
<span class="anchor" id="HelpOnInstalling.2BAC8-ApacheWithModPython.line-8"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheWithModPython.line-9"></span><p class="line867"><div class="table-of-contents"><p class="table-of-contents-heading">Contents<ol><li>
<a href="#HelpOnInstalling.2BAC8-ApacheWithModPython.WhyUsemodpython">Why Use mod_python</a></li><li>
<a href="#HelpOnInstalling.2BAC8-ApacheWithModPython.Basicconfiguring">Basic configuring</a><ol><li>
<a href="#HelpOnInstalling.2BAC8-ApacheWithModPython.Installmodpython">Install mod_python</a></li><li>
<a href="#HelpOnInstalling.2BAC8-ApacheWithModPython.Setupawikiinstance">Set up a wiki instance</a></li><li>
<a href="#HelpOnInstalling.2BAC8-ApacheWithModPython.Edit.60wikiconfig.py.60">Edit `wikiconfig.py`</a></li><li>
<a href="#HelpOnInstalling.2BAC8-ApacheWithModPython.ChangestoApache.60httpd.conf.60">Changes to Apache `httpd.conf`</a></li></ol></li><li>
<a href="#HelpOnInstalling.2BAC8-ApacheWithModPython.Solvingproblemsfornon-root-mountedwikis">Solving problems for non-root-mounted wikis</a></li><li>
<a href="#HelpOnInstalling.2BAC8-ApacheWithModPython.Configuringrootwiki">Configuring root wiki</a></li><li>
<a href="#HelpOnInstalling.2BAC8-ApacheWithModPython.Oldermodpythonversions">Older mod_python versions</a><ol><li>
<a href="#HelpOnInstalling.2BAC8-ApacheWithModPython.Useawrapperscript">Use a wrapper script</a></li><li>
<a href="#HelpOnInstalling.2BAC8-ApacheWithModPython.Fixmodpython">Fix mod_python</a></li></ol></li><li>
<a href="#HelpOnInstalling.2BAC8-ApacheWithModPython.Troubleshooting">Troubleshooting</a></li></ol></div><p class="line874"> <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheWithModPython.line-10"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheWithModPython.line-11"></span><p class="line867">
<h1 id="HelpOnInstalling.2BAC8-ApacheWithModPython.WhyUsemodpython">Why Use mod_python</h1>
<span class="anchor" id="HelpOnInstalling.2BAC8-ApacheWithModPython.line-12"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheWithModPython.line-13"></span><p class="line867"><a class="http" href="http://modpython.org/">mod_python</a> embeds the python interpreter into <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheWithModPython.line-14"></span>the apache server. This saves initialization time and the need of <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheWithModPython.line-15"></span>forking cgi scripts. It doesn't have the ability to run as different <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheWithModPython.line-16"></span>users. It will always run as the main apache user and group. Be sure <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheWithModPython.line-17"></span>that your wiki data files are accessible and writable by your apache <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheWithModPython.line-18"></span>server. <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheWithModPython.line-19"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheWithModPython.line-20"></span><p class="line867"><img alt="&lt;!&gt;" height="16" src="http://static.moinmo.in/moin_static180/modernized/img/attention.png" title="&lt;!&gt;" width="16" /> The basic configuration is suitable for mod_python 3.1.3 and later. If you use older version, see the section "Older mod_python versions" <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheWithModPython.line-21"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheWithModPython.line-22"></span><p class="line867"><img alt="&lt;!&gt;" height="16" src="http://static.moinmo.in/moin_static180/modernized/img/attention.png" title="&lt;!&gt;" width="16" /> mod_python will cause your apache processes to increase their <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheWithModPython.line-23"></span>memory requirements considerably - especially as apache runs many <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheWithModPython.line-24"></span>separate processes which will each need to have their own copy of the <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheWithModPython.line-25"></span>python code and data in the process memory space.  You may find that <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheWithModPython.line-26"></span>FastCGI, as detailed in <a href="http://master18.moinmo.in/HelpOnInstalling/FastCgi">HelpOnInstalling/FastCgi</a> is rather <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheWithModPython.line-27"></span>more efficient in this respect. <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheWithModPython.line-28"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheWithModPython.line-29"></span><p class="line867">
<h1 id="HelpOnInstalling.2BAC8-ApacheWithModPython.Basicconfiguring">Basic configuring</h1>
<span class="anchor" id="HelpOnInstalling.2BAC8-ApacheWithModPython.line-30"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheWithModPython.line-31"></span><ol type="1"><li>Install mod_python <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheWithModPython.line-32"></span></li><li>Set up a wiki instance <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheWithModPython.line-33"></span></li><li><p class="line862">Edit <tt class="backtick">wikiconfig.py</tt> <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheWithModPython.line-34"></span></li><li><p class="line862">Changes to Apache <tt class="backtick">httpd.conf</tt> <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheWithModPython.line-35"></span></li><li>Restart Apache <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheWithModPython.line-36"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheWithModPython.line-37"></span></li></ol><p class="line862">The sample configurations below are for a wiki instance called <tt class="backtick">mywiki</tt> installed in a directory <tt class="backtick">/var/www/moin/mywiki</tt> with the main <a href="http://master18.moinmo.in/MoinMoin">MoinMoin</a> installation installed in python's default site library path. The wiki appears as URL <tt class="backtick">/mywiki</tt> under the server - ie <tt class="backtick">http://my.ser.ver/mywiki</tt>.  You will need to change these to reflect your installation. <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheWithModPython.line-38"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheWithModPython.line-39"></span><p class="line867">
<h2 id="HelpOnInstalling.2BAC8-ApacheWithModPython.Installmodpython">Install mod_python</h2>
<span class="anchor" id="HelpOnInstalling.2BAC8-ApacheWithModPython.line-40"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheWithModPython.line-41"></span><p class="line862">Most people will just add a <tt class="backtick">mod_python</tt> package to their current operating system installation.  If you are building from source then you should consult the <a class="http" href="http://modpython.org/live/current/doc-html/">mod_python documentation</a>. <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheWithModPython.line-42"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheWithModPython.line-43"></span><p class="line862">The mod_python installation should have added some lines to the Apache configuration file - either in the file itself or in an included configuration file (for example on Red Hat or Fedora linux the mod_python configuration is in <tt class="backtick">/etc/httpd/conf.d/python.conf</tt>). <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheWithModPython.line-44"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheWithModPython.line-45"></span><p class="line862">Make sure you have this line in <tt class="backtick">httpd.conf</tt> or mod_python will not work: <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheWithModPython.line-46"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheWithModPython.line-47"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheWithModPython.line-48"></span><pre>LoadModule python_module modules/mod_python.so</pre><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheWithModPython.line-49"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheWithModPython.line-50"></span><p class="line874">After this restart Apache and make sure that it starts successfully, and that the error log has a line similar to this:- <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheWithModPython.line-51"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheWithModPython.line-52"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheWithModPython.line-53"></span><pre>[Sat Jan 01 15:40:49 2005] [notice] mod_python: Creating 4 session mutexes based on 150 max processes and 0 max threads.</pre><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheWithModPython.line-54"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheWithModPython.line-55"></span><p class="line874">You may need to change some environment variables on (eg) FreeBSD - this is detailed in the port installation message. <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheWithModPython.line-56"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheWithModPython.line-57"></span><p class="line867">
<h2 id="HelpOnInstalling.2BAC8-ApacheWithModPython.Setupawikiinstance">Set up a wiki instance</h2>
<span class="anchor" id="HelpOnInstalling.2BAC8-ApacheWithModPython.line-58"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheWithModPython.line-59"></span><p class="line862">This is done as shown in <a href="http://master18.moinmo.in/HelpOnInstalling/WikiInstanceCreation">WikiInstanceCreation</a>. Its recommended to first configure the wiki with cgi and check that it works, then change the configuratin to use mod_python. This allows you be sure that any problems are in the mod_python transition rather than the basic <a href="http://master18.moinmo.in/MoinMoin">MoinMoin</a> installation. <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheWithModPython.line-60"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheWithModPython.line-61"></span><ol type="1"><li>Copy moin.cgi into your wiki directory <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheWithModPython.line-62"></span></li><li><p class="line862">Configure <tt class="backtick">httpd.conf</tt> as cgi first (the shown Alias is for moin version 1.6.0): <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheWithModPython.line-63"></span><ul><li style="list-style-type:none"><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheWithModPython.line-64"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheWithModPython.line-65"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheWithModPython.line-66"></span><pre>Alias /moin_static160/ "/usr/share/moin/htdocs/"
ScriptAlias /mywiki "/var/www/moin/mywiki/moin.cgi"</pre><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheWithModPython.line-67"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheWithModPython.line-68"></span></li></ul></li></ol><p class="line874">Restart Apache and make test that your wiki works. <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheWithModPython.line-69"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheWithModPython.line-70"></span><p class="line867">
<h2 id="HelpOnInstalling.2BAC8-ApacheWithModPython.Edit.60wikiconfig.py.60">Edit `wikiconfig.py`</h2>
<span class="anchor" id="HelpOnInstalling.2BAC8-ApacheWithModPython.line-71"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheWithModPython.line-72"></span><p class="line874">Make sure you use only absolute paths - relative paths will not work! <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheWithModPython.line-73"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheWithModPython.line-74"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheWithModPython.line-75"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheWithModPython.line-76"></span><pre>data_dir = '/var/www/moin/mywiki/data/'
data_underlay_dir = '/var/www/moin/mywiki/underlay/'</pre><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheWithModPython.line-77"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheWithModPython.line-78"></span><p class="line874">If you do not want to use absolute paths, you can use Python's os module to construct the relative paths: <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheWithModPython.line-79"></span>{{{import os <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheWithModPython.line-80"></span>data_dir = os.path.join(os.path.dirname(<span class="u">file</span>), 'data/') <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheWithModPython.line-81"></span>data_underlay_dir = os.path.join(os.path.dirname(<span class="u">file</span>), 'underlay/') <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheWithModPython.line-82"></span>}}} <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheWithModPython.line-83"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheWithModPython.line-84"></span><p class="line874">Test that the wiki works after this change. <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheWithModPython.line-85"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheWithModPython.line-86"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheWithModPython.line-87"></span><p class="line867">
<h2 id="HelpOnInstalling.2BAC8-ApacheWithModPython.ChangestoApache.60httpd.conf.60">Changes to Apache `httpd.conf`</h2>
<span class="anchor" id="HelpOnInstalling.2BAC8-ApacheWithModPython.line-88"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheWithModPython.line-89"></span><p class="line874">After your wiki is running as cgi script, convert it to run with mod_python.  <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheWithModPython.line-90"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheWithModPython.line-91"></span><p class="line862">If you run your wiki as cgi as we recommended before, remove or comment the <a class="nonexistent" href="http://master18.moinmo.in/ScriptAlias">ScriptAlias</a> directive: <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheWithModPython.line-92"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheWithModPython.line-93"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheWithModPython.line-94"></span><pre>#ScriptAlias /mywiki "/var/www/moin/mywiki/moin.cgi"</pre><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheWithModPython.line-95"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheWithModPython.line-96"></span><p class="line862">Add a <tt class="backtick">Location</tt> directive: <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheWithModPython.line-97"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheWithModPython.line-98"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheWithModPython.line-99"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheWithModPython.line-100"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheWithModPython.line-101"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheWithModPython.line-102"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheWithModPython.line-103"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheWithModPython.line-104"></span><pre>&lt;Location /mywiki&gt;
    SetHandler python-program
    # Add the path of your wiki directory
    PythonPath "['/var/www/moin/mywiki'] + sys.path"
    PythonHandler MoinMoin.request.request_modpython::Request.run
&lt;/Location&gt;</pre><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheWithModPython.line-105"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheWithModPython.line-106"></span><p class="line862">If you have multiple <a href="http://master18.moinmo.in/MoinMoin">MoinMoin</a> instances then add one location directive for each one (changing the paths as appropriate) and add a line with the directive <tt class="backtick">PythonInterpreter&nbsp;mywiki</tt> to each Location section. With this directive different subinterpreters with completely separate namespaces will be used for each wiki (see <a class="http" href="http://modpython.org/live/current/doc-html/pyapi-interps.html">here</a> for details). <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheWithModPython.line-107"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheWithModPython.line-108"></span><p class="line862">If you did not install <a href="http://master18.moinmo.in/MoinMoin">MoinMoin</a> in the default location, you will have to add the path to <a href="http://master18.moinmo.in/MoinMoin">MoinMoin</a> to the system path: <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheWithModPython.line-109"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheWithModPython.line-110"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheWithModPython.line-111"></span><pre>    PythonPath "['/var/www/moin/mywiki', '/prefix/lib/python2.x/site-packages'] + sys.path"</pre><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheWithModPython.line-112"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheWithModPython.line-113"></span><p class="line874">Restart Apache - everything should now work correctly. <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheWithModPython.line-114"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheWithModPython.line-115"></span><p class="line867">
<h1 id="HelpOnInstalling.2BAC8-ApacheWithModPython.Solvingproblemsfornon-root-mountedwikis">Solving problems for non-root-mounted wikis</h1>
<span class="anchor" id="HelpOnInstalling.2BAC8-ApacheWithModPython.line-116"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheWithModPython.line-117"></span><ul><li style="list-style-type:none"><p class="line891"><img alt="/!\" height="16" src="http://static.moinmo.in/moin_static180/modernized/img/alert.png" title="/!\" width="16" /> If your wiki does not have a root URL (like <tt class="backtick">http://www.example.com/FrontPage</tt>), then you might need to follow the next steps: <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheWithModPython.line-118"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheWithModPython.line-119"></span></li></ul><p class="line862">On some installations, mod_python hands <a href="http://master18.moinmo.in/MoinMoin">MoinMoin</a> incorrect script_name and path_info. It usually happens when using the Apache Location directive, with a wiki in an arbitary path: <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheWithModPython.line-120"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheWithModPython.line-121"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheWithModPython.line-122"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheWithModPython.line-123"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheWithModPython.line-124"></span><pre>&lt;Location /farm/mywiki&gt;
    ...
&lt;/Location&gt;</pre><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheWithModPython.line-125"></span><p class="line874">This will not work, because its not clear what is the script name, since with location setup, there is no real script. <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheWithModPython.line-126"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheWithModPython.line-127"></span><p class="line862">To solve this problem, use a <tt class="backtick">PythonOption</tt> directive: <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheWithModPython.line-128"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheWithModPython.line-129"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheWithModPython.line-130"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheWithModPython.line-131"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheWithModPython.line-132"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheWithModPython.line-133"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheWithModPython.line-134"></span><pre>&lt;Location /farm/mywiki&gt;
    # Location value must match the Apache Location value!
    PythonOption Location /farm/mywiki
    ...
&lt;/Location&gt;</pre><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheWithModPython.line-135"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheWithModPython.line-136"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheWithModPython.line-137"></span><p class="line867">
<h1 id="HelpOnInstalling.2BAC8-ApacheWithModPython.Configuringrootwiki">Configuring root wiki</h1>
<span class="anchor" id="HelpOnInstalling.2BAC8-ApacheWithModPython.line-138"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheWithModPython.line-139"></span><p class="line862">You may wish to have your wiki appearing at the root of your webserver - for example so that <tt class="backtick">http://wiki.example.com/</tt> will map to your wiki rather than having to use <tt class="backtick">http://wiki.example.com/mywiki/</tt>.  This requires a slightly different form of configuration using <tt class="backtick">mod_rewrite</tt> - this is a standard module of recent Apache distributions, and is often enabled by default. <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheWithModPython.line-140"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheWithModPython.line-141"></span><p class="line862">You need to set up your wiki instance as described above, and also copy <tt class="backtick">moinmodpy.py</tt> from the Moin installation directory to the wiki instance directory (<tt class="backtick">/var/www/moin/mywiki</tt> in these examples). <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheWithModPython.line-142"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheWithModPython.line-143"></span><p class="line862">The Apache configuration needs <tt class="backtick">mod_rewrite</tt> enabled - so the line <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheWithModPython.line-144"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheWithModPython.line-145"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheWithModPython.line-146"></span><pre>LoadModule rewrite_module modules/mod_rewrite.so</pre><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheWithModPython.line-147"></span><p class="line862">should appear in the first part of the <tt class="backtick">httpd.conf</tt> configuration file. <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheWithModPython.line-148"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheWithModPython.line-149"></span><p class="line874">The wiki and virtual host configuration should look like this (Alias is for moin version 1.6.0):- <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheWithModPython.line-150"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheWithModPython.line-151"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheWithModPython.line-152"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheWithModPython.line-153"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheWithModPython.line-154"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheWithModPython.line-155"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheWithModPython.line-156"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheWithModPython.line-157"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheWithModPython.line-158"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheWithModPython.line-159"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheWithModPython.line-160"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheWithModPython.line-161"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheWithModPython.line-162"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheWithModPython.line-163"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheWithModPython.line-164"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheWithModPython.line-165"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheWithModPython.line-166"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheWithModPython.line-167"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheWithModPython.line-168"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheWithModPython.line-169"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheWithModPython.line-170"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheWithModPython.line-171"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheWithModPython.line-172"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheWithModPython.line-173"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheWithModPython.line-174"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheWithModPython.line-175"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheWithModPython.line-176"></span><pre>&lt;VirtualHost *:80&gt;
  ServerAdmin postmaster@example.com
  DocumentRoot /var/www/html
  ServerName wiki.example.com
  Alias /moin_static160/ "/usr/share/moin/htdocs/"

  # Rewrite urls
  RewriteEngine On
  RewriteLogLevel 0
  # map /wiki static files to Moin htdocs
  RewriteRule ^/moin_static160/(.*)$ /usr/share/moin/htdocs/$1 [last]
  RewriteRule ^/robots.txt$ /usr/share/moin/htdocs/robots.txt [last]
  RewriteRule ^/favicon.ico$ /usr/share/moin/htdocs/favicon.ico [last]
  # map everything else to server script
  RewriteRule ^(.*)$ /var/www/moin/mywiki/moinmodpy.py$1

  &lt;Directory "/var/www/moin/testwiki"&gt;
    # Modpy stuff
    AddHandler python-program .py
    # Add the path to the wiki directory, where
    # moinmodpy.py and wikiconfig.py are located.
    PythonPath "['/var/www/moin/mywiki'] + sys.path"
    PythonHandler MoinMoin.request.request_modpython::Request.run
  &lt;/Directory&gt;
&lt;/VirtualHost&gt;</pre><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheWithModPython.line-177"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheWithModPython.line-178"></span><p class="line862">Apache should be restarted, and the FrontPage of <tt class="backtick">mywiki</tt> should now appear at <tt class="backtick">http://wiki.example.com/</tt>. <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheWithModPython.line-179"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheWithModPython.line-180"></span><p class="line862">Other ways of handling root level wikis with Apache are detailed in the appropriately named <a href="http://master18.moinmo.in/HelpOnConfiguration/ApacheVoodoo">HelpOnConfiguration/ApacheVoodoo</a>. <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheWithModPython.line-181"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheWithModPython.line-182"></span><p class="line867">
<h1 id="HelpOnInstalling.2BAC8-ApacheWithModPython.Oldermodpythonversions">Older mod_python versions</h1>
<span class="anchor" id="HelpOnInstalling.2BAC8-ApacheWithModPython.line-183"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheWithModPython.line-184"></span><p class="line862">mod_python versions 2.7.10, 3.0.4 and 3.1.2b have a bug in <tt class="backtick">apache.resolve_object</tt>. This bug was reported to the mod_python <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheWithModPython.line-185"></span>maintainers and has been fixed in the 3.1.3 release. The best fix for this is to update to the current release. However if you are unable to do this there are 2 possible solutions: <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheWithModPython.line-186"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheWithModPython.line-187"></span><p class="line867">
<h2 id="HelpOnInstalling.2BAC8-ApacheWithModPython.Useawrapperscript">Use a wrapper script</h2>
<span class="anchor" id="HelpOnInstalling.2BAC8-ApacheWithModPython.line-188"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheWithModPython.line-189"></span><p class="line867"><a href="http://master18.moinmo.in/MoinMoin">MoinMoin</a> come with a <tt class="backtick">moinmodpy.py</tt> wrapper script, and this could be used by changing the <tt class="backtick">PythonPath</tt> and <tt class="backtick">PythonHandler</tt> directives as shown in the <tt class="backtick">moinmodpy.htaccess</tt> file.  <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheWithModPython.line-190"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheWithModPython.line-191"></span><p class="line867">
<h2 id="HelpOnInstalling.2BAC8-ApacheWithModPython.Fixmodpython">Fix mod_python</h2>
<span class="anchor" id="HelpOnInstalling.2BAC8-ApacheWithModPython.line-192"></span><p class="line874">mod_python has a small resolver bug in versions 2.7.10, 3.0.4 and 3.1.2b. <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheWithModPython.line-193"></span>The method <tt class="backtick">resolve_object</tt> in <tt class="backtick">mod_python/apache.py</tt> checks the wrong <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheWithModPython.line-194"></span>object, and so the lookup for <tt class="backtick">RequestModPy.run</tt> fails. <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheWithModPython.line-195"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheWithModPython.line-196"></span><p class="line862">To fix it you need to change the method <tt class="backtick">resolve_object</tt> (around line 551 for <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheWithModPython.line-197"></span>mod_python 3.1.2b) from <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheWithModPython.line-198"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheWithModPython.line-199"></span><p class="line867"><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheWithModPython.line-200"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheWithModPython.line-201"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheWithModPython.line-202"></span><pre>        if silent and not hasattr(module, obj_str):
            return None</pre><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheWithModPython.line-203"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheWithModPython.line-204"></span><p class="line874">to <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheWithModPython.line-205"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheWithModPython.line-206"></span><p class="line867"><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheWithModPython.line-207"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheWithModPython.line-208"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheWithModPython.line-209"></span><pre>        if silent and not hasattr(obj, obj_str):
            return None</pre><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheWithModPython.line-210"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheWithModPython.line-211"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheWithModPython.line-212"></span><p class="line867">
<h1 id="HelpOnInstalling.2BAC8-ApacheWithModPython.Troubleshooting">Troubleshooting</h1>
<span class="anchor" id="HelpOnInstalling.2BAC8-ApacheWithModPython.line-213"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheWithModPython.line-214"></span><p class="line874">Page access gives apache error:: <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheWithModPython.line-215"></span><ul><li style="list-style-type:none"><p class="line891"><tt>PythonHandler&nbsp;MoinMoin.request::RequestModPy.run:&nbsp;OSError:&nbsp;[Errno&nbsp;2]&nbsp;No&nbsp;such&nbsp;file&nbsp;or&nbsp;directory:&nbsp;'data/user'</tt> <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheWithModPython.line-216"></span>This appears to be caused by you not having an absolute path for <tt class="backtick">data_dir</tt> in <tt class="backtick">moin_config.py</tt>.  There are several other lines of error traceback preceding this one in the apache error log.  Fix the path in <tt class="backtick">moin_config.py</tt>. <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheWithModPython.line-217"></span></li></ul><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheWithModPython.bottom"></span></div> <span class="anchor" id="line-60"></span><hr class="hr2" /><p class="line874"> <span class="anchor" id="line-61"></span><span class="anchor" id="twisted-install"></span> <span class="anchor" id="line-62"></span>
<h1>Setup using Twisted</h1>
<div dir="ltr" id="HelpOnInstalling.2BAC8-TwistedWeb.content" lang="en"><span class="anchor" id="HelpOnInstalling.2BAC8-TwistedWeb.top"></span>
<span class="anchor" id="HelpOnInstalling.2BAC8-TwistedWeb.line-8"></span><span class="anchor" id="HelpOnInstalling.2BAC8-TwistedWeb.line-9"></span><p class="line867">
<h1 id="HelpOnInstalling.2BAC8-TwistedWeb.UsingMoinMoinwithTwisted">Using MoinMoin with Twisted</h1>
<span class="anchor" id="HelpOnInstalling.2BAC8-TwistedWeb.line-10"></span><span class="anchor" id="HelpOnInstalling.2BAC8-TwistedWeb.line-11"></span><p class="line867"><a class="http" href="http://twistedmatrix.com/trac/wiki">Twisted</a> is an event-driven networking framework for many kinds of applications. <span class="anchor" id="HelpOnInstalling.2BAC8-TwistedWeb.line-12"></span>For <a href="http://master18.moinmo.in/MoinMoin">MoinMoin</a> Twisted is used as a web server that just imports <a href="http://master18.moinmo.in/MoinMoin">MoinMoin</a> persistently. This has the advantage that the Python interpreter and all Python scripts (including Twisted itself and also <a href="http://master18.moinmo.in/MoinMoin">MoinMoin</a>) is only loaded and initialized one time, and that data can be cached in memory from request to request, enhancing the performance of <a href="http://master18.moinmo.in/MoinMoin">MoinMoin</a>. <span class="anchor" id="HelpOnInstalling.2BAC8-TwistedWeb.line-13"></span><span class="anchor" id="HelpOnInstalling.2BAC8-TwistedWeb.line-14"></span><span class="anchor" id="HelpOnInstalling.2BAC8-TwistedWeb.line-15"></span><ul><li style="list-style-type:none"><p class="line891"><img alt="/!\" height="16" src="http://static.moinmo.in/moin_static180/modernized/img/alert.png" title="/!\" width="16" /> First do <a href="http://master18.moinmo.in/HelpOnInstalling/BasicInstallation">../BasicInstallation</a> and <a href="http://master18.moinmo.in/HelpOnInstalling/WikiInstanceCreation">../WikiInstanceCreation</a>. <span class="anchor" id="HelpOnInstalling.2BAC8-TwistedWeb.line-16"></span><span class="anchor" id="HelpOnInstalling.2BAC8-TwistedWeb.line-17"></span></li></ul><p class="line874">Besides the general installation you need 3 files:  <span class="anchor" id="HelpOnInstalling.2BAC8-TwistedWeb.line-18"></span><span class="anchor" id="HelpOnInstalling.2BAC8-TwistedWeb.line-19"></span><ol type="1"><li><p class="line862">the script <tt>/path/to/cgi-dir/mointwisted</tt> (see "Starting the server" below) <span class="anchor" id="HelpOnInstalling.2BAC8-TwistedWeb.line-20"></span></li><li><p class="line862">the webserver script file like <tt>mointwisted.py</tt> (which needs to be in the same directory where your working directory is). <span class="anchor" id="HelpOnInstalling.2BAC8-TwistedWeb.line-21"></span></li><li><p class="line862">the configuration file like  <tt>/path/to/wikiconfig-dir/wikiconfig.py</tt> <span class="anchor" id="HelpOnInstalling.2BAC8-TwistedWeb.line-22"></span><span class="anchor" id="HelpOnInstalling.2BAC8-TwistedWeb.line-23"></span></li></ol><p class="line867"><div class="table-of-contents"><p class="table-of-contents-heading">Contents<ol><li>
<a href="#HelpOnInstalling.2BAC8-TwistedWeb.UsingMoinMoinwithTwisted">Using MoinMoin with Twisted</a><ol><li>
<a href="#HelpOnInstalling.2BAC8-TwistedWeb.InstallTwisted">Install Twisted</a></li><li>
<a href="#HelpOnInstalling.2BAC8-TwistedWeb.ConfiguringtheTwistedserver">Configuring the Twisted server</a><ol><li>
<a href="#HelpOnInstalling.2BAC8-TwistedWeb.Systempathconfiguration">System path configuration</a></li><li>
<a href="#HelpOnInstalling.2BAC8-TwistedWeb.Configclassoptions">Config class options</a></li></ol></li><li>
<a href="#HelpOnInstalling.2BAC8-TwistedWeb.Configuringwikiconfig.py">Configuring wikiconfig.py</a></li><li>
<a href="#HelpOnInstalling.2BAC8-TwistedWeb.Startingtheserver">Starting the server</a><ol><li>
<a href="#HelpOnInstalling.2BAC8-TwistedWeb.onUnix">on Unix</a></li><li>
<a href="#HelpOnInstalling.2BAC8-TwistedWeb.onWindows">on Windows</a></li></ol></li></ol></li></ol></div><p class="line874"> <span class="anchor" id="HelpOnInstalling.2BAC8-TwistedWeb.line-24"></span><span class="anchor" id="HelpOnInstalling.2BAC8-TwistedWeb.line-25"></span><p class="line867">
<h2 id="HelpOnInstalling.2BAC8-TwistedWeb.InstallTwisted">Install Twisted</h2>
<span class="anchor" id="HelpOnInstalling.2BAC8-TwistedWeb.line-26"></span><span class="anchor" id="HelpOnInstalling.2BAC8-TwistedWeb.line-27"></span><p class="line874">First, install Twisted (see URL above). Many Linux distributions have Twisted packages. Please refer to the documentation of Twisted for installation information. <span class="anchor" id="HelpOnInstalling.2BAC8-TwistedWeb.line-28"></span><span class="anchor" id="HelpOnInstalling.2BAC8-TwistedWeb.line-29"></span><p class="line867">
<h2 id="HelpOnInstalling.2BAC8-TwistedWeb.ConfiguringtheTwistedserver">Configuring the Twisted server</h2>
<span class="anchor" id="HelpOnInstalling.2BAC8-TwistedWeb.line-30"></span><span class="anchor" id="HelpOnInstalling.2BAC8-TwistedWeb.line-31"></span><p class="line862">Copy the file <tt class="backtick">wiki/server/mointwisted.py</tt> to your wiki directory. Edit and adapt the settings to your needs. <span class="anchor" id="HelpOnInstalling.2BAC8-TwistedWeb.line-32"></span><span class="anchor" id="HelpOnInstalling.2BAC8-TwistedWeb.line-33"></span><p class="line867">
<h3 id="HelpOnInstalling.2BAC8-TwistedWeb.Systempathconfiguration">System path configuration</h3>
<span class="anchor" id="HelpOnInstalling.2BAC8-TwistedWeb.line-34"></span><span class="anchor" id="HelpOnInstalling.2BAC8-TwistedWeb.line-35"></span><p class="line874">If you did a standard install, and you are not a developer, you probably want to skip this section. Otherwise, you might want to add the path to moin and config file, like that: <span class="anchor" id="HelpOnInstalling.2BAC8-TwistedWeb.line-36"></span><span class="anchor" id="HelpOnInstalling.2BAC8-TwistedWeb.line-37"></span><p class="line867"><span class="anchor" id="HelpOnInstalling.2BAC8-TwistedWeb.line-38"></span><span class="anchor" id="HelpOnInstalling.2BAC8-TwistedWeb.line-39"></span><span class="anchor" id="HelpOnInstalling.2BAC8-TwistedWeb.line-40"></span><pre>sys.path.insert(0, '/path/to/moin')
sys.path.insert(0, '/path/to/wikiconfig')</pre><span class="anchor" id="HelpOnInstalling.2BAC8-TwistedWeb.line-41"></span><span class="anchor" id="HelpOnInstalling.2BAC8-TwistedWeb.line-42"></span><p class="line867">
<h3 id="HelpOnInstalling.2BAC8-TwistedWeb.Configclassoptions">Config class options</h3>
<span class="anchor" id="HelpOnInstalling.2BAC8-TwistedWeb.line-43"></span><span class="anchor" id="HelpOnInstalling.2BAC8-TwistedWeb.line-44"></span><p class="line874">If you did a standard install, the default options might be just what you need. Check and change what you like: <span class="anchor" id="HelpOnInstalling.2BAC8-TwistedWeb.line-45"></span><span class="anchor" id="HelpOnInstalling.2BAC8-TwistedWeb.line-46"></span><div><table><tbody><tr>  <td><p class="line862"> <strong>Option</strong> </td>
  <td><p class="line862"> <strong>Default</strong> </td>
  <td><p class="line862"> <strong>Comment</strong> </td>
</tr>
<tr>  <td><span class="anchor" id="HelpOnInstalling.2BAC8-TwistedWeb.line-47"></span><p class="line862"> docs </td>
  <td><p class="line862"> '/usr/share/moin/wiki/htdocs' </td>
  <td><p class="line862"> Path to moin shared files </td>
</tr>
<tr>  <td><span class="anchor" id="HelpOnInstalling.2BAC8-TwistedWeb.line-48"></span><p class="line862"> user </td>
  <td><p class="line862"> 'www-data' </td>
  <td><p class="line862"> If you run as root, the server will run as this user </td>
</tr>
<tr>  <td><span class="anchor" id="HelpOnInstalling.2BAC8-TwistedWeb.line-49"></span><p class="line862"> group </td>
  <td><p class="line862"> 'www-data' </td>
  <td><p class="line862"> If you run as root, the server will run as this group </td>
</tr>
<tr>  <td><span class="anchor" id="HelpOnInstalling.2BAC8-TwistedWeb.line-50"></span><p class="line862"> port </td>
  <td><p class="line862"> 8080 </td>
  <td><p class="line862"> Port to serve. To serve a privileged port below 1024 you will have to run as root </td>
</tr>
<tr>  <td><span class="anchor" id="HelpOnInstalling.2BAC8-TwistedWeb.line-51"></span><p class="line862"> interfaces </td>
  <td><p class="line862"> <tt class="backtick">['']</tt> </td>
  <td><p class="line862"> A list of interfaces the server will listen to. If the list contains the entry <tt class="backtick">''</tt> (like for the default configuration), all other entries are ignored and the server will listen to all interfaces. </td>
</tr>
<tr>  <td><span class="anchor" id="HelpOnInstalling.2BAC8-TwistedWeb.line-52"></span><p class="line862"> logPath </td>
  <td><p class="line862"> 'mointwisted.log' </td>
  <td><p class="line862"> Log file. </td>
</tr>
<tr>  <td><span class="anchor" id="HelpOnInstalling.2BAC8-TwistedWeb.line-53"></span><p class="line862"> profiler </td>
  <td><p class="line862"> commented python code </td>
  <td><p class="line862"> Useful only if you are a moin developer. </td>
</tr>
</tbody></table></div><span class="anchor" id="HelpOnInstalling.2BAC8-TwistedWeb.line-54"></span><span class="anchor" id="HelpOnInstalling.2BAC8-TwistedWeb.line-55"></span><p class="line867">
<h2 id="HelpOnInstalling.2BAC8-TwistedWeb.Configuringwikiconfig.py">Configuring wikiconfig.py</h2>
<span class="anchor" id="HelpOnInstalling.2BAC8-TwistedWeb.line-56"></span><span class="anchor" id="HelpOnInstalling.2BAC8-TwistedWeb.line-57"></span><p class="line874">The sample config file should be just fine. <span class="anchor" id="HelpOnInstalling.2BAC8-TwistedWeb.line-58"></span><span class="anchor" id="HelpOnInstalling.2BAC8-TwistedWeb.line-59"></span><p class="line862">Don't change <tt class="backtick">url_prefix_static</tt> as the default value is hardcoded in the Twisted server. <span class="anchor" id="HelpOnInstalling.2BAC8-TwistedWeb.line-60"></span><span class="anchor" id="HelpOnInstalling.2BAC8-TwistedWeb.line-61"></span><p class="line867">
<h2 id="HelpOnInstalling.2BAC8-TwistedWeb.Startingtheserver">Starting the server</h2>
<span class="anchor" id="HelpOnInstalling.2BAC8-TwistedWeb.line-62"></span><span class="anchor" id="HelpOnInstalling.2BAC8-TwistedWeb.line-63"></span><p class="line867">
<h3 id="HelpOnInstalling.2BAC8-TwistedWeb.onUnix">on Unix</h3>
<span class="anchor" id="HelpOnInstalling.2BAC8-TwistedWeb.line-64"></span><span class="anchor" id="HelpOnInstalling.2BAC8-TwistedWeb.line-65"></span><p class="line862">On GNU/Linux, Mac OS X or another POSIX-like OS, copy <tt class="backtick">wiki/server/mointwisted</tt> to your wiki directory. You might want to adapt <tt class="backtick">PYTHONPATH</tt> and the path to <tt class="backtick">twistd</tt>.  <span class="anchor" id="HelpOnInstalling.2BAC8-TwistedWeb.line-66"></span><span class="anchor" id="HelpOnInstalling.2BAC8-TwistedWeb.line-67"></span><p class="line862">Start the server with <tt>./mointwisted&nbsp;start</tt> and test your wiki at <a class="http" href="http://localhost:8080/">http://localhost:8080/</a>. Stop the server with <tt>./mointwisted&nbsp;stop</tt>. <span class="anchor" id="HelpOnInstalling.2BAC8-TwistedWeb.line-68"></span><span class="anchor" id="HelpOnInstalling.2BAC8-TwistedWeb.line-69"></span><p class="line862">For more options run <tt>./mointwisted</tt> without arguments. <span class="anchor" id="HelpOnInstalling.2BAC8-TwistedWeb.line-70"></span><span class="anchor" id="HelpOnInstalling.2BAC8-TwistedWeb.line-71"></span><p class="line862">If you want to start the server via initscript make sure <tt>mointwisted</tt> finds <tt>montwisted.py</tt> on startup!  <span class="anchor" id="HelpOnInstalling.2BAC8-TwistedWeb.line-72"></span><span class="anchor" id="HelpOnInstalling.2BAC8-TwistedWeb.line-73"></span><span class="anchor" id="HelpOnInstalling.2BAC8-TwistedWeb.line-74"></span><p class="line867">
<h3 id="HelpOnInstalling.2BAC8-TwistedWeb.onWindows">on Windows</h3>
<span class="anchor" id="HelpOnInstalling.2BAC8-TwistedWeb.line-75"></span><span class="anchor" id="HelpOnInstalling.2BAC8-TwistedWeb.line-76"></span><p class="line862">Copy <tt class="backtick">wiki/server/mointwisted.cmd</tt> to your wiki directory. You might have to change the path pointing to the python-scripts directory. <span class="anchor" id="HelpOnInstalling.2BAC8-TwistedWeb.line-77"></span><span class="anchor" id="HelpOnInstalling.2BAC8-TwistedWeb.line-78"></span><p class="line862">Double click <tt class="backtick">mointwisted.cmd</tt> to start the server. It will create a new terminal window. To stop the server, close the terminal window. <span class="anchor" id="HelpOnInstalling.2BAC8-TwistedWeb.line-79"></span><span class="anchor" id="HelpOnInstalling.2BAC8-TwistedWeb.bottom"></span></div> <span class="anchor" id="line-63"></span><hr class="hr2" /><p class="line874"> <span class="anchor" id="line-64"></span><span class="anchor" id="linuxstandalone-install"></span> <span class="anchor" id="line-65"></span>
<h1>Linux Installation using standalone server</h1>
<div dir="ltr" id="HelpOnInstalling.2BAC8-StandaloneServer.content" lang="en"><span class="anchor" id="HelpOnInstalling.2BAC8-StandaloneServer.top"></span>
<span class="anchor" id="HelpOnInstalling.2BAC8-StandaloneServer.line-9"></span><p class="line867"><strong>Installing and configuring standalone server</strong> <span class="anchor" id="HelpOnInstalling.2BAC8-StandaloneServer.line-10"></span><span class="anchor" id="HelpOnInstalling.2BAC8-StandaloneServer.line-11"></span><p class="line862">See also: <a href="http://master18.moinmo.in/HelpOnConfiguration/IntegratingWithApache">HelpOnConfiguration/IntegratingWithApache</a> <span class="anchor" id="HelpOnInstalling.2BAC8-StandaloneServer.line-12"></span><span class="anchor" id="HelpOnInstalling.2BAC8-StandaloneServer.line-13"></span><p class="line874">The standalone server is especially made for local wikis because it does not need a web server installed. Only Python and Moin are necessary! <span class="anchor" id="HelpOnInstalling.2BAC8-StandaloneServer.line-14"></span><span class="anchor" id="HelpOnInstalling.2BAC8-StandaloneServer.line-15"></span><p class="line867">
<h1 id="HelpOnInstalling.2BAC8-StandaloneServer.Thequickway">The quick way</h1>
<span class="anchor" id="HelpOnInstalling.2BAC8-StandaloneServer.line-16"></span><p class="line862">See <a href="http://master18.moinmo.in/DesktopEdition">DesktopEdition</a>. <span class="anchor" id="HelpOnInstalling.2BAC8-StandaloneServer.line-17"></span><span class="anchor" id="HelpOnInstalling.2BAC8-StandaloneServer.line-18"></span><p class="line867">
<h1 id="HelpOnInstalling.2BAC8-StandaloneServer.Theflexibleway">The flexible way</h1>
<span class="anchor" id="HelpOnInstalling.2BAC8-StandaloneServer.line-19"></span><p class="line862">Instead of just running it like described above, you can of course move stuff to different places (see <a href="http://master18.moinmo.in/HelpOnInstalling/BasicInstallation">../BasicInstallation</a>, <a href="http://master18.moinmo.in/HelpOnInstalling/WikiInstanceCreation">../WikiInstanceCreation</a>). <span class="anchor" id="HelpOnInstalling.2BAC8-StandaloneServer.line-20"></span><span class="anchor" id="HelpOnInstalling.2BAC8-StandaloneServer.line-21"></span><p class="line862">You can then invoke the moin standalone server using the <tt class="backtick">moin</tt> scripting command: <span class="anchor" id="HelpOnInstalling.2BAC8-StandaloneServer.line-22"></span><span class="anchor" id="HelpOnInstalling.2BAC8-StandaloneServer.line-23"></span><p class="line867"><span class="anchor" id="HelpOnInstalling.2BAC8-StandaloneServer.line-24"></span><span class="anchor" id="HelpOnInstalling.2BAC8-StandaloneServer.line-25"></span><span class="anchor" id="HelpOnInstalling.2BAC8-StandaloneServer.line-26"></span><pre># for details and other options, see: moin server standalone --help
moin --config-dir=/etc/moin server standalone --docs=/usr/share/moin/htdocs</pre><span class="anchor" id="HelpOnInstalling.2BAC8-StandaloneServer.line-27"></span><span class="anchor" id="HelpOnInstalling.2BAC8-StandaloneServer.line-28"></span><p class="line874">Of course you have to give correct values that match your setup: <span class="anchor" id="HelpOnInstalling.2BAC8-StandaloneServer.line-29"></span><ul><li><p class="line891"><tt class="backtick">--config-dir</tt> gives the directory that contains your wikiconfig (or farmconfig). <span class="anchor" id="HelpOnInstalling.2BAC8-StandaloneServer.line-30"></span><ul><li><p class="line862">wikiconfig points to other important pathes, e.g. <tt class="backtick">data_dir</tt> and <tt class="backtick">underlay_dir</tt> <span class="anchor" id="HelpOnInstalling.2BAC8-StandaloneServer.line-31"></span></li></ul></li><li><p class="line891"><tt class="backtick">--docs</tt> gives the directory where moin finds the static files (css, imgs, etc.) <span class="anchor" id="HelpOnInstalling.2BAC8-StandaloneServer.line-32"></span><span class="anchor" id="HelpOnInstalling.2BAC8-StandaloneServer.line-33"></span></li></ul><p class="line862">If it does not find the <tt class="backtick">moin</tt> command: <span class="anchor" id="HelpOnInstalling.2BAC8-StandaloneServer.line-34"></span><ul><li><p class="line862">if you used <tt class="backtick">setup.py</tt> it should have copied it to <tt class="backtick">/usr(/local)/bin</tt> - check your PATH. <span class="anchor" id="HelpOnInstalling.2BAC8-StandaloneServer.line-35"></span></li><li><p class="line862">if you don't want to use <tt class="backtick">setup.py</tt> just write your own <tt class="backtick">moin</tt> command script: <span class="anchor" id="HelpOnInstalling.2BAC8-StandaloneServer.line-36"></span><span class="anchor" id="HelpOnInstalling.2BAC8-StandaloneServer.line-37"></span><span class="anchor" id="HelpOnInstalling.2BAC8-StandaloneServer.line-38"></span><span class="anchor" id="HelpOnInstalling.2BAC8-StandaloneServer.line-39"></span><span class="anchor" id="HelpOnInstalling.2BAC8-StandaloneServer.line-40"></span><span class="anchor" id="HelpOnInstalling.2BAC8-StandaloneServer.line-41"></span><span class="anchor" id="HelpOnInstalling.2BAC8-StandaloneServer.line-42"></span><span class="anchor" id="HelpOnInstalling.2BAC8-StandaloneServer.line-43"></span><pre>#Fix and uncomment those 2 lines if it doesn't find the MoinMoin package:
#import sys
#sys.path.insert(0, '/path/to/moin_code')
from MoinMoin.script.moin import run
run()</pre><span class="anchor" id="HelpOnInstalling.2BAC8-StandaloneServer.line-44"></span><span class="anchor" id="HelpOnInstalling.2BAC8-StandaloneServer.line-45"></span></li></ul><p class="line867"><img alt="(!)" height="16" src="http://static.moinmo.in/moin_static180/modernized/img/idea.png" title="(!)" width="16" /> If it crashes and tells it can't import <tt class="backtick">MoinMoin</tt>, then just uncomment and fix the <tt class="backtick">sys.path</tt> stuff you see above. <span class="anchor" id="HelpOnInstalling.2BAC8-StandaloneServer.line-46"></span><span class="anchor" id="HelpOnInstalling.2BAC8-StandaloneServer.line-47"></span><p class="line862">Now point your browser at <tt class="backtick">http://localhost:8080/</tt> (or whatever moin tells you). <span class="anchor" id="HelpOnInstalling.2BAC8-StandaloneServer.line-48"></span><span class="anchor" id="HelpOnInstalling.2BAC8-StandaloneServer.line-49"></span><p class="line862">If you want to run the moin process as a daemon, have a look at the <tt class="backtick">--start</tt>, <tt class="backtick">--stop</tt> and <tt class="backtick">--pidfile</tt> options. <span class="anchor" id="HelpOnInstalling.2BAC8-StandaloneServer.line-50"></span><span class="anchor" id="HelpOnInstalling.2BAC8-StandaloneServer.line-51"></span><p class="line867">
<h2 id="HelpOnInstalling.2BAC8-StandaloneServer.Servingport80onUnix">Serving port 80 on Unix</h2>
<span class="anchor" id="HelpOnInstalling.2BAC8-StandaloneServer.line-52"></span><span class="anchor" id="HelpOnInstalling.2BAC8-StandaloneServer.line-53"></span><p class="line862">On GNU/Linux, Mac OS X or other Posix like OS, you can serve the standard port 80 used for web serving, but you must start moin as <tt>root</tt> for this or redirect a port as <tt>root</tt>. <span class="anchor" id="HelpOnInstalling.2BAC8-StandaloneServer.line-54"></span><span class="anchor" id="HelpOnInstalling.2BAC8-StandaloneServer.line-55"></span><p class="line867">
<h3 id="HelpOnInstalling.2BAC8-StandaloneServer.A1stmethod.28recommended.29">1st method (recommended)</h3>
<span class="anchor" id="HelpOnInstalling.2BAC8-StandaloneServer.line-56"></span><span class="anchor" id="HelpOnInstalling.2BAC8-StandaloneServer.line-57"></span><p class="line874">Run standalone on port 8080 as described above and using iptables redirect all traffic from port 80 to 8080, <span class="anchor" id="HelpOnInstalling.2BAC8-StandaloneServer.line-58"></span>assuming your external ip adress is 10.0.0.1: <span class="anchor" id="HelpOnInstalling.2BAC8-StandaloneServer.line-59"></span><span class="anchor" id="HelpOnInstalling.2BAC8-StandaloneServer.line-60"></span><p class="line867"><span class="anchor" id="HelpOnInstalling.2BAC8-StandaloneServer.line-61"></span><span class="anchor" id="HelpOnInstalling.2BAC8-StandaloneServer.line-62"></span><pre>-A net_dnat -d 10.0.0.1/32 -p tcp -m tcp --dport 80 -j DNAT --to-destination 10.0.0.1:8080</pre><span class="anchor" id="HelpOnInstalling.2BAC8-StandaloneServer.line-63"></span><span class="anchor" id="HelpOnInstalling.2BAC8-StandaloneServer.line-64"></span><p class="line867">
<h3 id="HelpOnInstalling.2BAC8-StandaloneServer.A2ndmethod.28notrecommended.29">2nd method (not recommended)</h3>
<span class="anchor" id="HelpOnInstalling.2BAC8-StandaloneServer.line-65"></span><span class="anchor" id="HelpOnInstalling.2BAC8-StandaloneServer.line-66"></span><p class="line862">Set <tt>port</tt> to 80, and verify that <tt>user</tt> and <tt>group</tt> exists on your system. If not, set them to an existing user, meant for web serving. If needed, <tt>chown</tt> your wiki dir to this user and group. <span class="anchor" id="HelpOnInstalling.2BAC8-StandaloneServer.line-67"></span><span class="anchor" id="HelpOnInstalling.2BAC8-StandaloneServer.line-68"></span><p class="line867">
<h2 id="HelpOnInstalling.2BAC8-StandaloneServer.StandaloneServerconfiguration">Standalone Server configuration</h2>
<span class="anchor" id="HelpOnInstalling.2BAC8-StandaloneServer.line-69"></span><span class="anchor" id="HelpOnInstalling.2BAC8-StandaloneServer.line-70"></span><p class="line862">Alternatively to giving parameters by commandline options, you can also have a <tt class="backtick">wikiserverconfig.py</tt> and specify your stuff in a <tt class="backtick">Config</tt> class there. See the example file in the toplevel directory. <span class="anchor" id="HelpOnInstalling.2BAC8-StandaloneServer.line-71"></span><span class="anchor" id="HelpOnInstalling.2BAC8-StandaloneServer.line-72"></span><div><table><tbody><tr>  <td><p class="line862"> <strong>Option</strong> </td>
  <td><p class="line862"> <strong>Default</strong> </td>
  <td><p class="line862"> <strong>Comment</strong> </td>
</tr>
<tr>  <td><span class="anchor" id="HelpOnInstalling.2BAC8-StandaloneServer.line-73"></span><p class="line862"> name </td>
  <td><p class="line862"> <tt>'moin'</tt> </td>
  <td><p class="line862"> Server name, used by default for log and pid files. </td>
</tr>
<tr>  <td><span class="anchor" id="HelpOnInstalling.2BAC8-StandaloneServer.line-74"></span><p class="line862"> docs </td>
  <td><p class="line862"> <tt>'/usr/share/moin/wiki/htdocs'</tt> </td>
  <td><p class="line862"> Path to moin shared files. If you used <tt class="backtick">--prefix</tt> install, the default path will not work, and you must set the path to <tt>'PREFIX/share/moin/wiki/htdocs'</tt>. </td>
</tr>
<tr>  <td><span class="anchor" id="HelpOnInstalling.2BAC8-StandaloneServer.line-75"></span><p class="line862"> user </td>
  <td><p class="line862"> <tt>'www-data'</tt> </td>
  <td><p class="line862"> If you run as root, the server will run with as this user </td>
</tr>
<tr>  <td><span class="anchor" id="HelpOnInstalling.2BAC8-StandaloneServer.line-76"></span><p class="line862"> group </td>
  <td><p class="line862"> <tt>'www-data'</tt> </td>
  <td><p class="line862"> If you run as root, the server will run with as this group </td>
</tr>
<tr>  <td><span class="anchor" id="HelpOnInstalling.2BAC8-StandaloneServer.line-77"></span><p class="line862"> port </td>
  <td><p class="line862"> <tt>8000</tt> </td>
  <td><p class="line862"> Port to serve. To serve privileged port under 1024 you will have to run as root </td>
</tr>
<tr>  <td><span class="anchor" id="HelpOnInstalling.2BAC8-StandaloneServer.line-78"></span><p class="line862"> interface </td>
  <td><p class="line862"> <tt>'localhost'</tt> </td>
  <td><p class="line862"> The interface the server will listen to. The default will listen only to localhost. Set to <tt>''</tt> to listen to all.</td>
</tr>
<tr>  <td><span class="anchor" id="HelpOnInstalling.2BAC8-StandaloneServer.line-79"></span><p class="line862"> serverClass </td>
  <td><p class="line862"> <tt>'ThreadPoolServer'</tt>, <tt>'ThreadingServer'</tt>, <tt>'ForkingServer'</tt>, <tt>'SimpleServer'</tt>, <tt>'SecureThreadPoolServer'</tt> </td>
  <td><p class="line862"> The server type to use, see the comments in the <tt>moin.py</tt>. The default is <tt>'ThreadPoolServer'</tt>, which create a pool of threads and reuse them for new connections. </td>
</tr>
<tr>  <td><span class="anchor" id="HelpOnInstalling.2BAC8-StandaloneServer.line-80"></span><p class="line862"> threadLimit </td>
  <td><p class="line862"> <tt>10</tt> </td>
  <td><p class="line862"> How many threads to create. </td>
</tr>
<tr>  <td><span class="anchor" id="HelpOnInstalling.2BAC8-StandaloneServer.line-81"></span><p class="line862"> requestQueueSize </td>
  <td><p class="line862"> <tt>50</tt> </td>
  <td><p class="line862"> The count of socket connection requests that are buffered by the operating system. </td>
</tr>
<tr>  <td><span class="anchor" id="HelpOnInstalling.2BAC8-StandaloneServer.line-82"></span><p class="line862"> properties </td>
  <td><p class="line862"> <tt>&nbsp;{}&nbsp;</tt> </td>
  <td><p class="line862"> allow overriding any request property by setting the value in this dict e.g <tt>properties&nbsp;=&nbsp;{'script_name':&nbsp;'/mywiki'</tt>}. </td>
</tr>
<tr>  <td><span class="anchor" id="HelpOnInstalling.2BAC8-StandaloneServer.line-83"></span><p class="line862"> ssl_privkey </td>
  <td><p class="line862"> <tt>&nbsp;None&nbsp;</tt> </td>
  <td><p class="line862"> If using the <a class="nonexistent" href="http://master18.moinmo.in/SecureThreadPoolServer">SecureThreadPoolServer</a>, this must point to the server's private key. </td>
</tr>
<tr>  <td><span class="anchor" id="HelpOnInstalling.2BAC8-StandaloneServer.line-84"></span><p class="line862"> ssl_certificate </td>
  <td><p class="line862"> <tt>&nbsp;None&nbsp;</tt> </td>
  <td><p class="line862"> If using the <a class="nonexistent" href="http://master18.moinmo.in/SecureThreadPoolServer">SecureThreadPoolServer</a>, this must point to the server's certificate. </td>
</tr>
</tbody></table></div><span class="anchor" id="HelpOnInstalling.2BAC8-StandaloneServer.line-85"></span><span class="anchor" id="HelpOnInstalling.2BAC8-StandaloneServer.line-86"></span><ul><li style="list-style-type:none"><p class="line891"><img alt="(!)" height="16" src="http://static.moinmo.in/moin_static180/modernized/img/idea.png" title="(!)" width="16" /> There may be more options useful to moin developers, see the comments in <tt>moin.py</tt> <span class="anchor" id="HelpOnInstalling.2BAC8-StandaloneServer.line-87"></span><span class="anchor" id="HelpOnInstalling.2BAC8-StandaloneServer.line-88"></span></li></ul><p class="line867">
<h2 id="HelpOnInstalling.2BAC8-StandaloneServer.Configuringwikiconfig.py">Configuring wikiconfig.py</h2>
<span class="anchor" id="HelpOnInstalling.2BAC8-StandaloneServer.line-89"></span><span class="anchor" id="HelpOnInstalling.2BAC8-StandaloneServer.line-90"></span><p class="line874">The sample config file should be just fine. <span class="anchor" id="HelpOnInstalling.2BAC8-StandaloneServer.line-91"></span><span class="anchor" id="HelpOnInstalling.2BAC8-StandaloneServer.line-92"></span><p class="line862">The default value of <tt class="backtick">url_prefix_static</tt> is hardcoded into the standalone server script, do not change it or it won't work! <span class="anchor" id="HelpOnInstalling.2BAC8-StandaloneServer.line-93"></span><span class="anchor" id="HelpOnInstalling.2BAC8-StandaloneServer.line-94"></span><p class="line867">
<h2 id="HelpOnInstalling.2BAC8-StandaloneServer.Usingthesecurestandaloneserver">Using the secure standalone server</h2>
<span class="anchor" id="HelpOnInstalling.2BAC8-StandaloneServer.line-95"></span><span class="anchor" id="HelpOnInstalling.2BAC8-StandaloneServer.line-96"></span><p class="line862">The standalone server supports SSL when using the <a class="nonexistent" href="http://master18.moinmo.in/SecureThreadPoolServer">SecureThreadPoolServer</a> server class. The SSL support is provided by the <a class="http" href="http://trevp.net/tlslite/">TLSLite library</a>. <strong>All wiki traffic is forced to SSL when using the <a class="nonexistent" href="http://master18.moinmo.in/SecureThreadPoolServer">SecureThreadPoolServer</a></strong>.  <span class="anchor" id="HelpOnInstalling.2BAC8-StandaloneServer.line-97"></span><span class="anchor" id="HelpOnInstalling.2BAC8-StandaloneServer.line-98"></span><p class="line862">Two additional configuration options are required when using the <a class="nonexistent" href="http://master18.moinmo.in/SecureThreadPoolServer">SecureThreadPoolServer</a>. First, <tt class="backtick">ssl_privkey</tt> must point to the server's private key. Second, <tt class="backtick">ssl_certificate</tt> must point to the server's certificate.  <span class="anchor" id="HelpOnInstalling.2BAC8-StandaloneServer.line-99"></span><span class="anchor" id="HelpOnInstalling.2BAC8-StandaloneServer.line-100"></span><p class="line867"><img alt="/!\" height="16" src="http://static.moinmo.in/moin_static180/modernized/img/alert.png" title="/!\" width="16" /> <em>TLSLite does not support a password protected private key unless additional libraries are used. Consult the TLSLite webpage for more information.</em> <span class="anchor" id="HelpOnInstalling.2BAC8-StandaloneServer.line-101"></span><span class="anchor" id="HelpOnInstalling.2BAC8-StandaloneServer.line-102"></span><p class="line862">Typically a certificate would be purchased from an certificate authority, such as Thawte (<a class="http" href="http://www.thawte.com">http://www.thawte.com</a>). However, since the suggested usage of the standalone server is for personal use, a self signed certificate may be appropriate. For more information on how to generate a server private key, and a self signed certificate, see the <a class="http" href="http://www.openssl.org/docs/HOWTO/">openssl HOWTO pages</a>. <span class="anchor" id="HelpOnInstalling.2BAC8-StandaloneServer.line-103"></span><span class="anchor" id="HelpOnInstalling.2BAC8-StandaloneServer.line-104"></span><p class="line874">For example, to create the server's private key, run the following: <span class="anchor" id="HelpOnInstalling.2BAC8-StandaloneServer.line-105"></span><span class="anchor" id="HelpOnInstalling.2BAC8-StandaloneServer.line-106"></span><p class="line867"><tt class="backtick">openssl&nbsp;genrsa&nbsp;-out&nbsp;privkey.pem&nbsp;2048</tt> <span class="anchor" id="HelpOnInstalling.2BAC8-StandaloneServer.line-107"></span><span class="anchor" id="HelpOnInstalling.2BAC8-StandaloneServer.line-108"></span><p class="line874">To create a self signed certificate for the newly created private key, run the following: <span class="anchor" id="HelpOnInstalling.2BAC8-StandaloneServer.line-109"></span><span class="anchor" id="HelpOnInstalling.2BAC8-StandaloneServer.line-110"></span><p class="line867"><tt class="backtick">openssl&nbsp;req&nbsp;-new&nbsp;-x509&nbsp;-key&nbsp;privkey.pem&nbsp;-out&nbsp;cacert.pem&nbsp;-days&nbsp;1095</tt> <span class="anchor" id="HelpOnInstalling.2BAC8-StandaloneServer.line-111"></span><span class="anchor" id="HelpOnInstalling.2BAC8-StandaloneServer.line-112"></span><p class="line862">moin.py then needs to be told about the generated files <tt class="backtick">privkey.pem</tt> and <tt class="backtick">cacert.pem</tt>. For the example above, the following lines would need to be added to moin.py: <span class="anchor" id="HelpOnInstalling.2BAC8-StandaloneServer.line-113"></span><span class="anchor" id="HelpOnInstalling.2BAC8-StandaloneServer.line-114"></span><p class="line867"><span class="anchor" id="HelpOnInstalling.2BAC8-StandaloneServer.line-115"></span><span class="anchor" id="HelpOnInstalling.2BAC8-StandaloneServer.line-116"></span><span class="anchor" id="HelpOnInstalling.2BAC8-StandaloneServer.line-117"></span><pre>    ssl_privkey = "/secure/path/to/privkey.pem"
    ssl_certificate = "/secure/path/to/cacert.pem"</pre><span class="anchor" id="HelpOnInstalling.2BAC8-StandaloneServer.line-118"></span><span class="anchor" id="HelpOnInstalling.2BAC8-StandaloneServer.line-119"></span><p class="line867"><img alt="/!\" height="16" src="http://static.moinmo.in/moin_static180/modernized/img/alert.png" title="/!\" width="16" /> Using a self signed certificate will cause your browser to generate a warning that it cannot verify the identify of the wiki server. This is because the certificate was not signed by a recognized certificate authority (CA). In order to get rid of this warning, you must purchase a certificate from a CA. <span class="anchor" id="HelpOnInstalling.2BAC8-StandaloneServer.line-120"></span><span class="anchor" id="HelpOnInstalling.2BAC8-StandaloneServer.bottom"></span></div> <span class="anchor" id="line-66"></span><hr class="hr2" /><p class="line874"> <span class="anchor" id="line-67"></span><span class="anchor" id="macosx-install"></span> <span class="anchor" id="line-68"></span>
<h1>Mac OS X Installation using Apache</h1>
<div dir="ltr" id="HelpOnInstalling.2BAC8-ApacheOnMacOsx.content" lang="en"><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnMacOsx.top"></span>
<span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnMacOsx.line-8"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnMacOsx.line-9"></span><p class="line874">These instructions will walk you through, step by step, setting up Moin on Mac OS X <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnMacOsx.line-10"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnMacOsx.line-11"></span><p class="line867"><div class="table-of-contents"><p class="table-of-contents-heading">Contents<ol><li>
<a href="#HelpOnInstalling.2BAC8-ApacheOnMacOsx.SystemRequirements.26Preparation">System Requirements &amp; Preparation</a></li><li>
<a href="#HelpOnInstalling.2BAC8-ApacheOnMacOsx.Installation">Installation</a><ol><li>
<a href="#HelpOnInstalling.2BAC8-ApacheOnMacOsx.InstallingMoinMoin">Installing MoinMoin</a></li></ol></li><li>
<a href="#HelpOnInstalling.2BAC8-ApacheOnMacOsx.Configuration">Configuration</a><ol><li>
<a href="#HelpOnInstalling.2BAC8-ApacheOnMacOsx.CreatingaWikiInstance">Creating a Wiki Instance</a></li><li>
<a href="#HelpOnInstalling.2BAC8-ApacheOnMacOsx.ConfiguringApachehttpd.conf">Configuring Apache httpd.conf</a></li><li>
<a href="#HelpOnInstalling.2BAC8-ApacheOnMacOsx.Configuringmoin.cgi">Configuring moin.cgi</a></li><li>
<a href="#HelpOnInstalling.2BAC8-ApacheOnMacOsx.Configuringwikiconfig.py">Configuring wikiconfig.py</a></li><li>
<a href="#HelpOnInstalling.2BAC8-ApacheOnMacOsx.SettingPermissions">Setting Permissions</a></li></ol></li><li>
<a href="#HelpOnInstalling.2BAC8-ApacheOnMacOsx.TestingYourNewWiki">Testing Your New Wiki</a></li></ol></li></ol></div><p class="line874"> <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnMacOsx.line-12"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnMacOsx.line-13"></span><ul><li style="list-style-type:none"><div><table><tbody><tr>  <td style="text-align: center; ; background-color: #ffffcc"><p class="line862"> Apple's latest operating system, 10.5 Leopard, packs enough under-hood changes that, rather than a bunch of if/then instructions, going forward this page will be updated only for Leopard.  If you have an older system (Tiger or Panther) you can click 'info' and view revision 45 for hints for those operating systems. </td>
</tr>
</tbody></table></div><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnMacOsx.line-14"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnMacOsx.line-15"></span></li></ul><p class="line867">
<h2 id="HelpOnInstalling.2BAC8-ApacheOnMacOsx.SystemRequirements.26Preparation">System Requirements &amp; Preparation</h2>
<span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnMacOsx.line-16"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnMacOsx.line-17"></span><p class="line874">MacOS 10.5 Leopard includes the latest version of Python, version 2.5.1. (Older versions 10.4-Tiger and 10.3-Panther include the minimum required versions of Python to run Moin without updating, 2.3.5 and 2.3 respectively). <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnMacOsx.line-18"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnMacOsx.line-19"></span><p class="line867">MoinMoin installation requires the use of the Terminal and assumes you have a basic familiarity with commands and syntax.  When you read commandline mentioned below, assume that you will enter these commands using the Terminal.app (located in /Applications/Utilities/Terminal.app). <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnMacOsx.line-20"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnMacOsx.line-21"></span><p class="line862">Make sure Apache is started ('Apple' menu &gt; 'System Preferences...' &gt; 'Sharing' panel &gt; and check "Personal Web Sharing") <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnMacOsx.line-22"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnMacOsx.line-23"></span><p class="line867"><hr /><p class="line874"> <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnMacOsx.line-24"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnMacOsx.line-25"></span><p class="line867">
<h2 id="HelpOnInstalling.2BAC8-ApacheOnMacOsx.Installation">Installation</h2>
<span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnMacOsx.line-26"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnMacOsx.line-27"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnMacOsx.line-28"></span><p class="line867">
<h3 id="HelpOnInstalling.2BAC8-ApacheOnMacOsx.InstallingMoinMoin">Installing MoinMoin</h3>
<span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnMacOsx.line-29"></span><ol type="1"><li><p class="line891"><strong>Download MoinMoin</strong> <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnMacOsx.line-30"></span><ul><li><p class="line862">The most current version is here: <a class="interwiki" href="http://moinmo.in/MoinMoinDownload" title="MoinMoin">MoinMoinDownload</a> <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnMacOsx.line-31"></span></li></ul></li><li><p class="line891"><strong>Expand the archive</strong> <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnMacOsx.line-32"></span><ul><li><p class="line862">Double-click to expand the <tt>moin-X.X.tar.gz</tt> archive.  <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnMacOsx.line-33"></span></li><li><p class="line862">You should then have a folder such as <tt>moin-x.x</tt> where "x.x" is the current release number. This folder will contain a <tt>setup.py</tt> file in addition to several other files and subfolders. Optionally, you may want to move the expanded <tt>moin-X.X</tt> folder to a location more convenient to work from, like into a <tt>temp</tt> folder the root of your hard drive. <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnMacOsx.line-34"></span></li></ul></li><li><p class="line891"><strong>Run Setup.py from the commandline</strong> <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnMacOsx.line-35"></span><ul><li><p class="line862">Open Terminal.app and enter the commands: <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnMacOsx.line-36"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnMacOsx.line-37"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnMacOsx.line-38"></span><pre>sudo -s
password:</pre><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnMacOsx.line-39"></span></li><li><p class="line862">Now you have root privileges in this shell (note: the prompt will change from a $ to a #). To install, type: <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnMacOsx.line-40"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnMacOsx.line-41"></span><pre>cd /temp/moin-1.6</pre><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnMacOsx.line-42"></span></li><li><p class="line891"><img alt="(!)" height="16" src="http://static.moinmo.in/moin_static180/modernized/img/idea.png" title="(!)" width="16" /> <strong>Important: </strong>Now you have to decide where you want to install your Moin wiki installation; this will be your wiki root folder. Unix traditionalists will install this into <tt>/usr/local</tt> because of long standing unix conventions.  However, on Mac, this and other unix folders are typically hidden from the Finder. So, you may want to install outside this folder where you can more easily manage the files (such as drag-copy backups, editing config files using TextEdit.app, etc).  In the examples below, Moin is installed in a folder on the root of your hard drive named <tt>/moinwiki</tt>. If you want to follow unix conventions, simply substitute <tt>/usr/local</tt> for <tt>/moinwiki</tt> in all the examples below. <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnMacOsx.line-43"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnMacOsx.line-44"></span><pre>python setup.py install --install-data='/moinwiki'</pre><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnMacOsx.line-45"></span></li><li><p class="line862">The <tt>--install-data='/moinwiki'</tt> argument tells the setup script where to put the data.  In this case, it will create a folder on the root of your hard drive called 'moinwiki'. <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnMacOsx.line-46"></span></li><li><p class="line891"><img alt="(!)" height="16" src="http://static.moinmo.in/moin_static180/modernized/img/idea.png" title="(!)" width="16" /> <strong>Note:</strong> 'moinwiki' may seem like an odd name, but there are a number 'moin' folders created, so I use 'moinwiki' to distinguish this folder from the others.  You can of course name it anything you like. <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnMacOsx.line-47"></span></li><li><p class="line891"><img alt="&lt;!&gt;" height="16" src="http://static.moinmo.in/moin_static180/modernized/img/attention.png" title="&lt;!&gt;" width="16" /> <strong>Security warning:</strong> Your wiki should not be in the "Sites" folder of your home folder, or in the /Library/!WebServer/Documents (Apache root) folder. Do not put your wiki folder where the web server can access it! <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnMacOsx.line-48"></span></li></ul></li><li><p class="line891"><strong>Add yourself access privileges for moinwiki</strong>  <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnMacOsx.line-49"></span></li><li style="list-style-type:none"><p class="line862">Apple tightened security in 10.5 Leopard. We want to add our username to the <tt>moinwiki</tt> folder so that it's easier to work with.   <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnMacOsx.line-50"></span><ol type="i"><li>right-click (control-click) on the moinwiki folder, and select "Get Info...". <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnMacOsx.line-51"></span></li><li>click the lock icon in the lower-right corner, enter your password to unlock. <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnMacOsx.line-52"></span></li><li>click the + icon to add a new user, from the dialog select your username. <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnMacOsx.line-53"></span></li><li><p class="line862">change your privileges to "Read &amp; Write" <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnMacOsx.line-54"></span></li><li>click the gear icon and select "Apply to enclosed items". <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnMacOsx.line-55"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnMacOsx.line-56"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnMacOsx.line-57"></span></li></ol></li></ol><p class="line874">The installation portion is now finished. <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnMacOsx.line-58"></span><hr /><p class="line874"> <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnMacOsx.line-59"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnMacOsx.line-60"></span><p class="line867">
<h2 id="HelpOnInstalling.2BAC8-ApacheOnMacOsx.Configuration">Configuration</h2>
<span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnMacOsx.line-61"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnMacOsx.line-62"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnMacOsx.line-63"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnMacOsx.line-64"></span><p class="line862">You are now ready to create a wiki instance! The following instructions will create a wiki called "mywiki". You may replace the name <tt>mywiki</tt> with almost any name you wish, but do not use <tt>wiki</tt> because that is used by MoinMoin for loading standard images and style sheets. Although this can be changed later, the name you choose for <tt>mywiki</tt> will become part of the url used to access your site, e.g. <tt>http://server.myorganization.org/mywiki/FrontPage</tt>. <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnMacOsx.line-65"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnMacOsx.line-66"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnMacOsx.line-67"></span><p class="line867">
<h3 id="HelpOnInstalling.2BAC8-ApacheOnMacOsx.CreatingaWikiInstance">Creating a Wiki Instance</h3>
<span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnMacOsx.line-68"></span><p class="line874">We now want to create our own wiki instance and copy in a default set of templates and files. Do these commands: <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnMacOsx.line-69"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnMacOsx.line-70"></span><p class="line867"><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnMacOsx.line-71"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnMacOsx.line-72"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnMacOsx.line-73"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnMacOsx.line-74"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnMacOsx.line-75"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnMacOsx.line-76"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnMacOsx.line-77"></span><pre>cd /moinwiki/share/moin
mkdir mywiki
cp -r data mywiki
cp -r underlay mywiki
cp server/moin.cgi mywiki
cp config/wikiconfig.py mywiki</pre><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnMacOsx.line-78"></span><p class="line862">You can repeat these steps for creating multiple instances, run these same commands again, substituting <tt>mywiki2</tt> for <tt>mywiki</tt>. <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnMacOsx.line-79"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnMacOsx.line-80"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnMacOsx.line-81"></span><p class="line867">
<h3 id="HelpOnInstalling.2BAC8-ApacheOnMacOsx.ConfiguringApachehttpd.conf">Configuring Apache httpd.conf</h3>
<span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnMacOsx.line-82"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnMacOsx.line-83"></span><p class="line874">Apple upgraded Apache to 2.2 in Leopard, which (among other things) brings tighter security controls than previous versions.  <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnMacOsx.line-84"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnMacOsx.line-85"></span><ol type="1"><li><p class="line891"><strong>Add yourself access privileges for apache2</strong> <em>(alternatively, if you're comfortable with commandline (Terminal.app), you can bypass these steps and use <tt>sudo</tt> and <tt>pico</tt> instead)</em> <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnMacOsx.line-86"></span><ol type="i"><li><p class="line862">From the Finder, under the 'Go' menu, select "Go to folder..." and type <tt>/etc</tt>.  <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnMacOsx.line-87"></span></li><li>right-click (control-click) on the apache2 folder, and select "Get Info...". <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnMacOsx.line-88"></span></li><li>click the lock icon in the lower-right corner, enter your password to unlock. <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnMacOsx.line-89"></span></li><li>click the + icon to add a new user, from the dialog select your username. <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnMacOsx.line-90"></span></li><li><p class="line862">change your privileges to "Read &amp; Write" <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnMacOsx.line-91"></span></li><li>click the gear icon and select "Apply to enclosed items". <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnMacOsx.line-92"></span></li></ol></li><li><p class="line891"><strong>Edit Apache's configuration file, httpd.conf</strong> <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnMacOsx.line-93"></span><ol type="i"><li><p class="line862">From the Finder, under the 'Go' menu, select "Go to folder..." and type <tt>/etc/Apache2</tt>.  Drag the <em>httpd.conf</em> file onto TextEdit.app. <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnMacOsx.line-94"></span></li><li><p class="line862">Go to the end of the Aliases section and edit like the example below: <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnMacOsx.line-95"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnMacOsx.line-96"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnMacOsx.line-97"></span><pre>    Alias /moin_static160/   "/moinwiki/share/moin/htdocs/"
    ScriptAlias /mywiki      "/moinwiki/share/moin/mywiki/moin.cgi"</pre><p class="line862"> Add the following to allow Apache to access your <tt>moinwiki</tt> directory (see <a class="http" href="http://httpd.apache.org/docs/2.2/mod/core.html#options">http://httpd.apache.org/docs/2.2/mod/core.html#options</a> for more help): <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnMacOsx.line-98"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnMacOsx.line-99"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnMacOsx.line-100"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnMacOsx.line-101"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnMacOsx.line-102"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnMacOsx.line-103"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnMacOsx.line-104"></span><pre>&lt;Directory "/moinwiki"&gt;
    Options Indexes FollowSymLinks MultiViews
    AllowOverride None
    Order allow,deny
    Allow from all
&lt;/Directory&gt;</pre><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnMacOsx.line-105"></span></li><li>Save changes <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnMacOsx.line-106"></span></li><li>Restart Apache - <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnMacOsx.line-107"></span><ul><li>open System Preferences, go to the Sharing page, select "Personal Web Sharing" and click "Stop" then "Start". <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnMacOsx.line-108"></span></li><li><p class="line862">Alternatively, from Terminal.app, type <tt>apachectl&nbsp;graceful</tt>. <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnMacOsx.line-109"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnMacOsx.line-110"></span></li></ul></li></ol></li></ol><p class="line867">
<h3 id="HelpOnInstalling.2BAC8-ApacheOnMacOsx.Configuringmoin.cgi">Configuring moin.cgi</h3>
<span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnMacOsx.line-111"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnMacOsx.line-112"></span><p class="line862">The <em>moin.cgi</em> file essentially tells Apache to run all the moin wiki pages through the python interpreter.  <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnMacOsx.line-113"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnMacOsx.line-114"></span><ol type="1"><li><p class="line862">Edit the moin.cgi file at the following path <tt>/moinwiki/share/moin/mywiki/moin.cgi</tt> (click-drag the file onto TextEdit.app). Change the line that points to your wikiconfig.py file, like in the example below. <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnMacOsx.line-115"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnMacOsx.line-116"></span><pre>sys.path.insert(0, '/moinwiki/share/moin/mywiki/wikiconfig.py')</pre><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnMacOsx.line-117"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnMacOsx.line-118"></span></li><dt>What to do if you get an "Internal Server Error"</dt><dd>This most likely means that the pathname above is not correct. <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnMacOsx.line-119"></span></dd><dt></dt><dd><p class="line862">You can test your pathname by opening Terminal.app and pasting in the above line without the shebang <tt>#!</tt> statement (using the above example, <tt>/Library/Frameworks/Python.framework/Versions/2.5/bin/Python</tt>. If the path is correct, you should see output indicating your Python version as well as sample commands such as "help", "copyright", "credits", etc. If you get the error "Bad executable (or shared library)" or "No such file or directory" then the path is likely wrong, and you will need to correct.  I've also noticed that it helps to point directly at the "python" executable, rather than the alias or symlinks found in the upper directories. <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnMacOsx.line-120"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnMacOsx.line-121"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnMacOsx.line-122"></span></dd></ol><p class="line867">
<h3 id="HelpOnInstalling.2BAC8-ApacheOnMacOsx.Configuringwikiconfig.py">Configuring wikiconfig.py</h3>
<span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnMacOsx.line-123"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnMacOsx.line-124"></span><p class="line862">Open <tt>wikiconfig.py</tt> (click-drag the file onto TextEdit.app) and read the comments. The wiki you created is a new "Untitled Wiki", using the default configuration. You want to give a better name and setup some configuration values.  <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnMacOsx.line-125"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnMacOsx.line-126"></span><ul><li style="list-style-type:none"><p class="line891"><img alt="(!)" height="16" src="http://static.moinmo.in/moin_static180/modernized/img/idea.png" title="(!)" width="16" /> Note that the file belongs to user and group www:www. You can edit the file as root, or change the group of the file to yourself with <tt>chown&nbsp;www:username&nbsp;wikiconfig.py</tt>. <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnMacOsx.line-127"></span></li></ul><p class="line862">Edit <tt>/moinwiki/share/moin/mywiki/wikiconfig.py</tt> and change the <tt>sitename</tt> to the name of your wiki: <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnMacOsx.line-128"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnMacOsx.line-129"></span><p class="line867"><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnMacOsx.line-130"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnMacOsx.line-131"></span><pre>    sitename = 'My Mac Wiki'</pre><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnMacOsx.line-132"></span><p class="line862">Additionally, set <tt>data_dir</tt> and <tt>data_underlay_dir</tt> to the absolute paths of the particular directories. You can use relative paths for the directories, but note that they are relative to the CGI script, not the configuration file! Better to <strong>use absolute paths</strong>, and save yourself some headaches: <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnMacOsx.line-133"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnMacOsx.line-134"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnMacOsx.line-135"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnMacOsx.line-136"></span><pre>    data_dir = r'/moinwiki/share/moin/mywiki/data'
    data_underlay_dir = r'/moinwiki/share/moin/mywiki/underlay'</pre><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnMacOsx.line-137"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnMacOsx.line-138"></span><p class="line862">Uncomment the <tt>url_prefix_static</tt> line: <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnMacOsx.line-139"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnMacOsx.line-140"></span><pre>    url_prefix_static = '/moin_static160'</pre><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnMacOsx.line-141"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnMacOsx.line-142"></span><p class="line862">For a public installation, you'll normally want to forbid some of the more dangerous actions. Add a line like this to <tt>wikiconfig.py</tt>: <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnMacOsx.line-143"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnMacOsx.line-144"></span><p class="line867"><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnMacOsx.line-145"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnMacOsx.line-146"></span><pre>    actions_excluded = ['AttachFile', 'DeletePage', 'RenamePage', ]</pre><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnMacOsx.line-147"></span><p class="line862">Additional configuration details can be found in <a href="http://master18.moinmo.in/HelpOnConfiguration">HelpOnConfiguration</a>. <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnMacOsx.line-148"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnMacOsx.line-149"></span><p class="line867">
<h3 id="HelpOnInstalling.2BAC8-ApacheOnMacOsx.SettingPermissions">Setting Permissions</h3>
<span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnMacOsx.line-150"></span><p class="line862">You have to make the web server the owner of the files in your wiki. Navigate to <tt>/moinwiki/share/moin/</tt> and run the following commands: <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnMacOsx.line-151"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnMacOsx.line-152"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnMacOsx.line-153"></span><pre>chown -R www:www mywiki
chmod -R 744 mywiki</pre><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnMacOsx.line-154"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnMacOsx.line-155"></span><p class="line867"><hr /><p class="line874"> <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnMacOsx.line-156"></span>
<h2 id="HelpOnInstalling.2BAC8-ApacheOnMacOsx.TestingYourNewWiki">Testing Your New Wiki</h2>
<span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnMacOsx.line-157"></span><p class="line862">In a web-browser surf to the site: <a class="http" href="http://localhost/mywiki">http://localhost/mywiki</a> You should see the FrontPage of your new wiki. <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnMacOsx.line-158"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnMacOsx.line-159"></span><p class="line862">Now run the unit tests, to make sure everything is fine. Go to this address: <a class="http" href="http://localhost/mywiki?action=test">http://localhost/mywiki?action=test</a> <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnMacOsx.line-160"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnMacOsx.bottom"></span></div> <span class="anchor" id="line-69"></span><hr class="hr1" /><p class="line874"> <span class="anchor" id="line-70"></span><span class="anchor" id="win32apache-install"></span> <span class="anchor" id="line-71"></span>
<h1>Windows Installation using Apache</h1>
<div dir="ltr" id="HelpOnInstalling.2BAC8-ApacheOnWin32.content" lang="en"><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnWin32.top"></span>
<span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnWin32.line-8"></span><ul><li style="list-style-type:none"><p class="line891"><div class="table-of-contents"><p class="table-of-contents-heading">Contents<ol><li>
<a href="#HelpOnInstalling.2BAC8-ApacheOnWin32.SystemRequirements.26Preparation">System Requirements &amp; Preparation</a></li><li>
<a href="#HelpOnInstalling.2BAC8-ApacheOnWin32.Installation">Installation</a><ol><li>
<a href="#HelpOnInstalling.2BAC8-ApacheOnWin32.InstallingApache">Installing Apache</a></li><li>
<a href="#HelpOnInstalling.2BAC8-ApacheOnWin32.InstallingPython">Installing Python</a></li><li>
<a href="#HelpOnInstalling.2BAC8-ApacheOnWin32.InstallingMoinMoin">Installing MoinMoin</a></li></ol></li><li>
<a href="#HelpOnInstalling.2BAC8-ApacheOnWin32.Configuration">Configuration</a><ol><li>
<a href="#HelpOnInstalling.2BAC8-ApacheOnWin32.CreatingaWikiInstance">Creating a Wiki Instance</a></li><li>
<a href="#HelpOnInstalling.2BAC8-ApacheOnWin32.Configuringwikiconfig.py">Configuring wikiconfig.py</a></li><li>
<a href="#HelpOnInstalling.2BAC8-ApacheOnWin32.Configuringmoin.cgi">Configuring moin.cgi</a></li><li>
<a href="#HelpOnInstalling.2BAC8-ApacheOnWin32.ConfiguringApachehttpd.conf">Configuring Apache httpd.conf</a></li></ol></li><li>
<a href="#HelpOnInstalling.2BAC8-ApacheOnWin32.Troubleshooting">Troubleshooting</a></li><li>
<a href="#HelpOnInstalling.2BAC8-ApacheOnWin32.NextSteps">Next Steps</a><ol><li>
<a href="#HelpOnInstalling.2BAC8-ApacheOnWin32.AuthenticatingMoinMoinUsersAgainstaDomainController">Authenticating MoinMoin Users Against a Domain Controller</a></li><li>
<a href="#HelpOnInstalling.2BAC8-ApacheOnWin32.SimpleWindowsMoinMoinBackup">Simple Windows MoinMoin Backup</a></li><li>
<a href="#HelpOnInstalling.2BAC8-ApacheOnWin32.FastCGIwithWindows">FastCGI with Windows</a></li></ol></li></ol></li></ol></div> <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnWin32.line-9"></span></li></ul><p class="line867">
<h2 id="HelpOnInstalling.2BAC8-ApacheOnWin32.SystemRequirements.26Preparation">System Requirements &amp; Preparation</h2>
<span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnWin32.line-10"></span><p class="line862">Before you install MoinMoin, you must have the necessary infrastructure in place. This procedure explains the steps necessary to install the infrastructure and provides detailed instructions for the installation of MoinMoin. <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnWin32.line-11"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnWin32.line-12"></span><ul><li><p class="line891"><strong>Windows 2000, XP, or greater </strong>(including server variants, such as Windows 2000 Server). <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnWin32.line-13"></span><ul><li><p class="line862">Earlier versions of Windows (such as Win98 or WinME) are <span class="u"><em>not</em></span> recommended due to their obsolete and poor-performing multiple-process handling. WinNT is obsolete and Microsoft has officially dropped support for it and should not be considered a safe server platform for the Internet. <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnWin32.line-14"></span></li><li>Run Windows Update to ensure that you are running the latest service packs and security patches. <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnWin32.line-15"></span></li><li>Apache doesn't require Windows Server (unlike IIS), so it's a great way to use an older desktop without using a Server license! Apache doesn't artificially limit the number of connections, unlike personal IIS for example. <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnWin32.line-16"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnWin32.line-17"></span></li></ul></li></ul><p class="line862">Many users prefer to install software products in a folder other than the installation default. Python typically changes the default installation folder name with each point release, and Apache has changed the default installation folder name with the release of version 2.  Instead of enumerating all the possibilities at each step, this procedure will use the <strong>Reference</strong> name in the table below as the installed location for each product. Substitute your real installation location when editing configuration files and entering commands. <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnWin32.line-18"></span><div><table><tbody><tr style="background-color: #eeddaa">  <td><p class="line862">Reference </td>
  <td><p class="line862">Product </td>
  <td><p class="line862">Installation Default or Typical Name </td>
</tr>
<tr>  <td><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnWin32.line-19"></span><p class="line891"><strong>C:\Apache</strong> </td>
  <td><p class="line862"> Apache </td>
  <td><p class="line862">C:\Program Files\Apache Group\Apache2 </td>
</tr>
<tr>  <td><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnWin32.line-20"></span><p class="line891"><strong>C:\Python</strong> </td>
  <td><p class="line862">Python </td>
  <td><p class="line862">C:\Python24 </td>
</tr>
<tr>  <td><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnWin32.line-21"></span><p class="line891"><strong>C:\Moin</strong> </td>
  <td><p class="line862">wiki instances </td>
  <td><p class="line862">C:\My Documents\Moin </td>
</tr>
</tbody></table></div><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnWin32.line-22"></span><p class="line874">Downloading and installing all of the required components below will require almost 100 MB of disk space - shouldn't be a problem nowadays, right? <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnWin32.line-23"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnWin32.line-24"></span><p class="line867">
<h2 id="HelpOnInstalling.2BAC8-ApacheOnWin32.Installation">Installation</h2>
<span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnWin32.line-25"></span><p class="line867">
<h3 id="HelpOnInstalling.2BAC8-ApacheOnWin32.InstallingApache">Installing Apache</h3>
<span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnWin32.line-26"></span><ol type="1"><li><p class="line862">Download &amp; Install Apache 2.0.xx or greater <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnWin32.line-27"></span><ol type="i"><li><p class="line862">Apache2 was re-written with better support for non-unix systems, therefore the 2.0.xx series is <em>strongly</em> recommended for Windows users over Apache 1.3.xx. <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnWin32.line-28"></span></li><li><p class="line862">Go to <a class="http" href="http://httpd.apache.org">http://httpd.apache.org</a> <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnWin32.line-29"></span></li><li><p class="line862">download the <strong>Win32 Binary (MSI Installer)</strong> for the latest version of Apache 2. <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnWin32.line-30"></span></li><li>Read the Apache documentation to determine the correct installation procedure for your situation. <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnWin32.line-31"></span></li><li>Test your Apache installation to make sure it runs correctly before proceeding (questions and problems with the Apache installation should be resolved through the resources provided by the Apache organization). <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnWin32.line-32"></span></li></ol></li></ol><p class="line867">
<h3 id="HelpOnInstalling.2BAC8-ApacheOnWin32.InstallingPython">Installing Python</h3>
<span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnWin32.line-33"></span><p class="line874">There are currently two different distributions of Python available for Windows. <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnWin32.line-34"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnWin32.line-35"></span><ol type="1"><li><p class="line862">The normal Python distribution is available from <a class="http" href="http://www.python.org">http://www.python.org</a>. This is distributed as a windows executable (.exe) file. <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnWin32.line-36"></span></li><li><p class="line862">An alternative distribution called <strong>ActivePython</strong> is available from <a class="http" href="http://www.activestate.com/">http://www.activestate.com/</a>. This distribution uses the MSI Installer and contains some tools specific to the Windows operating system and a popular Windows IDE called Pythonwin, which may be useful <span class="u"><em>if</em></span> you also plan to develop in Python.  ActivePython is available for free; an email address is requested (but not required) before downloading. <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnWin32.line-37"></span></li></ol><p class="line867">MoinMoin will work with either distribution, but requires Python release 2.3 or later.  Download and install the distribution of your choice.  Questions and problems dealing with the Python installation process should be resolved through the use of resources provided by Python.org or ActiveState.  Be sure your Python installation is correct before proceeding. <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnWin32.line-38"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnWin32.line-39"></span><p class="line867">
<h3 id="HelpOnInstalling.2BAC8-ApacheOnWin32.InstallingMoinMoin">Installing MoinMoin</h3>
<span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnWin32.line-40"></span><ol type="1"><li><p class="line891"><strong>Download MoinMoin</strong> <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnWin32.line-41"></span><ul><li><p class="line862">The most current version is here: <a class="interwiki" href="http://moinmo.in/MoinMoinDownload" title="MoinMoin">MoinMoinDownload</a> <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnWin32.line-42"></span></li></ul></li><li><p class="line891"><strong>Expand the archive</strong> <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnWin32.line-43"></span><ul><li><p class="line891"><span class="u"><em>Note:</em></span> users of older versions of <a class="http" href="http://www.winzip.com">WinZip</a> report problem expanding .tar.gz files. Either upgrade or use the free <a class="http" href="http://7-zip.org/">7-Zip</a> utility. <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnWin32.line-44"></span></li><li><p class="line862">Expand the archive into <tt>C:\TEMP</tt> or an alternative location. <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnWin32.line-45"></span></li><li><p class="line862">You should then have a folder such as <tt>C:\TEMP\moin-x.x</tt> where "x.x" is the current release number. This folder will contain a <tt>setup.py</tt> file in addition to several other files and subfolders. <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnWin32.line-46"></span></li></ul></li><li><p class="line891"><strong>Run Setup.py from the commandline</strong> <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnWin32.line-47"></span><ul><li><p class="line862">Open an DOS window (start &gt; Run... &gt; type <tt>cmd</tt>) and enter the commands:<br>
 <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnWin32.line-48"></span></li></ul><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnWin32.line-49"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnWin32.line-50"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnWin32.line-51"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnWin32.line-52"></span><pre>C:
cd \TEMP\moin-x.x
C:\Python\python setup.py install --record=install.log</pre><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnWin32.line-53"></span></li></ol><p class="line862">The above commands will add MoinMoin to your <tt>C:\Python</tt> installation and create an <tt>install.log</tt> file in <tt>C:\temp\moin-x.x</tt> listing all the copied files. You can use Windows Explorer to examine the newly created folders within <tt>C:\Python</tt>. You should find a <tt>C:\Python\share\moin</tt> folder and a <tt>C:\Python\Lib\site-packages\MoinMoin</tt> folder. The <tt>MoinMoin</tt> folder contains many Python scripts and several subfolders. <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnWin32.line-54"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnWin32.line-55"></span><p class="line874">You are now ready to create a wiki instance. <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnWin32.line-56"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnWin32.line-57"></span><p class="line867">
<h2 id="HelpOnInstalling.2BAC8-ApacheOnWin32.Configuration">Configuration</h2>
<span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnWin32.line-58"></span><p class="line862">It is a good practice to try to keep all of your personal or site specific data under a few root folders. This way you can easily backup your important data on a regular basis without having to waste time either backing up static files or picking out dozens of important folders scattered throughout your folder structure.  You should avoid placing your wiki data under the <tt>C:\Python</tt> folder so that you can later upgrade Python or MoinMoin without accidentally overwriting or deleting your wiki data.  For the same reason, you probably don't want to place your wiki data within the <tt>C:\Apache</tt> folder. <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnWin32.line-59"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnWin32.line-60"></span><p class="line862">Choose a location appropriate for you; the following instructions assume you will be creating one or more wiki instances in <tt>C:\Moin\</tt> and the first wiki instance will be named <tt>mywiki</tt>. <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnWin32.line-61"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnWin32.line-62"></span><p class="line862">You may replace the name <tt>mywiki</tt> with almost any name you wish, but do not use <tt>wiki</tt> because that is used by Moin<tt class="backtick"></tt>Moin for loading standard images and style sheets. Although this can be changed later, the name you choose for <tt>mywiki</tt> will become part of the url used to access your site, e.g. <tt>http://server.myorganization.org/mywiki/FrontPage</tt>. <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnWin32.line-63"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnWin32.line-64"></span><p class="line867">
<h3 id="HelpOnInstalling.2BAC8-ApacheOnWin32.CreatingaWikiInstance">Creating a Wiki Instance</h3>
<span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnWin32.line-65"></span><p class="line862">Start an DOS window and enter the commands below. This will create a clone of the MoinMoin wiki in the mywiki folder. <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnWin32.line-66"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnWin32.line-67"></span><p class="line867"><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnWin32.line-68"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnWin32.line-69"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnWin32.line-70"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnWin32.line-71"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnWin32.line-72"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnWin32.line-73"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnWin32.line-74"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnWin32.line-75"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnWin32.line-76"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnWin32.line-77"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnWin32.line-78"></span><pre>cd C:\
md Moin
md Moin\mywiki
md Moin\mywiki\data
md Moin\mywiki\underlay
cd \Python\share\moin
xcopy data        C:\Moin\mywiki\data /E
xcopy underlay    C:\Moin\mywiki\underlay /E
copy  config\*.* C:\Moin\mywiki\*.*
copy  server\*.* C:\Moin\mywiki\*.*</pre><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnWin32.line-79"></span><p class="line874">If your server is going to run multiple wikis, you need to create additional clones. Do the same commands again, but use mywiki2 instead of mywiki. <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnWin32.line-80"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnWin32.line-81"></span><p class="line867">
<h3 id="HelpOnInstalling.2BAC8-ApacheOnWin32.Configuringwikiconfig.py">Configuring wikiconfig.py</h3>
<span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnWin32.line-82"></span><p class="line862">Edit <tt>C:\Moin\mywiki\wikiconfig.py</tt> and at least change <tt>sitename</tt> to the name of your wiki: <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnWin32.line-83"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnWin32.line-84"></span><p class="line867"><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnWin32.line-85"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnWin32.line-86"></span><pre>    sitename = 'My Wiki'</pre><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnWin32.line-87"></span><p class="line862">Additionally, set <tt>data_dir</tt> and <tt>data_underlay_dir</tt> to the absolute paths of the particular directories. Like here: <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnWin32.line-88"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnWin32.line-89"></span><p class="line867"><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnWin32.line-90"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnWin32.line-91"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnWin32.line-92"></span><pre>    data_dir = r'C:\Moin\mywiki\data'
    data_underlay_dir = r'C:\Moin\mywiki\underlay'</pre><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnWin32.line-93"></span><p class="line862">For a public installation, you'll normally want to forbid some of the more dangerous actions. Add a line like this to <tt>wikiconfig.py</tt>: <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnWin32.line-94"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnWin32.line-95"></span><p class="line867"><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnWin32.line-96"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnWin32.line-97"></span><pre>    actions_excluded = ['AttachFile', 'DeletePage', 'RenamePage', ]</pre><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnWin32.line-98"></span><p class="line862">If you will <em><strong>not</strong></em> be running a Wiki farm (if you're not sure what this means, then you probably won't be), make sure to delete the <tt>farmconfig.py</tt> file from the <tt>C:\Moin\mywiki</tt> directory, or else <tt>moin.cgi</tt> will most likely give off various errors (including one about not being able to find a configuration file) and will ultimately fail to start up properly. <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnWin32.line-99"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnWin32.line-100"></span><p class="line862">Additional configuration details can be found in <a href="http://master18.moinmo.in/HelpOnConfiguration">HelpOnConfiguration</a>. <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnWin32.line-101"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnWin32.line-102"></span><p class="line867">
<h3 id="HelpOnInstalling.2BAC8-ApacheOnWin32.Configuringmoin.cgi">Configuring moin.cgi</h3>
<span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnWin32.line-103"></span><p class="line862">Use your editor to edit the file <tt>C:\Moin\mywiki\moin.cgi</tt>.  Change the first line (the shebang statement) to point to your local Python executable program. Note the forward slashes -- Apache uses the Unix convention for folder separators. This tells Apache the <tt>moin.cgi</tt> file is an executable script that will be interpreted by a program to be loaded from <tt>C:/Python/python</tt>. <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnWin32.line-104"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnWin32.line-105"></span><p class="line867"><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnWin32.line-106"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnWin32.line-107"></span><pre> #! C:/Python/python</pre><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnWin32.line-108"></span><p class="line867">
<h3 id="HelpOnInstalling.2BAC8-ApacheOnWin32.ConfiguringApachehttpd.conf">Configuring Apache httpd.conf</h3>
<span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnWin32.line-109"></span><p class="line862">The next step is to tell Apache that is has more work to do. Use your editor to append the following lines to <tt>C:\Apache\conf\httpd.conf</tt>. Note the presence and absence of trailing slashes, it is important to enter the lines exactly as shown below. <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnWin32.line-110"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnWin32.line-111"></span><p class="line867"><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnWin32.line-112"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnWin32.line-113"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnWin32.line-114"></span><pre>Alias       /moin_static160/ "C:/Python/share/moin/htdocs/"
ScriptAlias /mywiki          "C:/Moin/mywiki/moin.cgi"</pre><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnWin32.line-115"></span><p class="line862">The <strong>Alias</strong> line above instructs Apache to serve images, style sheets, etc. from the specified folders and subfolders. The <strong>Script<tt class="backtick"></tt>Alias</strong> line is needed once for each wiki instance, so if you have multiple wikis, repeat the statement using mywiki2, mywiki3, etc. The Script<tt class="backtick"></tt>Alias statement instructs Apache to execute scripts from the specified folder. See the Apache docs for a complete explanation. <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnWin32.line-116"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnWin32.line-117"></span><p class="line862">Test your changes by restarting your Apache server and try to access your newborn wiki with the URL <tt>http://127.0.0.1/mywiki</tt>. You should see the Front<tt class="backtick"></tt>Page, try to edit and save it, and if that works, verify your edit is reflected on the Recent<tt class="backtick"></tt>Changes page. <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnWin32.line-118"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnWin32.line-119"></span><p class="line862">And now, it is up to you and your user community to transform your wiki into an informative and useful tool. You will probably want to retain most of the Help<tt class="backtick"></tt>On~ pages dealing with editing, delete those pages with irrelevant information (like this page, don't let your users or boss know how easy it was to install Moin<tt class="backtick"></tt>Moin <img alt=";-)" height="16" src="http://static.moinmo.in/moin_static180/modernized/img/smile4.png" title=";-)" width="16" /> ), and rewrite the Front<tt class="backtick"></tt>Page to introduce your wiki topic. <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnWin32.line-120"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnWin32.line-121"></span><p class="line867">
<h2 id="HelpOnInstalling.2BAC8-ApacheOnWin32.Troubleshooting">Troubleshooting</h2>
<span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnWin32.line-122"></span><p class="line862">The first place to look for clues when the unexpected happens is to try changing your url to: <tt>http://127.0.0.1/mywiki?action=test</tt>. If Apache can find and execute the module <tt>C:/Moin/mywiki/moin.cgi</tt>, a page of diagnostics titled <strong>Moin<tt class="backtick"></tt>Moin CGI Diagnosis</strong> will be displayed. Check the output for error messages. <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnWin32.line-123"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnWin32.line-124"></span><p class="line862">The second place to look for is <tt>C:\Apache\logs\error.log</tt>. The following are common errors grouped by the message displayed by your browser: <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnWin32.line-125"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnWin32.line-126"></span><ul><li><p class="line891"><strong>Internal Server Error</strong> <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnWin32.line-127"></span><ul><li><p class="line862">If the Apache log shows a message "The system cannot find the file specified." then a possibility is the shebang statement in <tt>moin.cgi</tt> is incorrect. <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnWin32.line-128"></span></li><li><p class="line862">If the Apache log shows a different error message, then the Moin<tt class="backtick"></tt>Moin Python scripts may be abending. To determine the cause, you could try temporarily renaming <tt>moin.cgi</tt> to <tt>moin.py</tt>, loading <tt>moin.py</tt> with the Python <strong>idle</strong> IDE and executing it to determine if there are any error messages. <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnWin32.line-129"></span></li></ul></li><li><p class="line891"><strong>Not Found</strong> <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnWin32.line-130"></span><ul><li><p class="line862">If the Apache error log shows the message "File does not exist: C:/Apache/htdocs/mywiki",  the <strong>Script<tt class="backtick"></tt>Alias</strong> statement in <tt>httpd.conf</tt> may be incorrect. <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnWin32.line-131"></span></li></ul></li><li><p class="line891"><strong>The Page Cannot be found</strong> <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnWin32.line-132"></span><ul><li><p class="line862">If the Apache error log shows the message "File does not exist: C:/Apache/htdocs/????", you may have mistyped the url "<a class="http" href="http://127.0.0.1/mywiki">http://127.0.0.1/mywiki</a>" into your browser. <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnWin32.line-133"></span></li></ul></li><li><p class="line891"><strong>FrontPage Loads Without Icons</strong> <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnWin32.line-134"></span><ul><li><p class="line862">If the Apache Error log shows many error messages "File does not exist: C:/Apache/htdocs/wiki", then the <strong>Alias</strong> statement in <tt>httpd.conf</tt> may be incorrect. <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnWin32.line-135"></span></li></ul></li><li><p class="line862">If you did not install MoinMoin in the Python site-packages folder (i.e. only if you deviated from the above instructions), you will have to activate the lines which add a folder to the sys.path and enter your path to MoinMoin there:<br>
 <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnWin32.line-136"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnWin32.line-137"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnWin32.line-138"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnWin32.line-139"></span><pre>import sys
sys.path.insert(0, r'C:\Moin\...')</pre><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnWin32.line-140"></span></li></ul><p class="line867">
<h2 id="HelpOnInstalling.2BAC8-ApacheOnWin32.NextSteps">Next Steps</h2>
<span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnWin32.line-141"></span><p class="line867">
<h3 id="HelpOnInstalling.2BAC8-ApacheOnWin32.AuthenticatingMoinMoinUsersAgainstaDomainController">Authenticating MoinMoin Users Against a Domain Controller</h3>
<span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnWin32.line-142"></span><ul><li style="list-style-type:none">Many organizations are setting up wiki's for documentation on their internal network.  As a result, many organizations require the security of authentication, which protects their content, as well as allowing people to work remotely on the wiki without anonymous eye's peeking at their site.  Domain authentication is convenient for both the administrator and the user, because it uses the same password the user would use for other network logins.  If this describes you, proceed to: <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnWin32.line-143"></span></li><li style="list-style-type:none"><p class="line891"><a href="http://master18.moinmo.in/HelpOnInstalling/ApacheOnWin32withDomainAuthentication">../ApacheOnWin32withDomainAuthentication</a> <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnWin32.line-144"></span></li></ul><p class="line867">
<h3 id="HelpOnInstalling.2BAC8-ApacheOnWin32.SimpleWindowsMoinMoinBackup">Simple Windows MoinMoin Backup</h3>
<span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnWin32.line-145"></span><ul><li style="list-style-type:none">Simple strategy for backing up your wiki: <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnWin32.line-146"></span></li><li style="list-style-type:none"><p class="line891"><a href="http://master18.moinmo.in/HelpOnInstalling/Win32MoinEasyBackup">../Win32MoinEasyBackup</a> <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnWin32.line-147"></span><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnWin32.line-148"></span></li></ul><p class="line867">
<h3 id="HelpOnInstalling.2BAC8-ApacheOnWin32.FastCGIwithWindows">FastCGI with Windows</h3>
<span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnWin32.line-149"></span><ul><li style="list-style-type:none">Dramatically increase performance of your wiki with the FastCGI Apache module: <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnWin32.line-150"></span></li><li style="list-style-type:none"><p class="line891"><a href="http://master18.moinmo.in/HelpOnInstalling/ApacheOnWin32withFastCgi">../ApacheOnWin32withFastCgi</a> <span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnWin32.line-151"></span></li></ul><span class="anchor" id="HelpOnInstalling.2BAC8-ApacheOnWin32.bottom"></span></div> <span class="anchor" id="line-72"></span><hr class="hr2" /><p class="line874"> <span class="anchor" id="line-73"></span><span class="anchor" id="win32iis-install"></span> <span class="anchor" id="line-74"></span>
<h1>Windows Installation using IIS</h1>
<div dir="ltr" id="HelpOnInstalling.2BAC8-InternetInformationServer.content" lang="en"><span class="anchor" id="HelpOnInstalling.2BAC8-InternetInformationServer.top"></span>
<span class="anchor" id="HelpOnInstalling.2BAC8-InternetInformationServer.line-8"></span><p class="line867"><strong>Index</strong> <div class="table-of-contents"><p class="table-of-contents-heading">Contents<ol><li>
<a href="#HelpOnInstalling.2BAC8-InternetInformationServer.Requirements.26Preparation">Requirements &amp; Preparation</a></li><li>
<a href="#HelpOnInstalling.2BAC8-InternetInformationServer.Installation">Installation</a><ol><li>
<a href="#HelpOnInstalling.2BAC8-InternetInformationServer.InstallingIIS">Installing IIS</a></li><li>
<a href="#HelpOnInstalling.2BAC8-InternetInformationServer.InstallingPython">Installing Python</a></li><li>
<a href="#HelpOnInstalling.2BAC8-InternetInformationServer.InstallingMoinMoin">Installing MoinMoin</a></li></ol></li><li>
<a href="#HelpOnInstalling.2BAC8-InternetInformationServer.Configuration">Configuration</a><ol><li>
<a href="#HelpOnInstalling.2BAC8-InternetInformationServer.CreatingaWikiInstance">Creating a Wiki Instance</a></li><li>
<a href="#HelpOnInstalling.2BAC8-InternetInformationServer.ConfiguringIIS">Configuring IIS</a><ol><li>
<a href="#HelpOnInstalling.2BAC8-InternetInformationServer.ConfiguringIIS5.0andabove">Configuring IIS 5.0 and above</a></li><li>
<a href="#HelpOnInstalling.2BAC8-InternetInformationServer.IIS6.0.28WindowsServer2003.29">IIS 6.0 (Windows Server 2003)</a></li></ol></li><li>
<a href="#HelpOnInstalling.2BAC8-InternetInformationServer.Configuringwikiconfig.py">Configuring wikiconfig.py</a></li></ol></li><li>
<a href="#HelpOnInstalling.2BAC8-InternetInformationServer.Troubleshooting">Troubleshooting</a><ol><li><ol><li>
<a href="#HelpOnInstalling.2BAC8-InternetInformationServer.IISURLScanproblem">IIS URLScan problem</a></li></ol></li></ol></li><li>
<a href="#HelpOnInstalling.2BAC8-InternetInformationServer.NextSteps">Next Steps</a></li></ol></li></ol></div><p class="line874"> <span class="anchor" id="HelpOnInstalling.2BAC8-InternetInformationServer.line-9"></span><span class="anchor" id="HelpOnInstalling.2BAC8-InternetInformationServer.line-10"></span><p class="line867">
<h2 id="HelpOnInstalling.2BAC8-InternetInformationServer.Requirements.26Preparation">Requirements &amp; Preparation</h2>
<span class="anchor" id="HelpOnInstalling.2BAC8-InternetInformationServer.line-11"></span><p class="line862">Before you install <a href="http://master18.moinmo.in/MoinMoin">MoinMoin</a>, make sure you have the necessary infrastructure in place, namely the <em>Internet Information Services</em> webserver (any version should be OK), and a <em>Python</em> installation (at least version 2.3 is required, the latest python release is recommended). <span class="anchor" id="HelpOnInstalling.2BAC8-InternetInformationServer.line-12"></span><span class="anchor" id="HelpOnInstalling.2BAC8-InternetInformationServer.line-13"></span><p class="line874">These instructions make the basic assumption that you will have these components installed in their default locations. In reality, you'll probably have them installed elsewhere (on the D: drive, for example). Be careful to substitute your drive and paths based on the following assumed default locations: <span class="anchor" id="HelpOnInstalling.2BAC8-InternetInformationServer.line-14"></span><span class="anchor" id="HelpOnInstalling.2BAC8-InternetInformationServer.line-15"></span><ul><li>IIS to its default location <span class="anchor" id="HelpOnInstalling.2BAC8-InternetInformationServer.line-16"></span></li><li><p class="line891"><tt>C:\Python</tt> - the Python interpreter <span class="anchor" id="HelpOnInstalling.2BAC8-InternetInformationServer.line-17"></span></li><li><p class="line891"><tt>C:\Moin</tt> - MoinMoin itself <span class="anchor" id="HelpOnInstalling.2BAC8-InternetInformationServer.line-18"></span></li></ul><p class="line867">
<h2 id="HelpOnInstalling.2BAC8-InternetInformationServer.Installation">Installation</h2>
<span class="anchor" id="HelpOnInstalling.2BAC8-InternetInformationServer.line-19"></span><p class="line867">
<h3 id="HelpOnInstalling.2BAC8-InternetInformationServer.InstallingIIS">Installing IIS</h3>
<span class="anchor" id="HelpOnInstalling.2BAC8-InternetInformationServer.line-20"></span><p class="line862">From Microsoft: (<a class="http" href="http://www.microsoft.com/windows2000/en/server/iis/">http://www.microsoft.com/windows2000/en/server/iis/</a>) <span class="anchor" id="HelpOnInstalling.2BAC8-InternetInformationServer.line-21"></span><span class="anchor" id="HelpOnInstalling.2BAC8-InternetInformationServer.line-22"></span><ol type="1"><li>To install IIS, add components, or remove components: <span class="anchor" id="HelpOnInstalling.2BAC8-InternetInformationServer.line-23"></span><ol type="i"><li><p class="line862">Click Start =&gt; Settings =&gt; Control Panel =&gt; Add/Remove Programs. <span class="anchor" id="HelpOnInstalling.2BAC8-InternetInformationServer.line-24"></span></li><li><p class="line862">Click 'Add/Remove Windows Components', Check 'Internet Information Services' and follow the on-screen instructions to install. ( <img alt="/!\" height="16" src="http://static.moinmo.in/moin_static180/modernized/img/alert.png" title="/!\" width="16" /> it is also recommended to click the 'details' button and un-selecting components you will not need. This will depend on your server role; but for example, you probably will not need FTP, or "Frontpage 2000 Server Extensions"). <span class="anchor" id="HelpOnInstalling.2BAC8-InternetInformationServer.line-25"></span></li></ol></li></ol><p class="line862">Make sure that your webserver runs without problems before you start to install MoinMoin; problems with your webserver installation are not in the scope of this document. <span class="anchor" id="HelpOnInstalling.2BAC8-InternetInformationServer.line-26"></span><span class="anchor" id="HelpOnInstalling.2BAC8-InternetInformationServer.line-27"></span><p class="line867">
<h3 id="HelpOnInstalling.2BAC8-InternetInformationServer.InstallingPython">Installing Python</h3>
<span class="anchor" id="HelpOnInstalling.2BAC8-InternetInformationServer.line-28"></span><p class="line874">There are currently two different distributions of Python available for Windows. Either version will work fine. <span class="anchor" id="HelpOnInstalling.2BAC8-InternetInformationServer.line-29"></span><span class="anchor" id="HelpOnInstalling.2BAC8-InternetInformationServer.line-30"></span><ol type="1"><li><p class="line891"><a class="http" href="http://www.python.org">http://www.python.org</a> - The standard open-source Python distribution. <span class="anchor" id="HelpOnInstalling.2BAC8-InternetInformationServer.line-31"></span><ul><li>The installer is a windows executable (.exe) file. <span class="anchor" id="HelpOnInstalling.2BAC8-InternetInformationServer.line-32"></span></li></ul></li><li><p class="line891"><a class="http" href="http://www.activestate.com">http://www.activestate.com</a> - An alternative, commercially-supported, distribution (distributed for free (email address required)). <span class="anchor" id="HelpOnInstalling.2BAC8-InternetInformationServer.line-33"></span><ul><li>The installer is a Windows .MSI file. <span class="anchor" id="HelpOnInstalling.2BAC8-InternetInformationServer.line-34"></span></li><li><p class="line862">If you are or plan to develop in the Python language, ActivePython has some tools specific to the Windows operating system and includes a popular Windows IDE called Pythonwin. <span class="anchor" id="HelpOnInstalling.2BAC8-InternetInformationServer.line-35"></span></li></ul></li></ol><p class="line867">MoinMoin works with either distribution, but requires Python release 2.3 or later. Download and install the distribution of your choice. Be sure your Python installation is correct before proceeding. Installation is straightforward; however, any questions or issues regarding the Python installation process should be resolved through the use of resources provided by Python.org or ActiveState. <span class="anchor" id="HelpOnInstalling.2BAC8-InternetInformationServer.line-36"></span><span class="anchor" id="HelpOnInstalling.2BAC8-InternetInformationServer.line-37"></span><p class="line867">
<h3 id="HelpOnInstalling.2BAC8-InternetInformationServer.InstallingMoinMoin">Installing MoinMoin</h3>
<span class="anchor" id="HelpOnInstalling.2BAC8-InternetInformationServer.line-38"></span><ol type="1"><li><p class="line891"><strong>Download MoinMoin</strong> <span class="anchor" id="HelpOnInstalling.2BAC8-InternetInformationServer.line-39"></span><ul><li><p class="line862">The most current version is here: <a class="interwiki" href="http://moinmo.in/MoinMoinDownload" title="MoinMoin">MoinMoinDownload</a> <span class="anchor" id="HelpOnInstalling.2BAC8-InternetInformationServer.line-40"></span></li></ul></li><li><p class="line891"><strong>Expand the archive</strong> <span class="anchor" id="HelpOnInstalling.2BAC8-InternetInformationServer.line-41"></span><ul><li><p class="line891"><span class="u"><em>Note:</em></span> users of older versions of <a class="http" href="http://www.winzip.com">WinZip</a> report problem expanding .tar.gz files. Either upgrade or use the free <a class="http" href="http://7-zip.org/">7-Zip</a> utility. <span class="anchor" id="HelpOnInstalling.2BAC8-InternetInformationServer.line-42"></span></li><li><p class="line862">Expand the archive into <tt>C:\TEMP</tt> or an alternative location. <span class="anchor" id="HelpOnInstalling.2BAC8-InternetInformationServer.line-43"></span></li><li><p class="line862">You should then have a folder such as <tt>C:\TEMP\moin-x.x</tt> where "x.x" is the current release number. This folder will contain a <tt>setup.py</tt> file in addition to several other files and subfolders. <span class="anchor" id="HelpOnInstalling.2BAC8-InternetInformationServer.line-44"></span></li></ul></li><li><p class="line891"><strong>Run Setup.py from the commandline</strong> <span class="anchor" id="HelpOnInstalling.2BAC8-InternetInformationServer.line-45"></span><ul><li><p class="line862">Open an DOS window (start &gt; Run... &gt; type <tt>cmd</tt>) and enter the commands:<br>
 <span class="anchor" id="HelpOnInstalling.2BAC8-InternetInformationServer.line-46"></span><span class="anchor" id="HelpOnInstalling.2BAC8-InternetInformationServer.line-47"></span><span class="anchor" id="HelpOnInstalling.2BAC8-InternetInformationServer.line-48"></span><span class="anchor" id="HelpOnInstalling.2BAC8-InternetInformationServer.line-49"></span><span class="anchor" id="HelpOnInstalling.2BAC8-InternetInformationServer.line-50"></span><span class="anchor" id="HelpOnInstalling.2BAC8-InternetInformationServer.line-51"></span><span class="anchor" id="HelpOnInstalling.2BAC8-InternetInformationServer.line-52"></span><pre>C:
cd \temp
unzip moin-1.6.zip
cd moin-1.6
python setup.py install --prefix=C:\Moin --record=install.log</pre><span class="anchor" id="HelpOnInstalling.2BAC8-InternetInformationServer.line-53"></span></li></ul></li></ol><p class="line862">This will install all necessary files to the "<tt>C:\Moin</tt>" directory, and create a "<tt>install.log</tt>" file listing all the files that are created there. <span class="anchor" id="HelpOnInstalling.2BAC8-InternetInformationServer.line-54"></span><span class="anchor" id="HelpOnInstalling.2BAC8-InternetInformationServer.line-55"></span><p class="line874">You are now ready to create a wiki instance. <span class="anchor" id="HelpOnInstalling.2BAC8-InternetInformationServer.line-56"></span><span class="anchor" id="HelpOnInstalling.2BAC8-InternetInformationServer.line-57"></span><p class="line867">
<h2 id="HelpOnInstalling.2BAC8-InternetInformationServer.Configuration">Configuration</h2>
<span class="anchor" id="HelpOnInstalling.2BAC8-InternetInformationServer.line-58"></span><p class="line867">
<h3 id="HelpOnInstalling.2BAC8-InternetInformationServer.CreatingaWikiInstance">Creating a Wiki Instance</h3>
<span class="anchor" id="HelpOnInstalling.2BAC8-InternetInformationServer.line-59"></span><p class="line862">Enter these commands in a console window from C:\Moin&gt;: <span class="anchor" id="HelpOnInstalling.2BAC8-InternetInformationServer.line-60"></span><span class="anchor" id="HelpOnInstalling.2BAC8-InternetInformationServer.line-61"></span><p class="line867"><span class="anchor" id="HelpOnInstalling.2BAC8-InternetInformationServer.line-62"></span><span class="anchor" id="HelpOnInstalling.2BAC8-InternetInformationServer.line-63"></span><span class="anchor" id="HelpOnInstalling.2BAC8-InternetInformationServer.line-64"></span><span class="anchor" id="HelpOnInstalling.2BAC8-InternetInformationServer.line-65"></span><span class="anchor" id="HelpOnInstalling.2BAC8-InternetInformationServer.line-66"></span><span class="anchor" id="HelpOnInstalling.2BAC8-InternetInformationServer.line-67"></span><span class="anchor" id="HelpOnInstalling.2BAC8-InternetInformationServer.line-68"></span><span class="anchor" id="HelpOnInstalling.2BAC8-InternetInformationServer.line-69"></span><span class="anchor" id="HelpOnInstalling.2BAC8-InternetInformationServer.line-70"></span><span class="anchor" id="HelpOnInstalling.2BAC8-InternetInformationServer.line-71"></span><pre>cd c:\Moin
md mywiki
md mywiki\data
md mywiki\underlay
xcopy share\moin\data mywiki\data /E
xcopy share\moin\underlay mywiki\underlay /E
copy share\moin\server\moin.cgi mywiki\
copy share\moin\config\wikiconfig.py mywiki\
copy share\moin\htdocs\index.html mywiki\default.htm</pre><span class="anchor" id="HelpOnInstalling.2BAC8-InternetInformationServer.line-72"></span><p class="line862">"<tt>mywiki</tt>" is the name of your wiki instance, you might want to chose a different name best fitting the intended use of this instance; just don't name it simply "<tt>wiki</tt>", because that would result in confusion and problems later on. <span class="anchor" id="HelpOnInstalling.2BAC8-InternetInformationServer.line-73"></span><span class="anchor" id="HelpOnInstalling.2BAC8-InternetInformationServer.line-74"></span><p class="line862">We have to make sure that <tt>moin.cgi</tt> can find the MoinMoin directory, so that "<tt>import&nbsp;MoinMoin</tt>" will work. The easiest way to make sure <tt>MoinMoin</tt> can be imported is to append to <tt>sys.path</tt> <em>within</em> <tt>moin.cgi</tt>. <span class="anchor" id="HelpOnInstalling.2BAC8-InternetInformationServer.line-75"></span><span class="anchor" id="HelpOnInstalling.2BAC8-InternetInformationServer.line-76"></span><p class="line874">You can change the first two lines of code in moin.cgi to something like this: <span class="anchor" id="HelpOnInstalling.2BAC8-InternetInformationServer.line-77"></span><span class="anchor" id="HelpOnInstalling.2BAC8-InternetInformationServer.line-78"></span><p class="line867"><span class="anchor" id="HelpOnInstalling.2BAC8-InternetInformationServer.line-79"></span><span class="anchor" id="HelpOnInstalling.2BAC8-InternetInformationServer.line-80"></span><span class="anchor" id="HelpOnInstalling.2BAC8-InternetInformationServer.line-81"></span><span class="anchor" id="HelpOnInstalling.2BAC8-InternetInformationServer.line-82"></span><span class="anchor" id="HelpOnInstalling.2BAC8-InternetInformationServer.line-83"></span><div class="codearea" dir="ltr" lang="en">
<script type="text/javascript">
function isnumbered(obj) {
  return obj.childNodes.length && obj.firstChild.childNodes.length && obj.firstChild.firstChild.className == 'LineNumber';
}
function nformat(num,chrs,add) {
  var nlen = Math.max(0,chrs-(''+num).length), res = '';
  while (nlen>0) { res += ' '; nlen-- }
  return res+num+add;
}
function addnumber(did, nstart, nstep) {
  var c = document.getElementById(did), l = c.firstChild, n = 1;
  if (!isnumbered(c))
    if (typeof nstart == 'undefined') nstart = 1;
    if (typeof nstep  == 'undefined') nstep = 1;
    n = nstart;
    while (l != null) {
      if (l.tagName == 'SPAN') {
        var s = document.createElement('SPAN');
        s.className = 'LineNumber'
        s.appendChild(document.createTextNode(nformat(n,4,' ')));
        n += nstep;
        if (l.childNodes.length)
          l.insertBefore(s, l.firstChild)
        else
          l.appendChild(s)
      }
      l = l.nextSibling;
    }
  return false;
}
function remnumber(did) {
  var c = document.getElementById(did), l = c.firstChild;
  if (isnumbered(c))
    while (l != null) {
      if (l.tagName == 'SPAN' && l.firstChild.className == 'LineNumber') l.removeChild(l.firstChild);
      l = l.nextSibling;
    }
  return false;
}
function togglenumber(did, nstart, nstep) {
  var c = document.getElementById(did);
  if (isnumbered(c)) {
    remnumber(did);
  } else {
    addnumber(did,nstart,nstep);
  }
  return false;
}
</script>

<script type="text/javascript">
document.write('<a href="#" onclick="return togglenumber(\'HelpOnInstalling.2BAC8-InternetInformationServer.CA-acbc60d12efe38198c86305c09c3ae16aba7d8ee\', 1, 1);" \
                class="codenumbers">Toggle line numbers<\/a>');
</script>
<pre dir="ltr" id="HelpOnInstalling.2BAC8-InternetInformationServer.CA-acbc60d12efe38198c86305c09c3ae16aba7d8ee" lang="en"><span class="line"><span class="LineNumber">   1 </span><span class="Comment">#!python</span></span>
<span class="line"><span class="LineNumber">   2 </span><span class="Comment"></span><span class="ResWord">import</span> <span class="ID">sys</span></span>
<span class="line"><span class="LineNumber">   3 </span><span class="ID">sys</span><span class="Operator">.</span><span class="ID">path</span><span class="Operator">.</span><span class="ID">append</span><span class="Operator">(</span><span class="String">'C:/Moin/Lib/site-packages'</span><span class="Operator">)</span><span class="Text"></span></span>
</pre></div><span class="anchor" id="HelpOnInstalling.2BAC8-InternetInformationServer.line-84"></span><p class="line862">Notice that we're pointing to the directory which contains the MoinMoin directory, not the directory itself. <span class="anchor" id="HelpOnInstalling.2BAC8-InternetInformationServer.line-85"></span><span class="anchor" id="HelpOnInstalling.2BAC8-InternetInformationServer.line-86"></span><p class="line867">
<h3 id="HelpOnInstalling.2BAC8-InternetInformationServer.ConfiguringIIS">Configuring IIS</h3>
<span class="anchor" id="HelpOnInstalling.2BAC8-InternetInformationServer.line-87"></span><p class="line874">Next, you'll need to create two virtual directories in IIS. One for the shared data, and one for this specific wiki instance. <span class="anchor" id="HelpOnInstalling.2BAC8-InternetInformationServer.line-88"></span><span class="anchor" id="HelpOnInstalling.2BAC8-InternetInformationServer.line-89"></span><p class="line867">
<h4 id="HelpOnInstalling.2BAC8-InternetInformationServer.ConfiguringIIS5.0andabove">Configuring IIS 5.0 and above</h4>
<span class="anchor" id="HelpOnInstalling.2BAC8-InternetInformationServer.line-90"></span><ol type="1"><li><p class="line862">Open <strong>Internet Services Manager</strong> (Start &gt; Settings &gt; Control Panels &gt; Administrative Tools &gt; ...). Open up the tree to <em>Default Web Site</em>. <span class="anchor" id="HelpOnInstalling.2BAC8-InternetInformationServer.line-91"></span><span class="anchor" id="HelpOnInstalling.2BAC8-InternetInformationServer.line-92"></span></li><li class="gap"><p class="line862">Right click on <em>Default Web Site</em> and choose <em>New &gt; Virtual directory</em>. <span class="anchor" id="HelpOnInstalling.2BAC8-InternetInformationServer.line-93"></span><ol type="i"><li>This will bring up a wizard with the mandatory useless first screen, hit next. <span class="anchor" id="HelpOnInstalling.2BAC8-InternetInformationServer.line-94"></span></li><li><p class="line862">Enter "<tt>wiki</tt>" for the alias name, hit next. <span class="anchor" id="HelpOnInstalling.2BAC8-InternetInformationServer.line-95"></span></li><li><p class="line862">Browse to "<tt>C:\Moin\share\moin\htdocs</tt>", hit next. <span class="anchor" id="HelpOnInstalling.2BAC8-InternetInformationServer.line-96"></span></li><li><p class="line862">Leave the <em>Access permissions</em> at their defaults, hit next. <span class="anchor" id="HelpOnInstalling.2BAC8-InternetInformationServer.line-97"></span></li><li>And now you're done, hit finish! <span class="anchor" id="HelpOnInstalling.2BAC8-InternetInformationServer.line-98"></span><span class="anchor" id="HelpOnInstalling.2BAC8-InternetInformationServer.line-99"></span></li></ol></li><li class="gap"><p class="line862">Now follow the same steps, but set the alias to "<tt>mywiki</tt>" and the path to "<tt>C:\Moin\mywiki</tt>". <span class="anchor" id="HelpOnInstalling.2BAC8-InternetInformationServer.line-100"></span><span class="anchor" id="HelpOnInstalling.2BAC8-InternetInformationServer.line-101"></span></li><li class="gap">Use IIS Admin to remove permissions to read the data directory: <span class="anchor" id="HelpOnInstalling.2BAC8-InternetInformationServer.line-102"></span><ol type="i"><li><p class="line862">expand the "<tt>mywiki</tt>" node <span class="anchor" id="HelpOnInstalling.2BAC8-InternetInformationServer.line-103"></span></li><li><p class="line862">right click on <tt>data</tt> <span class="anchor" id="HelpOnInstalling.2BAC8-InternetInformationServer.line-104"></span></li><li><p class="line862">select <tt>Properties</tt> <span class="anchor" id="HelpOnInstalling.2BAC8-InternetInformationServer.line-105"></span></li><li><p class="line862">and uncheck <tt>Read</tt>. <span class="anchor" id="HelpOnInstalling.2BAC8-InternetInformationServer.line-106"></span></li><li><p class="line862">Repeat these steps with the <tt>underlay</tt> directory. <span class="anchor" id="HelpOnInstalling.2BAC8-InternetInformationServer.line-107"></span><span class="anchor" id="HelpOnInstalling.2BAC8-InternetInformationServer.line-108"></span></li></ol></li><li class="gap"><p class="line862">Now you need to setup the 'mywiki' alias so that it will run Python to interpret <tt>.cgi</tt> files. <span class="anchor" id="HelpOnInstalling.2BAC8-InternetInformationServer.line-109"></span><ol type="i"><li><p class="line862">On Windows Server 2003, click the <em>Create</em> button under <em>Application Settings</em> to create an application space. <span class="anchor" id="HelpOnInstalling.2BAC8-InternetInformationServer.line-110"></span><span class="anchor" id="HelpOnInstalling.2BAC8-InternetInformationServer.line-111"></span></li><li class="gap"><p class="line862">Right-click on your new 'mywiki' alias and choose <em>Properties</em>. On the first tab (<em>Virtual Directory</em>), click the <em>Configuration</em> button. <span class="anchor" id="HelpOnInstalling.2BAC8-InternetInformationServer.line-112"></span><span class="anchor" id="HelpOnInstalling.2BAC8-InternetInformationServer.line-113"></span></li><li class="gap"><p class="line862">The first tab is the <em>App Mappings</em> tab, which defines which programs to use for each file extension. <span class="anchor" id="HelpOnInstalling.2BAC8-InternetInformationServer.line-114"></span><span class="anchor" id="HelpOnInstalling.2BAC8-InternetInformationServer.line-115"></span></li><li class="gap"><p class="line862">Click <em>Add</em>. Browse to your <tt>python.exe</tt> (probably something like <tt>c:\pythonXX\python.exe</tt>). <span class="anchor" id="HelpOnInstalling.2BAC8-InternetInformationServer.line-116"></span><span class="anchor" id="HelpOnInstalling.2BAC8-InternetInformationServer.line-117"></span></li><li class="gap"><p class="line862">Then add <tt>-u&nbsp;"%s"&nbsp;"%s"</tt> after the Python executable path. The <em>Executable</em> line will look something like this: <tt>"C:\Python22\python.exe"&nbsp;-u&nbsp;"%s"&nbsp;"%s"</tt>. In the <em>Extension</em> box enter <tt>.cgi</tt> with the beginning period. <span class="anchor" id="HelpOnInstalling.2BAC8-InternetInformationServer.line-118"></span><span class="anchor" id="HelpOnInstalling.2BAC8-InternetInformationServer.line-119"></span></li><li class="gap"><p class="line862">Make sure that the <em>Check that file exists</em> option is not checked (if it is, MoinMoin won't be able to display sub pages). <span class="anchor" id="HelpOnInstalling.2BAC8-InternetInformationServer.line-120"></span><span class="anchor" id="HelpOnInstalling.2BAC8-InternetInformationServer.line-121"></span></li><li class="gap"><p class="line862">Ok, you're done with the alias configuration, click <em>OK</em> several times to get back out of all the dialog boxes. <span class="anchor" id="HelpOnInstalling.2BAC8-InternetInformationServer.line-122"></span><span class="anchor" id="HelpOnInstalling.2BAC8-InternetInformationServer.line-123"></span></li></ol></li><li class="gap"><p class="line862">If you add another wiki instance, you'll only need to setup the reference to its folder, they can safely share the "<tt>wiki</tt>" alias which points to static files only. <span class="anchor" id="HelpOnInstalling.2BAC8-InternetInformationServer.line-124"></span></li></ol><p class="line867">
<h4 id="HelpOnInstalling.2BAC8-InternetInformationServer.IIS6.0.28WindowsServer2003.29">IIS 6.0 (Windows Server 2003)</h4>
<span class="anchor" id="HelpOnInstalling.2BAC8-InternetInformationServer.line-125"></span><p class="line862">The instructions below also apply to IIS 6.0 but the more aggressive security settings in newer version of IIS disallow the usage of <em>unknown CGI extensions</em>. That means you will always get a 404 error unless you do this: <span class="anchor" id="HelpOnInstalling.2BAC8-InternetInformationServer.line-126"></span><span class="anchor" id="HelpOnInstalling.2BAC8-InternetInformationServer.line-127"></span><ol type="1"><li><p class="line862">Open <strong>IIS Manager</strong> (Start &gt; Programs &gt; Administrative Tools &gt; IIS Manager). <span class="anchor" id="HelpOnInstalling.2BAC8-InternetInformationServer.line-128"></span><span class="anchor" id="HelpOnInstalling.2BAC8-InternetInformationServer.line-129"></span></li><li class="gap"><p class="line862">Go to the <strong>Web Service Extensions</strong> folder. <span class="anchor" id="HelpOnInstalling.2BAC8-InternetInformationServer.line-130"></span><span class="anchor" id="HelpOnInstalling.2BAC8-InternetInformationServer.line-131"></span></li><li class="gap"><p class="line862">Under the <strong>Action</strong> menu, select <strong>Add a new Web service extension...</strong>. <span class="anchor" id="HelpOnInstalling.2BAC8-InternetInformationServer.line-132"></span><span class="anchor" id="HelpOnInstalling.2BAC8-InternetInformationServer.line-133"></span></li><li class="gap"><p class="line862">For Extension name, give it a name such as <em>.cgi</em> or <em>Python cgi</em> or similar. <span class="anchor" id="HelpOnInstalling.2BAC8-InternetInformationServer.line-134"></span><span class="anchor" id="HelpOnInstalling.2BAC8-InternetInformationServer.line-135"></span></li><li class="gap"><p class="line862">Under <strong>Required files</strong> click the <strong>Add...</strong> button and type in the exact command-line string you used above. Eg: <tt>c:\python24\python.exe&nbsp;-u&nbsp;"%s"&nbsp;"%s"</tt>, then click the <strong>Ok</strong> button. <span class="anchor" id="HelpOnInstalling.2BAC8-InternetInformationServer.line-136"></span><span class="anchor" id="HelpOnInstalling.2BAC8-InternetInformationServer.line-137"></span></li><li class="gap"><p class="line862">Make sure the <strong>Set extension status to Allowed</strong> checkbox is checked and click the <strong>Ok</strong> button. <span class="anchor" id="HelpOnInstalling.2BAC8-InternetInformationServer.line-138"></span></li></ol><p class="line874">Another change that may be necessary if you are receiving HTTP Error 403 19 1314 while using IIS 6.0 is to adjust the Identity settings for the Application Pool that is being used by your site. The following steps assume you are adjusting the Default Web Site. <span class="anchor" id="HelpOnInstalling.2BAC8-InternetInformationServer.line-139"></span><span class="anchor" id="HelpOnInstalling.2BAC8-InternetInformationServer.line-140"></span><ol type="1"><li><p class="line862">Open <strong>IIS Manager</strong> (Start &gt; Programs &gt; Administrative Tools &gt; IIS Manager). <span class="anchor" id="HelpOnInstalling.2BAC8-InternetInformationServer.line-141"></span><span class="anchor" id="HelpOnInstalling.2BAC8-InternetInformationServer.line-142"></span></li><li class="gap"><p class="line862">Go to the <strong>Application Pool</strong> folder. <span class="anchor" id="HelpOnInstalling.2BAC8-InternetInformationServer.line-143"></span><span class="anchor" id="HelpOnInstalling.2BAC8-InternetInformationServer.line-144"></span></li><li class="gap"><p class="line862">Select the Application Pool you wish to adjust. (likely <strong>DefaultAppPool</strong> ) When you do this on the right you will see the Application pools for each site on the server. This will include a Description (likely <strong>Default Application</strong> ) and a Path (<strong>&lt;Default Web Site&gt;</strong>). In this way you can be certain you are adjusting the appropriate Application Pool. <span class="anchor" id="HelpOnInstalling.2BAC8-InternetInformationServer.line-145"></span><span class="anchor" id="HelpOnInstalling.2BAC8-InternetInformationServer.line-146"></span></li><li class="gap"><p class="line862">With <strong>DefaultAppPool</strong> still selected right click and select <strong>Properties</strong>. <span class="anchor" id="HelpOnInstalling.2BAC8-InternetInformationServer.line-147"></span><span class="anchor" id="HelpOnInstalling.2BAC8-InternetInformationServer.line-148"></span></li><li class="gap"><p class="line862">Select the <strong>Identity</strong> tab and with <strong>Predefined</strong> clicked use the drop down box to change the <strong>Identity</strong> to <strong>Local System</strong> instead of Network Service. <em>Please be aware that this is a workaround since you SHOULD set your group settings to allow Network Service to access the cgi scripts.</em> <span class="anchor" id="HelpOnInstalling.2BAC8-InternetInformationServer.line-149"></span></li></ol><p class="line862">Under Windows Server 2003, you will also need to give your IUSR_MACHINENAME account <em>Modify</em> access to the mywiki\data and mywiki\underlay sub-directories, as file system permissions are more restricted by default than previous Windows versions. <span class="anchor" id="HelpOnInstalling.2BAC8-InternetInformationServer.line-150"></span><span class="anchor" id="HelpOnInstalling.2BAC8-InternetInformationServer.line-151"></span><p class="line862">That is all, try to access your new-born wiki with the URL <a class="http" href="http://127.0.0.1/mywiki/">http://127.0.0.1/mywiki/</a>. You should see the FrontPage, try to edit and save it, and if that works, see if your edit is reflected on the RecentChanges page. <span class="anchor" id="HelpOnInstalling.2BAC8-InternetInformationServer.line-152"></span><span class="anchor" id="HelpOnInstalling.2BAC8-InternetInformationServer.line-153"></span><p class="line867">
<h3 id="HelpOnInstalling.2BAC8-InternetInformationServer.Configuringwikiconfig.py">Configuring wikiconfig.py</h3>
<span class="anchor" id="HelpOnInstalling.2BAC8-InternetInformationServer.line-154"></span><p class="line862">Finally, edit "<tt>wikiconfig.py</tt>" and at least change "<tt>sitename</tt>" and "<tt>logo_string</tt>" to some personal values: <span class="anchor" id="HelpOnInstalling.2BAC8-InternetInformationServer.line-155"></span><span class="anchor" id="HelpOnInstalling.2BAC8-InternetInformationServer.line-156"></span><p class="line867"><span class="anchor" id="HelpOnInstalling.2BAC8-InternetInformationServer.line-157"></span><span class="anchor" id="HelpOnInstalling.2BAC8-InternetInformationServer.line-158"></span><span class="anchor" id="HelpOnInstalling.2BAC8-InternetInformationServer.line-159"></span><pre>sitename = u'My Wiki'
logo_string = u'&lt;img src="/mywiki/images/mywiki-logo.gif" alt="MyWiki Logo"&gt;My Wiki'</pre><span class="anchor" id="HelpOnInstalling.2BAC8-InternetInformationServer.line-160"></span><p class="line862">Where "<tt>images</tt>" is a directory under your "<tt>mywiki</tt>" instance. <span class="anchor" id="HelpOnInstalling.2BAC8-InternetInformationServer.line-161"></span><span class="anchor" id="HelpOnInstalling.2BAC8-InternetInformationServer.line-162"></span><p class="line862">NOTE: The configuration variable "<tt>url_prefix</tt>" in "<tt>wikiconfig.py</tt>" should match the alias for "<tt>C:\Moin\share\moin\htdocs</tt>" or themes will not work ("<tt>/wiki</tt>" for the instructions above). This way, any reference in "<tt>wikiconfig.py</tt>" to "<tt>/wiki/something</tt>" will look in the shared data directory and a reference to "<tt>/mywiki/something</tt>" will look in the wiki instance directory. These are considered absolute paths because relative paths will not work correctly. <span class="anchor" id="HelpOnInstalling.2BAC8-InternetInformationServer.line-163"></span><span class="anchor" id="HelpOnInstalling.2BAC8-InternetInformationServer.line-164"></span><p class="line874">It seems you need to change the Custom Errors setting for 404 before you can create new pages. You can accomplish this by performing the following steps: <span class="anchor" id="HelpOnInstalling.2BAC8-InternetInformationServer.line-165"></span><span class="anchor" id="HelpOnInstalling.2BAC8-InternetInformationServer.line-166"></span><ol type="1"><li>Go into the IIS Manager, right-click on 'mywiki' (or whatever your wiki instance directory is called), and select properties. <span class="anchor" id="HelpOnInstalling.2BAC8-InternetInformationServer.line-167"></span><span class="anchor" id="HelpOnInstalling.2BAC8-InternetInformationServer.line-168"></span></li><li class="gap"><p class="line862">Next, go to the Custom Errors tab and find the 404 entry, and click the <em>Set to Default</em> button. <span class="anchor" id="HelpOnInstalling.2BAC8-InternetInformationServer.line-169"></span></li></ol><p class="line867">
<h2 id="HelpOnInstalling.2BAC8-InternetInformationServer.Troubleshooting">Troubleshooting</h2>
<span class="anchor" id="HelpOnInstalling.2BAC8-InternetInformationServer.line-170"></span><ul><li><p class="line862">If you see an error like "<tt>ImportError:&nbsp;No&nbsp;module&nbsp;named&nbsp;MoinMoin</tt>", it means that python cannot find Moin<tt class="backtick"></tt>Moin. See above for how to add to <tt>sys.path</tt>. <span class="anchor" id="HelpOnInstalling.2BAC8-InternetInformationServer.line-171"></span></li><li>If you see an error like Error 13: Permission Denied, it means that your web user permissions for the files do not have write/modify enabled. <span class="anchor" id="HelpOnInstalling.2BAC8-InternetInformationServer.line-172"></span></li><li><p class="line862">If the page never loads after hitting <tt>Save&nbsp;Changes</tt>, you should check the permissions of the <tt>data</tt> directory. Make sure the IUSR_COMPUTERNAME user has modify permissions. <span class="anchor" id="HelpOnInstalling.2BAC8-InternetInformationServer.line-173"></span></li><li><p class="line862">If some images like InterWiki and WorldWideWeb don't show up, it could have been because of incorrect permissions or a bad "<tt>url_prefix</tt>" in "<tt>wikiconfig.py</tt>" or the cached pages need to be updated by an Edit or deleting them in the data folder. Or you are using MS IE which has broken CSS :before support - try another browser. <span class="anchor" id="HelpOnInstalling.2BAC8-InternetInformationServer.line-174"></span></li><li><p class="line862">If you see an error message like:<br>
 <span class="anchor" id="HelpOnInstalling.2BAC8-InternetInformationServer.line-175"></span><span class="anchor" id="HelpOnInstalling.2BAC8-InternetInformationServer.line-176"></span><span class="anchor" id="HelpOnInstalling.2BAC8-InternetInformationServer.line-177"></span><span class="anchor" id="HelpOnInstalling.2BAC8-InternetInformationServer.line-178"></span><span class="anchor" id="HelpOnInstalling.2BAC8-InternetInformationServer.line-179"></span><span class="anchor" id="HelpOnInstalling.2BAC8-InternetInformationServer.line-180"></span><pre>Check your URL regular expressions in the "wikis" list in "farmconfig.py". Content-type: text/html;charset=utf-8
MoinMoin Configuration Error
Could not find a match for url: "servername/wikiname/moin.cgi?
Check your URL regular expressions in the "wikis" list in "farmconfig.py".</pre><span class="anchor" id="HelpOnInstalling.2BAC8-InternetInformationServer.line-181"></span><ul><li style="list-style-type:none">and you don't intend on using a serverfarm, remove the farmconfig.py and farmconfig.pyc files and try again. The error message shouldn't appear when you refresh the page. <span class="anchor" id="HelpOnInstalling.2BAC8-InternetInformationServer.line-182"></span><span class="anchor" id="HelpOnInstalling.2BAC8-InternetInformationServer.line-183"></span><span class="anchor" id="HelpOnInstalling.2BAC8-InternetInformationServer.line-184"></span></li></ul></li></ul><p class="line867">
<h4 id="HelpOnInstalling.2BAC8-InternetInformationServer.IISURLScanproblem">IIS URLScan problem</h4>
<span class="anchor" id="HelpOnInstalling.2BAC8-InternetInformationServer.line-185"></span><p class="line862">If you see an error like "<em>The system cannot find the file specified.</em>" when trying to run Moin on IIS the problem may be URLScan.  By default URLScan blocks any URLs that use PATH_INFO.  To solve the problem, edit the URLScan.ini file in the <tt>%SystemRoot%\system32\inetsrv\urlscan\urlscan.ini</tt> directory.  I changed the line allowdotinpath from 0 to 1.  As follows <span class="anchor" id="HelpOnInstalling.2BAC8-InternetInformationServer.line-186"></span><span class="anchor" id="HelpOnInstalling.2BAC8-InternetInformationServer.line-187"></span><p class="line867"><span class="anchor" id="HelpOnInstalling.2BAC8-InternetInformationServer.line-188"></span><span class="anchor" id="HelpOnInstalling.2BAC8-InternetInformationServer.line-189"></span><pre>allowdotinpath=1               ; if 1, allow dots that are not file extensions</pre><span class="anchor" id="HelpOnInstalling.2BAC8-InternetInformationServer.line-190"></span><span class="anchor" id="HelpOnInstalling.2BAC8-InternetInformationServer.line-191"></span><p class="line862">Also, you might have to add the following setting: <span class="anchor" id="HelpOnInstalling.2BAC8-InternetInformationServer.line-192"></span><span class="anchor" id="HelpOnInstalling.2BAC8-InternetInformationServer.line-193"></span><span class="anchor" id="HelpOnInstalling.2BAC8-InternetInformationServer.line-194"></span><pre>[options]
AllowHighBitCharacters=1</pre><span class="anchor" id="HelpOnInstalling.2BAC8-InternetInformationServer.line-195"></span><span class="anchor" id="HelpOnInstalling.2BAC8-InternetInformationServer.line-196"></span><p class="line874">Next save the URLScan.ini and then restart the IIS service.  Your wiki should now work. <span class="anchor" id="HelpOnInstalling.2BAC8-InternetInformationServer.line-197"></span><span class="anchor" id="HelpOnInstalling.2BAC8-InternetInformationServer.line-198"></span><p class="line862">For more information, please reference the Microsoft article <a class="http" href="http://support.microsoft.com/default.aspx?scid=kb;en-us;Q326444">How to configure the URLScan tool</a> <span class="anchor" id="HelpOnInstalling.2BAC8-InternetInformationServer.line-199"></span><span class="anchor" id="HelpOnInstalling.2BAC8-InternetInformationServer.line-200"></span><p class="line867">
<h2 id="HelpOnInstalling.2BAC8-InternetInformationServer.NextSteps">Next Steps</h2>
<span class="anchor" id="HelpOnInstalling.2BAC8-InternetInformationServer.line-201"></span><ul><li><p class="line862">Backing up MoinMoin is simple. Look at <a href="http://master18.moinmo.in/HelpOnInstalling/Win32MoinEasyBackup">HelpOnInstalling/Win32MoinEasyBackup</a> for guidance (despite the somewhat misleading title, the procedure would be the same for IIS). <span class="anchor" id="HelpOnInstalling.2BAC8-InternetInformationServer.line-202"></span></li></ul><span class="anchor" id="HelpOnInstalling.2BAC8-InternetInformationServer.bottom"></span></div> <span class="anchor" id="line-75"></span><hr class="hr2" /><p class="line874"> <span class="anchor" id="line-76"></span><span class="anchor" id="trouble-shooting"></span> <span class="anchor" id="line-77"></span>
<h1>Trouble-shooting</h1>
<div dir="ltr" id="HelpOnInstalling.2BAC8-TroubleShooting.content" lang="en"><span class="anchor" id="HelpOnInstalling.2BAC8-TroubleShooting.top"></span>
<span class="anchor" id="HelpOnInstalling.2BAC8-TroubleShooting.line-8"></span><span class="anchor" id="HelpOnInstalling.2BAC8-TroubleShooting.line-9"></span><p class="line867"><strong>How to deal with common errors</strong> <span class="anchor" id="HelpOnInstalling.2BAC8-TroubleShooting.line-10"></span><span class="anchor" id="HelpOnInstalling.2BAC8-TroubleShooting.line-11"></span><p class="line867">
<h1 id="HelpOnInstalling.2BAC8-TroubleShooting.Firstfollowtheinstructions">First follow the instructions</h1>
<span class="anchor" id="HelpOnInstalling.2BAC8-TroubleShooting.line-12"></span><span class="anchor" id="HelpOnInstalling.2BAC8-TroubleShooting.line-13"></span><p class="line862">Moin has provided instructions for common usage.  Try creating a wiki using the default values within the instructions. Your wiki would then be stored where ours is, and named <tt class="backtick">mywiki</tt> ... but you can change that place, and this name, AFTER you have a working wiki. The default values have been chosen carefully to work for most people on most platforms, or at least be a good start. <span class="anchor" id="HelpOnInstalling.2BAC8-TroubleShooting.line-14"></span><span class="anchor" id="HelpOnInstalling.2BAC8-TroubleShooting.line-15"></span><ul><li>First follow the instructions <span class="anchor" id="HelpOnInstalling.2BAC8-TroubleShooting.line-16"></span></li><li>Do not change any configuration option unless you must. <span class="anchor" id="HelpOnInstalling.2BAC8-TroubleShooting.line-17"></span></li><li>Play with a working wiki before you try to customize it. <span class="anchor" id="HelpOnInstalling.2BAC8-TroubleShooting.line-18"></span><span class="anchor" id="HelpOnInstalling.2BAC8-TroubleShooting.line-19"></span></li></ul><p class="line867">
<h1 id="HelpOnInstalling.2BAC8-TroubleShooting.Changeonethingatatime">Change one thing at a time</h1>
<span class="anchor" id="HelpOnInstalling.2BAC8-TroubleShooting.line-20"></span><span class="anchor" id="HelpOnInstalling.2BAC8-TroubleShooting.line-21"></span><p class="line874">When your wiki is running, go and customize it to your needs, but remember to change only one option at a time. You probably don't fully understand how all options work, and if you go and break few things in the same step, you will have hard time to fix it.  <span class="anchor" id="HelpOnInstalling.2BAC8-TroubleShooting.line-22"></span><span class="anchor" id="HelpOnInstalling.2BAC8-TroubleShooting.line-23"></span><p class="line867">
<h1 id="HelpOnInstalling.2BAC8-TroubleShooting.CheckThatYourWebserverCanUsePython">Check That Your Webserver Can Use Python</h1>
<span class="anchor" id="HelpOnInstalling.2BAC8-TroubleShooting.line-24"></span><span class="anchor" id="HelpOnInstalling.2BAC8-TroubleShooting.line-25"></span><p class="line862">This is also in <a href="http://master18.moinmo.in/HelpOnInstalling/BasicInstallation">HelpOnInstalling/BasicInstallation</a>.  Use this script: <span class="anchor" id="HelpOnInstalling.2BAC8-TroubleShooting.line-26"></span><span class="anchor" id="HelpOnInstalling.2BAC8-TroubleShooting.line-27"></span><p class="line867"><span class="anchor" id="HelpOnInstalling.2BAC8-TroubleShooting.line-28"></span><span class="anchor" id="HelpOnInstalling.2BAC8-TroubleShooting.line-29"></span><span class="anchor" id="HelpOnInstalling.2BAC8-TroubleShooting.line-30"></span><span class="anchor" id="HelpOnInstalling.2BAC8-TroubleShooting.line-31"></span><span class="anchor" id="HelpOnInstalling.2BAC8-TroubleShooting.line-32"></span><span class="anchor" id="HelpOnInstalling.2BAC8-TroubleShooting.line-33"></span><span class="anchor" id="HelpOnInstalling.2BAC8-TroubleShooting.line-34"></span><span class="anchor" id="HelpOnInstalling.2BAC8-TroubleShooting.line-35"></span><span class="anchor" id="HelpOnInstalling.2BAC8-TroubleShooting.line-36"></span><span class="anchor" id="HelpOnInstalling.2BAC8-TroubleShooting.line-37"></span><span class="anchor" id="HelpOnInstalling.2BAC8-TroubleShooting.line-38"></span><span class="anchor" id="HelpOnInstalling.2BAC8-TroubleShooting.line-39"></span><span class="anchor" id="HelpOnInstalling.2BAC8-TroubleShooting.line-40"></span><pre>echo Content-Type: text/plain
echo
echo "Your web server is running as:"
id
echo "CGI scripts work"
echo "Now we try to invoke Python interpreters and get their versions:"
python -V 2&gt;&amp;1
python2.3 -V 2&gt;&amp;1
python2.4 -V 2&gt;&amp;1
python2.5 -V 2&gt;&amp;1
echo "Finished."</pre><span class="anchor" id="HelpOnInstalling.2BAC8-TroubleShooting.line-41"></span><span class="anchor" id="HelpOnInstalling.2BAC8-TroubleShooting.line-42"></span><p class="line874">to see if you can get it to announce that cgi works. Then you will also know which versions of python are usable.  This is especially handy for users with no root access. <span class="anchor" id="HelpOnInstalling.2BAC8-TroubleShooting.line-43"></span><span class="anchor" id="HelpOnInstalling.2BAC8-TroubleShooting.line-44"></span><p class="line867">
<h1 id="HelpOnInstalling.2BAC8-TroubleShooting.DuellingPythons">Duelling Pythons</h1>
<span class="anchor" id="HelpOnInstalling.2BAC8-TroubleShooting.line-45"></span><span class="anchor" id="HelpOnInstalling.2BAC8-TroubleShooting.line-46"></span><p class="line862">The most common problem you might encounter is when you have an old Python version installed into "<tt class="backtick">/usr</tt>", and a newer Python distribution into "<tt class="backtick">/usr/local</tt>"; this is typical for GNU/Linux distributions that still come bundled with an old Python version. <span class="anchor" id="HelpOnInstalling.2BAC8-TroubleShooting.line-47"></span><span class="anchor" id="HelpOnInstalling.2BAC8-TroubleShooting.line-48"></span><p class="line862">In that case, if you enter "<tt class="backtick">python</tt>" on your prompt, you will usually get the more recent Python interpreter, because "<tt class="backtick">/usr/local/bin</tt>" is in your <tt class="backtick">PATH</tt>. The situation is different in your webserver environment, and thus you might have to change the bang path of "<tt class="backtick">moin.cgi</tt>", like this: <span class="anchor" id="HelpOnInstalling.2BAC8-TroubleShooting.line-49"></span><span class="anchor" id="HelpOnInstalling.2BAC8-TroubleShooting.line-50"></span><span class="anchor" id="HelpOnInstalling.2BAC8-TroubleShooting.line-51"></span><span class="anchor" id="HelpOnInstalling.2BAC8-TroubleShooting.line-52"></span><span class="anchor" id="HelpOnInstalling.2BAC8-TroubleShooting.line-53"></span><span class="anchor" id="HelpOnInstalling.2BAC8-TroubleShooting.line-54"></span><span class="anchor" id="HelpOnInstalling.2BAC8-TroubleShooting.line-55"></span><span class="anchor" id="HelpOnInstalling.2BAC8-TroubleShooting.line-56"></span><pre>"""
    MoinMoin - CGI Driver Script
...
"""</pre><span class="anchor" id="HelpOnInstalling.2BAC8-TroubleShooting.line-57"></span><span class="anchor" id="HelpOnInstalling.2BAC8-TroubleShooting.line-58"></span><ul><li><p class="line862">When installing, make sure you install with the version of python you want to run moin with. <tt class="backtick">python&nbsp;setup.py&nbsp;install</tt> will install with the first python in the path, which may be the version you expect or not! <tt class="backtick">/usr/local/bin/python2.4</tt> will install in specific python. You will have to use the same path in the moin server script. <span class="anchor" id="HelpOnInstalling.2BAC8-TroubleShooting.line-59"></span><span class="anchor" id="HelpOnInstalling.2BAC8-TroubleShooting.line-60"></span></li></ul><p class="line867">
<h1 id="HelpOnInstalling.2BAC8-TroubleShooting.Missingfilepermissions">Missing file permissions</h1>
<span class="anchor" id="HelpOnInstalling.2BAC8-TroubleShooting.line-61"></span><span class="anchor" id="HelpOnInstalling.2BAC8-TroubleShooting.line-62"></span><p class="line862">If you are root, the installed files may be readable only by root, but they must also be readable by the web server before the wiki will work. This includes both the Python modules and the site itself. For the data directory, the wiki engine also needs <em>write</em> access.  To fix this, first find out where the Python module directory is; look in <tt class="backtick">install.log</tt>, or run the command:  <span class="anchor" id="HelpOnInstalling.2BAC8-TroubleShooting.line-63"></span><span class="anchor" id="HelpOnInstalling.2BAC8-TroubleShooting.line-64"></span><p class="line867"><span class="anchor" id="HelpOnInstalling.2BAC8-TroubleShooting.line-65"></span><span class="anchor" id="HelpOnInstalling.2BAC8-TroubleShooting.line-66"></span><pre>python -c "import sys; print '%s/lib/python%s/site-packages' % ( sys.prefix, sys.version[:3] )"</pre><span class="anchor" id="HelpOnInstalling.2BAC8-TroubleShooting.line-67"></span><span class="anchor" id="HelpOnInstalling.2BAC8-TroubleShooting.line-68"></span><p class="line862">For the example below, we'll assume that the Python module directory is <tt class="backtick">/usr/local/lib/python2.4/site-packages</tt>. <span class="anchor" id="HelpOnInstalling.2BAC8-TroubleShooting.line-69"></span>Make the files world-readable using the following commands: <span class="anchor" id="HelpOnInstalling.2BAC8-TroubleShooting.line-70"></span><span class="anchor" id="HelpOnInstalling.2BAC8-TroubleShooting.line-71"></span><span class="anchor" id="HelpOnInstalling.2BAC8-TroubleShooting.line-72"></span><span class="anchor" id="HelpOnInstalling.2BAC8-TroubleShooting.line-73"></span><pre>cd /usr/local
chmod -R a+rX lib/python2.4/site-packages/MoinMoin</pre><span class="anchor" id="HelpOnInstalling.2BAC8-TroubleShooting.line-74"></span><span class="anchor" id="HelpOnInstalling.2BAC8-TroubleShooting.line-75"></span><p class="line867">
<h1 id="HelpOnInstalling.2BAC8-TroubleShooting.SetYourVariablesCarefully">Set Your Variables Carefully</h1>
<span class="anchor" id="HelpOnInstalling.2BAC8-TroubleShooting.line-76"></span><span class="anchor" id="HelpOnInstalling.2BAC8-TroubleShooting.line-77"></span><p class="line862">Be especially careful when you retype instead of cut and paste. Quoting errors in <tt class="backtick">wikiconfig.py</tt> can cause things to fail.  The following items are also variable issues.  Also, some features only work if they are enabled by their option in either <tt class="backtick">wikiconfig.py</tt> or <tt class="backtick">farmconfig.py</tt>. <span class="anchor" id="HelpOnInstalling.2BAC8-TroubleShooting.line-78"></span><span class="anchor" id="HelpOnInstalling.2BAC8-TroubleShooting.line-79"></span><p class="line867">
<h2 id="HelpOnInstalling.2BAC8-TroubleShooting.moin.cgifound.2CMoindoesn.27trun">moin.cgi found, Moin doesn't run</h2>
<span class="anchor" id="HelpOnInstalling.2BAC8-TroubleShooting.line-80"></span><span class="anchor" id="HelpOnInstalling.2BAC8-TroubleShooting.line-81"></span><p class="line862">If you have to add the moin code location into the system path, make sure to specify the place <tt class="backtick"></tt>above<tt class="backtick"></tt> MoinMoin itself, so that the word MoinMoin is recognized during the import request.   <span class="anchor" id="HelpOnInstalling.2BAC8-TroubleShooting.line-82"></span><span class="anchor" id="HelpOnInstalling.2BAC8-TroubleShooting.line-83"></span><p class="line867">
<h2 id="HelpOnInstalling.2BAC8-TroubleShooting.CSSfilesdonotwork">CSS files do not work</h2>
<span class="anchor" id="HelpOnInstalling.2BAC8-TroubleShooting.line-84"></span><span class="anchor" id="HelpOnInstalling.2BAC8-TroubleShooting.line-85"></span><p class="line874">A very common error is missing CSS styles. Your wiki looks bare and ugly, unlike this nice wiki. In most cases, you did break the configuration by not reading the instructions. <span class="anchor" id="HelpOnInstalling.2BAC8-TroubleShooting.line-86"></span><span class="anchor" id="HelpOnInstalling.2BAC8-TroubleShooting.line-87"></span><p class="line862">The fix is very easy: make sure your Apache Alias and <a class="nonexistent" href="http://master18.moinmo.in/ScriptAlias">ScriptAlias</a> are <strong>NOT</strong> the same. <span class="anchor" id="HelpOnInstalling.2BAC8-TroubleShooting.line-88"></span><span class="anchor" id="HelpOnInstalling.2BAC8-TroubleShooting.line-89"></span><p class="line862">This Apache setup will <strong>never work</strong>: <span class="anchor" id="HelpOnInstalling.2BAC8-TroubleShooting.line-90"></span><span class="anchor" id="HelpOnInstalling.2BAC8-TroubleShooting.line-91"></span><span class="anchor" id="HelpOnInstalling.2BAC8-TroubleShooting.line-92"></span><span class="anchor" id="HelpOnInstalling.2BAC8-TroubleShooting.line-93"></span><pre>Alias /wiki/ "/prefix/share/moin/htdocs/"
ScriptAlias /wiki/ "/var/www/wiki/moin.cgi"</pre><span class="anchor" id="HelpOnInstalling.2BAC8-TroubleShooting.line-94"></span><span class="anchor" id="HelpOnInstalling.2BAC8-TroubleShooting.line-95"></span><p class="line862">The Alias is used to serve static files: css, images, etc. <a class="nonexistent" href="http://master18.moinmo.in/ScriptAlias">ScriptAlias</a> is used to hide moin.cgi from the url. You must use different values! You can use anything you like for <a class="nonexistent" href="http://master18.moinmo.in/ScriptAlias">ScriptAlias</a>, or Alias, but Alias must match the <tt class="backtick">url_prefix_static</tt> configuration option. <span class="anchor" id="HelpOnInstalling.2BAC8-TroubleShooting.line-96"></span><span class="anchor" id="HelpOnInstalling.2BAC8-TroubleShooting.line-97"></span><p class="line874">Here is an example that works (the default): <span class="anchor" id="HelpOnInstalling.2BAC8-TroubleShooting.line-98"></span><span class="anchor" id="HelpOnInstalling.2BAC8-TroubleShooting.line-99"></span><span class="anchor" id="HelpOnInstalling.2BAC8-TroubleShooting.line-100"></span><span class="anchor" id="HelpOnInstalling.2BAC8-TroubleShooting.line-101"></span><pre># Apache config
Alias /moin_static170/ "/prefix/share/moin/htdocs/"</pre><span class="anchor" id="HelpOnInstalling.2BAC8-TroubleShooting.line-102"></span><p class="line867"><span class="anchor" id="HelpOnInstalling.2BAC8-TroubleShooting.line-103"></span><span class="anchor" id="HelpOnInstalling.2BAC8-TroubleShooting.line-104"></span><span class="anchor" id="HelpOnInstalling.2BAC8-TroubleShooting.line-105"></span><pre># Wiki config
    url_prefix_static = '/moin_static170'</pre><span class="anchor" id="HelpOnInstalling.2BAC8-TroubleShooting.line-106"></span><span class="anchor" id="HelpOnInstalling.2BAC8-TroubleShooting.bottom"></span></div> <span class="anchor" id="line-78"></span><span class="anchor" id="bottom"></span></div><p id="pageinfo" class="info" lang="en" dir="ltr">MoinMaster: MoinMoin/InstallDocs  (last edited 2008-06-08 14:27:37 by <span title="??? @ localhost[127.0.0.1]">localhost</span>)</p>
<div id="pagebottom"></div>
</div>
</body>
</html>

